<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="sJgro_9-KyRL3EkTM5KW84pQPrg2Fv1KdkibDRBIulE">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"cloudolife.com","root":"/","images":"/images","scheme":"Pisces","darkmode":true,"version":"8.23.1","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"always","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"default","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":null,"activeClass":"gitalk"},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js" defer></script>

    <meta name="description" content="Podman Rootless Prior to allowing users without root privileges to run Podman, the administrator must install or build Podman and complete the following configurations.">
<meta property="og:type" content="article">
<meta property="og:title" content="[Container - Podman] Basic Setup and Use of Podman in a Rootless environment">
<meta property="og:url" content="https://cloudolife.com/2021/12/25/Cloud-Native/Cloud-Computing/Container/Podman/Basic-Setup-and-Use-of-Podman-in-a-Rootless-environment/index.html">
<meta property="og:site_name" content="Cloud-oriented Life">
<meta property="og:description" content="Podman Rootless Prior to allowing users without root privileges to run Podman, the administrator must install or build Podman and complete the following configurations.">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-12-25T00:00:00.000Z">
<meta property="article:modified_time" content="2025-06-10T09:49:34.909Z">
<meta property="article:author" content="CloudoLife">
<meta property="article:tag" content="Cloud Native">
<meta property="article:tag" content="Cloud Computing">
<meta property="article:tag" content="Container">
<meta property="article:tag" content="CentOS">
<meta property="article:tag" content="Rootless">
<meta property="article:tag" content="&#x2F;etc&#x2F;subuid">
<meta property="article:tag" content="&#x2F;etc&#x2F;subgid">
<meta property="article:tag" content="max_user_namespaces">
<meta property="article:tag" content="sysctl">
<meta property="article:tag" content="RHEL7">
<meta property="article:tag" content="Podman">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://cloudolife.com/2021/12/25/Cloud-Native/Cloud-Computing/Container/Podman/Basic-Setup-and-Use-of-Podman-in-a-Rootless-environment/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://cloudolife.com/2021/12/25/Cloud-Native/Cloud-Computing/Container/Podman/Basic-Setup-and-Use-of-Podman-in-a-Rootless-environment/","path":"2021/12/25/Cloud-Native/Cloud-Computing/Container/Podman/Basic-Setup-and-Use-of-Podman-in-a-Rootless-environment/","title":"[Container - Podman] Basic Setup and Use of Podman in a Rootless environment"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>[Container - Podman] Basic Setup and Use of Podman in a Rootless environment | Cloud-oriented Life</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-8Y9QPJWXQN"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-8Y9QPJWXQN","only_pageview":false,"measure_protocol_api_secret":null}</script>
  <script src="/js/third-party/analytics/google-analytics.js" defer></script>

  <script src="/js/third-party/analytics/baidu-analytics.js" defer></script>
  <script async src="https://hm.baidu.com/hm.js?995d7016a56cfd5c2ef6f2e6640a670e"></script>







  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script><script src="/js/bookmark.js" defer></script><script src="/js/pjax.js" defer></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous" defer></script>
<script src="/js/third-party/search/local-search.js" defer></script>

  <script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.3.1/pdfobject.min.js","integrity":"sha256-jI72I8ZLVflVOisZIOaLvRew3tyvzeu6aZXFm7P7dEo="},"url":"/lib/pdf/web/viewer.html"}</script>
  <script src="/js/third-party/tags/pdf.js" defer></script>






  
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>






<script data-ad-client="ca-pub-8693122033969144" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="Cloud-oriented Life" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Cloud-oriented Life</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Cloud Native Technology Improves Lives</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">1646</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">331</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">584</span></a></li><li class="menu-item menu-item-ansible"><a href="/tags/Ansible/" rel="section"><i class="fa fa-book fa-fw"></i>Ansible</a></li><li class="menu-item menu-item-awesome-software"><a href="/tags/Awesome-Software/" rel="section"><i class="fa fa-book fa-fw"></i>Awesome Software</a></li><li class="menu-item menu-item-golang-(go)"><a href="/tags/Golang-Go/" rel="section"><i class="fa fa-book fa-fw"></i>Golang (Go)</a></li><li class="menu-item menu-item-helm"><a href="/tags/Helm/" rel="section"><i class="fa fa-book fa-fw"></i>Helm</a></li><li class="menu-item menu-item-java"><a href="/tags/Java/" rel="section"><i class="fa fa-book fa-fw"></i>Java</a></li><li class="menu-item menu-item-javascript"><a href="/tags/JavaScript/" rel="section"><i class="fa fa-book fa-fw"></i>JavaScript</a></li><li class="menu-item menu-item-knative"><a href="/tags/Knative/" rel="section"><i class="fa fa-book fa-fw"></i>Knative</a></li><li class="menu-item menu-item-kubernetes-(k8s)"><a href="/tags/Kubernetes-K8S/" rel="section"><i class="fa fa-book fa-fw"></i>Kubernetes (K8S)</a></li><li class="menu-item menu-item-macos"><a href="/tags/macOS/" rel="section"><i class="fa fa-book fa-fw"></i>macOS</a></li><li class="menu-item menu-item-python"><a href="/tags/Python/" rel="section"><i class="fa fa-book fa-fw"></i>Python</a></li><li class="menu-item menu-item-pulumi"><a href="/tags/Pulumi/" rel="section"><i class="fa fa-book fa-fw"></i>Pulumi</a></li><li class="menu-item menu-item-react"><a href="/tags/React/" rel="section"><i class="fa fa-book fa-fw"></i>React</a></li><li class="menu-item menu-item-ruby"><a href="/tags/Ruby/" rel="section"><i class="fa fa-book fa-fw"></i>Ruby</a></li><li class="menu-item menu-item-ruby-on-rails"><a href="/tags/Ruby-on-Rails-RoR/" rel="section"><i class="fa fa-book fa-fw"></i>Ruby On Rails</a></li><li class="menu-item menu-item-rust"><a href="/tags/Rust/" rel="section"><i class="fa fa-book fa-fw"></i>Rust</a></li><li class="menu-item menu-item-serverless"><a href="/tags/Serverless/" rel="section"><i class="fa fa-book fa-fw"></i>Serverless</a></li><li class="menu-item menu-item-service-mesh"><a href="/tags/Service-Mesh/" rel="section"><i class="fa fa-book fa-fw"></i>Service Mesh</a></li><li class="menu-item menu-item-svelte"><a href="/tags/Svelte/" rel="section"><i class="fa fa-book fa-fw"></i>Svelte</a></li><li class="menu-item menu-item-taro"><a href="/tags/Taro/" rel="section"><i class="fa fa-book fa-fw"></i>Taro</a></li><li class="menu-item menu-item-terraform"><a href="/tags/Terraform/" rel="section"><i class="fa fa-book fa-fw"></i>Terraform</a></li><li class="menu-item menu-item-typescript"><a href="/tags/TypeScript/" rel="section"><i class="fa fa-book fa-fw"></i>TypeScript</a></li><li class="menu-item menu-item-about"><a href="/about-us/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a></li><li class="menu-item menu-item-rss"><a href="/atom.xml" rel="section"><i class="fa fa-rss fa-fw"></i>RSS</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="Searching..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number">1.</span> <span class="nav-text">Podman Rootless</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Enable-user-namespaces-on-RHEL7-machines"><span class="nav-number">1.1.</span> <span class="nav-text">Enable user namespaces (on RHEL7 machines)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#etc-subuid-and-etc-subgid-configuration"><span class="nav-number">1.1.1.</span> <span class="nav-text">&#x2F;etc&#x2F;subuid and &#x2F;etc&#x2F;subgid configuration</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#FAQs"><span class="nav-number">1.2.</span> <span class="nav-text">FAQs</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#usermod-unrecognized-option-%E2%80%98%E2%80%93add-subuids%E2%80%99-on-CentOS"><span class="nav-number">1.2.1.</span> <span class="nav-text">usermod: unrecognized option ‘–add-subuids’ on CentOS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#user-namespaces-are-not-enabled-in-proc-sys-user-max-user-namespaces-on-CentOS7-RHEL7"><span class="nav-number">1.2.2.</span> <span class="nav-text">user namespaces are not enabled in &#x2F;proc&#x2F;sys&#x2F;user&#x2F;max_user_namespaces on CentOS7, RHEL7</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#No-subuid-ranges-found-for-user-%E2%80%9Ccloudolife%E2%80%9D-in-etc-subuid"><span class="nav-number">1.2.3.</span> <span class="nav-text">No subuid ranges found for user “cloudolife” in &#x2F;etc&#x2F;subuid</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#there-might-not-be-enough-IDs-available-in-the-namespace"><span class="nav-number">1.2.4.</span> <span class="nav-text">there might not be enough IDs available in the namespace</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#References"><span class="nav-number">1.3.</span> <span class="nav-text">References</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">CloudoLife</p>
  <div class="site-description" itemprop="description">A Husband and Father, Knowledge Worker, Full-skilled Cloud Engineer</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">584</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">331</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">1646</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/CloudoLife" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;CloudoLife" rel="noopener me external nofollow noreferrer" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/CloudoLife" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;CloudoLife" rel="noopener me external nofollow noreferrer" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
    <div class="sidebar-inner sidebar-blogroll">
      <div class="links-of-blogroll animated">
        <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
          Links
        </div>
        <ul class="links-of-blogroll-list">
            <li class="links-of-blogroll-item">
              <a href="https://cloudolife.cn/" title="https:&#x2F;&#x2F;cloudolife.cn" rel="noopener external nofollow noreferrer" target="_blank">CLoudoLife - Chinese (Simplified)</a>
            </li>
        </ul>
      </div>
    </div>
        <div class="pjax">
        </div>
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://cloudolife.com/2021/12/25/Cloud-Native/Cloud-Computing/Container/Podman/Basic-Setup-and-Use-of-Podman-in-a-Rootless-environment/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CloudoLife">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cloud-oriented Life">
      <meta itemprop="description" content="A Husband and Father, Knowledge Worker, Full-skilled Cloud Engineer">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="[Container - Podman] Basic Setup and Use of Podman in a Rootless environment | Cloud-oriented Life">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          [Container - Podman] Basic Setup and Use of Podman in a Rootless environment
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-12-25 00:00:00" itemprop="dateCreated datePublished" datetime="2021-12-25T00:00:00+00:00">2021-12-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2025-06-10 09:49:34" itemprop="dateModified" datetime="2025-06-10T09:49:34+00:00">2025-06-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Cloud-Native/" itemprop="url" rel="index"><span itemprop="name">Cloud Native</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Cloud-Native/Cloud-Computing/" itemprop="url" rel="index"><span itemprop="name">Cloud Computing</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Cloud-Native/Cloud-Computing/Container/" itemprop="url" rel="index"><span itemprop="name">Container</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Cloud-Native/Cloud-Computing/Container/Podman/" itemprop="url" rel="index"><span itemprop="name">Podman</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">Views: </span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>4.2k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>4 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1>Podman Rootless</h1>
<p>Prior to allowing users without root privileges to run Podman, the administrator must install or build Podman and complete the following configurations.</p>
<span id="more"></span>
<h2 id="Enable-user-namespaces-on-RHEL7-machines">Enable user namespaces (on RHEL7 machines)</h2>
<p>The number of user namespaces that are allowed on the system is specified in the file <code>/proc/sys/user/max_user_namespaces</code>. On most Linux platforms this is preset by default and no adjustment is necessary. However, on RHEL7 machines, a user with root privileges may need to set that to a reasonable value by using this command: <code>sysctl user.max_user_namespaces=15000</code>.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="string">&quot;user.max_user_namespaces=15000&quot;</span> &gt; /etc/sysctl.d/userns.conf</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysctl -p /etc/sysctl.d/userns.conf</span></span><br></pre></td></tr></table></figure>
<h3 id="etc-subuid-and-etc-subgid-configuration">/etc/subuid and /etc/subgid configuration</h3>
<p>Rootless Podman requires the user running it to have a range of UIDs listed in the files <code>/etc/subuid</code> and <code>/etc/subgid</code>. The <code>shadow-utils</code> or <code>newuid</code> package provides these files on different distributions and they must be installed on the system. Root privileges are required to add or update entries within these files. The following is a summary from the <a target="_blank" rel="noopener external nofollow noreferrer" href="https://opensource.com/article/19/2/how-does-rootless-podman-work">How does rootless Podman work? - https://opensource.com/article/19/2/how-does-rootless-podman-work</a> article by Dan Walsh on <a target="_blank" rel="noopener external nofollow noreferrer" href="https://opensource.com/">opensource.com</a></p>
<p>For each user that will be allowed to create containers, update <code>/etc/subuid</code> and <code>/etc/subgid</code> for the user with fields that look like the following. Note that the values for each user must be unique. If there is overlap, there is a potential for a user to use another user’s namespace and they could corrupt it.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> /etc/subuid</span></span><br><span class="line">cloudolife:100000:65536</span><br><span class="line">test:165536:65536</span><br></pre></td></tr></table></figure>
<p>The format of this file is <code>USERNAME:UID:RANGE</code></p>
<p>username as listed in <code>/etc/passwd</code> or in the output of <a target="_blank" rel="noopener external nofollow noreferrer" href="https://man7.org/linux/man-pages/man3/getpwent.3.html">getpwent - https://man7.org/linux/man-pages/man3/getpwent.3.html</a>.</p>
<ul>
<li>
<p>The initial UID allocated for the user.</p>
</li>
<li>
<p>The size of the range of UIDs allocated for the user.</p>
</li>
</ul>
<p>This means the user johndoe is allocated UIDs <code>100000-165535</code> as well as their standard UID in the <code>/etc/passwd</code> file.</p>
<hr>
<p>NOTE: this is not currently supported with network installs; these files must be available locally to the host machine. It is not possible to configure this with LDAP or Active Directory.</p>
<hr>
<p>If you update either <code>/etc/subuid</code> or <code>/etc/subgid</code>, you need to stop all the running containers owned by the user and kill the pause process that is running on the system for that user. This can be done automatically by using the <code>podman system migrate</code> command which will stop all the containers for the user and will kill the pause process.</p>
<p>Rather than updating the files directly, the usermod program can be used to assign UIDs and GIDs to a user.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">usermod --add-subuids 200000-201000 --add-subgids 200000-201000 cloudolife</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">grep johndoe /etc/subuid /etc/subgid</span></span><br><span class="line">/etc/subuid:cloudolife:200000:1001</span><br><span class="line">/etc/subgid:cloudolife:200000:1001</span><br></pre></td></tr></table></figure>
<h2 id="FAQs">FAQs</h2>
<h3 id="usermod-unrecognized-option-‘–add-subuids’-on-CentOS">usermod: unrecognized option ‘–add-subuids’ on CentOS</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">usermod --add-subuids 200000-201000 --add-subgids 200000-201000 cloudolife</span></span><br></pre></td></tr></table></figure>
<p>Create or modify <code>/etc/subuid</code> and <code>/etc/subugid</code> manulally.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="string">&quot;cloudolife:200000:1001&quot;</span> &gt; /etc/subuid</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cp</span> /etc/subuid /etc/subgid</span></span><br></pre></td></tr></table></figure>
<h3 id="user-namespaces-are-not-enabled-in-proc-sys-user-max-user-namespaces-on-CentOS7-RHEL7">user namespaces are not enabled in /proc/sys/user/max_user_namespaces on CentOS7, RHEL7</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">podman</span></span><br><span class="line">cannot clone: Invalid argument</span><br><span class="line">user namespaces are not enabled in /proc/sys/user/max_user_namespaces</span><br></pre></td></tr></table></figure>
<p>Remember to specify <code>user.max_user_namespaces</code> to <code>15000</code>.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="string">&quot;user.max_user_namespaces=15000&quot;</span> &gt; /etc/sysctl.d/userns.conf</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysctl -p /etc/sysctl.d/userns.conf</span></span><br></pre></td></tr></table></figure>
<h3 id="No-subuid-ranges-found-for-user-“cloudolife”-in-etc-subuid">No subuid ranges found for user “cloudolife” in /etc/subuid</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">podman</span></span><br><span class="line">ERRO[0000] cannot find mappings for user cloudolife: No subuid ranges found for user &quot;cloudolife&quot; in /etc/subuid</span><br></pre></td></tr></table></figure>
<p>Remember to create or modify <code>/etc/subuid</code> and <code>/etc/subgid</code> according to the above.</p>
<h3 id="there-might-not-be-enough-IDs-available-in-the-namespace">there might not be enough IDs available in the namespace</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">there might not be enough IDs available in the namespace</span><br></pre></td></tr></table></figure>
<p>First, find the max id.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> /etc/passwd|awk -F <span class="string">&#x27;:&#x27;</span> <span class="string">&#x27;&#123;print $3,$4&#125;&#x27;</span>|<span class="built_in">sort</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> /etc/group|awk -F <span class="string">&#x27;:&#x27;</span> <span class="string">&#x27;&#123;print $3&#125;&#x27;</span>|<span class="built_in">sort</span></span></span><br></pre></td></tr></table></figure>
<p>Assume 410000000 is great than max ix.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> javadm:410000000:500000000 &gt;&gt; /etc/subuid</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> javadm:410000000:500000000 &gt;&gt; /etc/subgid</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">podman system migrate</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">podman info | grep host_id</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">podman unshare <span class="built_in">cat</span> /proc/self/uid_map</span></span><br></pre></td></tr></table></figure>
<!-- [CentOS8使用podman常见错误解决【附源码】_lihuanhuan_51CTO博客 - https://blog.51cto.com/byygyy/3836262](https://blog.51cto.com/byygyy/3836262) -->
<h2 id="References">References</h2>
<p>[1] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/containers/podman/blob/main/docs/tutorials/rootless_tutorial.md">podman/rootless_tutorial.md at main · containers/podman - https://github.com/containers/podman/blob/main/docs/tutorials/rootless_tutorial.md</a></p>
<p>[2] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://developers.redhat.com/blog/2020/09/25/rootless-containers-with-podman-the-basics#example__using_rootless_containers">Rootless containers with Podman: The basics | Red Hat Developer - https://developers.redhat.com/blog/2020/09/25/rootless-containers-with-podman-the-basics#example__using_rootless_containers</a></p>
<p>[3] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://opensource.com/article/19/2/how-does-rootless-podman-work">How does rootless Podman work? | Opensource.com - https://opensource.com/article/19/2/how-does-rootless-podman-work</a></p>
<p>[4] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://podman.io/">Podman - https://podman.io/</a></p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>Buy me a coffee</div>
  <button>
    Donate
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/bitcoin.png" alt="CloudoLife Bitcoin">
        <span>Bitcoin</span>
      </div>

  </div>
</div>

          <div class="followme">
  <span>Welcome to my other publishing channels</span>

  <div class="social-list">

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://twitter.com/CloudoLife" rel="external nofollow noreferrer">
            <span class="icon">
              <i class="fab fa-twitter"></i>
            </span>

            <span class="label">Twitter</span>
          </a>
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://t.me/CloudoLife" rel="external nofollow noreferrer">
            <span class="icon">
              <i class="fab fa-telegram"></i>
            </span>

            <span class="label">Telegram</span>
          </a>
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="/atom.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">RSS</span>
          </a>
      </div>
  </div>
</div>

          <div class="post-tags">
              <a href="/tags/Cloud-Native/" rel="tag"># Cloud Native</a>
              <a href="/tags/Cloud-Computing/" rel="tag"># Cloud Computing</a>
              <a href="/tags/Container/" rel="tag"># Container</a>
              <a href="/tags/CentOS/" rel="tag"># CentOS</a>
              <a href="/tags/Rootless/" rel="tag"># Rootless</a>
              <a href="/tags/etc-subuid/" rel="tag"># /etc/subuid</a>
              <a href="/tags/etc-subgid/" rel="tag"># /etc/subgid</a>
              <a href="/tags/max-user-namespaces/" rel="tag"># max_user_namespaces</a>
              <a href="/tags/sysctl/" rel="tag"># sysctl</a>
              <a href="/tags/RHEL7/" rel="tag"># RHEL7</a>
              <a href="/tags/Podman/" rel="tag"># Podman</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2021/12/25/Cloud-Native/Cloud-Computing/Container/Podman/Getting-Started-with-Podman/" rel="prev" title="[Container - Podman] Getting Started with Podman">
                  <i class="fa fa-angle-left"></i> [Container - Podman] Getting Started with Podman
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2021/12/25/Programming-Language/Java/Lombok/Lombok-plugs-into-your-editor-and-build-tools-to-spicing-up-your-java-automatically/" rel="next" title="[Java - Lombok] Lombok plugs into your editor and build tools to spicing up your java automatically">
                  [Java - Lombok] Lombok plugs into your editor and build tools to spicing up your java automatically <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments gitalk-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">CloudoLife</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="Word count total">2.6m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">39:58</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener external nofollow noreferrer" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener external nofollow noreferrer" target="_blank">NexT.Pisces</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"CloudoLife","repo":"col-hexo-CloudoLife.github.io","client_id":"4ca3ae8fb3a49237db9a","client_secret":"98d6652508799ef4350ab05aabe855e58f549112","admin_user":"benjamincloudolife","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":null,"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.min.js","integrity":"sha256-MVK9MGD/XJaGyIghSVrONSnoXoGh3IFxLw0zfvzpxR4="},"path_md5":"d9f694a229dc03eddac39b2a64d75281"}</script>
<script src="/js/third-party/comments/gitalk.js" defer></script>

</body>
</html>
