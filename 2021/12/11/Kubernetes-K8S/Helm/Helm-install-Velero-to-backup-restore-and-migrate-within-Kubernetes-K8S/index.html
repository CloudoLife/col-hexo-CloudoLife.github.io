<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="sJgro_9-KyRL3EkTM5KW84pQPrg2Fv1KdkibDRBIulE">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"cloudolife.com","root":"/","images":"/images","scheme":"Pisces","darkmode":true,"version":"8.23.1","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"always","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"default","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":null,"activeClass":"gitalk"},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js" defer></script>

    <meta name="description" content="Velero Velero is an open source tool to safely backup and restore, perform disaster recovery, and migrate Kubernetes cluster resources and persistent volumes. This article is about how to use Helm to">
<meta property="og:type" content="article">
<meta property="og:title" content="[Kubernetes (K8S)] Helm install Velero to backup, restore and migrate within Kubernetes (K8S)">
<meta property="og:url" content="https://cloudolife.com/2021/12/11/Kubernetes-K8S/Helm/Helm-install-Velero-to-backup-restore-and-migrate-within-Kubernetes-K8S/index.html">
<meta property="og:site_name" content="Cloud-oriented Life">
<meta property="og:description" content="Velero Velero is an open source tool to safely backup and restore, perform disaster recovery, and migrate Kubernetes cluster resources and persistent volumes. This article is about how to use Helm to">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-12-11T00:00:00.000Z">
<meta property="article:modified_time" content="2025-06-10T09:49:34.919Z">
<meta property="article:author" content="CloudoLife">
<meta property="article:tag" content="Kubernetes (K8S)">
<meta property="article:tag" content="Security">
<meta property="article:tag" content="Cloud Native">
<meta property="article:tag" content="Helm">
<meta property="article:tag" content="SRE">
<meta property="article:tag" content="Site Reliability Engineering">
<meta property="article:tag" content="Site Reliability Engineering (SRE)">
<meta property="article:tag" content="Velero">
<meta property="article:tag" content="Backup">
<meta property="article:tag" content="Restore">
<meta property="article:tag" content="Migrate">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://cloudolife.com/2021/12/11/Kubernetes-K8S/Helm/Helm-install-Velero-to-backup-restore-and-migrate-within-Kubernetes-K8S/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://cloudolife.com/2021/12/11/Kubernetes-K8S/Helm/Helm-install-Velero-to-backup-restore-and-migrate-within-Kubernetes-K8S/","path":"2021/12/11/Kubernetes-K8S/Helm/Helm-install-Velero-to-backup-restore-and-migrate-within-Kubernetes-K8S/","title":"[Kubernetes (K8S)] Helm install Velero to backup, restore and migrate within Kubernetes (K8S)"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>[Kubernetes (K8S)] Helm install Velero to backup, restore and migrate within Kubernetes (K8S) | Cloud-oriented Life</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-8Y9QPJWXQN"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-8Y9QPJWXQN","only_pageview":false,"measure_protocol_api_secret":null}</script>
  <script src="/js/third-party/analytics/google-analytics.js" defer></script>

  <script src="/js/third-party/analytics/baidu-analytics.js" defer></script>
  <script async src="https://hm.baidu.com/hm.js?995d7016a56cfd5c2ef6f2e6640a670e"></script>







  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script><script src="/js/bookmark.js" defer></script><script src="/js/pjax.js" defer></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous" defer></script>
<script src="/js/third-party/search/local-search.js" defer></script>

  <script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.3.1/pdfobject.min.js","integrity":"sha256-jI72I8ZLVflVOisZIOaLvRew3tyvzeu6aZXFm7P7dEo="},"url":"/lib/pdf/web/viewer.html"}</script>
  <script src="/js/third-party/tags/pdf.js" defer></script>






  
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>






<script data-ad-client="ca-pub-8693122033969144" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="Cloud-oriented Life" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Cloud-oriented Life</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Cloud Native Technology Improves Lives</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">1646</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">331</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">584</span></a></li><li class="menu-item menu-item-ansible"><a href="/tags/Ansible/" rel="section"><i class="fa fa-book fa-fw"></i>Ansible</a></li><li class="menu-item menu-item-awesome-software"><a href="/tags/Awesome-Software/" rel="section"><i class="fa fa-book fa-fw"></i>Awesome Software</a></li><li class="menu-item menu-item-golang-(go)"><a href="/tags/Golang-Go/" rel="section"><i class="fa fa-book fa-fw"></i>Golang (Go)</a></li><li class="menu-item menu-item-helm"><a href="/tags/Helm/" rel="section"><i class="fa fa-book fa-fw"></i>Helm</a></li><li class="menu-item menu-item-java"><a href="/tags/Java/" rel="section"><i class="fa fa-book fa-fw"></i>Java</a></li><li class="menu-item menu-item-javascript"><a href="/tags/JavaScript/" rel="section"><i class="fa fa-book fa-fw"></i>JavaScript</a></li><li class="menu-item menu-item-knative"><a href="/tags/Knative/" rel="section"><i class="fa fa-book fa-fw"></i>Knative</a></li><li class="menu-item menu-item-kubernetes-(k8s)"><a href="/tags/Kubernetes-K8S/" rel="section"><i class="fa fa-book fa-fw"></i>Kubernetes (K8S)</a></li><li class="menu-item menu-item-macos"><a href="/tags/macOS/" rel="section"><i class="fa fa-book fa-fw"></i>macOS</a></li><li class="menu-item menu-item-python"><a href="/tags/Python/" rel="section"><i class="fa fa-book fa-fw"></i>Python</a></li><li class="menu-item menu-item-pulumi"><a href="/tags/Pulumi/" rel="section"><i class="fa fa-book fa-fw"></i>Pulumi</a></li><li class="menu-item menu-item-react"><a href="/tags/React/" rel="section"><i class="fa fa-book fa-fw"></i>React</a></li><li class="menu-item menu-item-ruby"><a href="/tags/Ruby/" rel="section"><i class="fa fa-book fa-fw"></i>Ruby</a></li><li class="menu-item menu-item-ruby-on-rails"><a href="/tags/Ruby-on-Rails-RoR/" rel="section"><i class="fa fa-book fa-fw"></i>Ruby On Rails</a></li><li class="menu-item menu-item-rust"><a href="/tags/Rust/" rel="section"><i class="fa fa-book fa-fw"></i>Rust</a></li><li class="menu-item menu-item-serverless"><a href="/tags/Serverless/" rel="section"><i class="fa fa-book fa-fw"></i>Serverless</a></li><li class="menu-item menu-item-service-mesh"><a href="/tags/Service-Mesh/" rel="section"><i class="fa fa-book fa-fw"></i>Service Mesh</a></li><li class="menu-item menu-item-svelte"><a href="/tags/Svelte/" rel="section"><i class="fa fa-book fa-fw"></i>Svelte</a></li><li class="menu-item menu-item-taro"><a href="/tags/Taro/" rel="section"><i class="fa fa-book fa-fw"></i>Taro</a></li><li class="menu-item menu-item-terraform"><a href="/tags/Terraform/" rel="section"><i class="fa fa-book fa-fw"></i>Terraform</a></li><li class="menu-item menu-item-typescript"><a href="/tags/TypeScript/" rel="section"><i class="fa fa-book fa-fw"></i>TypeScript</a></li><li class="menu-item menu-item-about"><a href="/about-us/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a></li><li class="menu-item menu-item-rss"><a href="/atom.xml" rel="section"><i class="fa fa-rss fa-fw"></i>RSS</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="Searching..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number">1.</span> <span class="nav-text">Velero</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Prerequisites"><span class="nav-number">1.1.</span> <span class="nav-text">Prerequisites</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Usages"><span class="nav-number">1.2.</span> <span class="nav-text">Usages</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#values-yaml"><span class="nav-number">1.2.1.</span> <span class="nav-text">values.yaml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Install-Release"><span class="nav-number">1.2.2.</span> <span class="nav-text">Install Release</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Examples"><span class="nav-number">1.3.</span> <span class="nav-text">Examples</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Install-Velero-CLI"><span class="nav-number">1.3.1.</span> <span class="nav-text">Install Velero CLI</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Option-1-MacOS-Homebrew"><span class="nav-number">1.3.1.1.</span> <span class="nav-text">Option 1: MacOS - Homebrew</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Option-2-GitHub-release"><span class="nav-number">1.3.1.2.</span> <span class="nav-text">Option 2: GitHub release</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Deploy-examples-nginx-app-with-pv"><span class="nav-number">1.3.2.</span> <span class="nav-text">Deploy examples&#x2F;nginx-app&#x2F;with-pv</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Run-backup"><span class="nav-number">1.3.3.</span> <span class="nav-text">Run backup</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Option-1-Create-backup-via-yaml"><span class="nav-number">1.3.3.1.</span> <span class="nav-text">Option 1 Create backup via yaml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Option-2-Create-backup-via-Velero-CLI"><span class="nav-number">1.3.3.2.</span> <span class="nav-text">Option 2 Create backup via Velero CLI</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Check-Velero-backup-status"><span class="nav-number">1.3.4.</span> <span class="nav-text">Check Velero backup status</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Restore"><span class="nav-number">1.3.5.</span> <span class="nav-text">Restore</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Simulate-a-disaster"><span class="nav-number">1.3.5.1.</span> <span class="nav-text">Simulate a disaster:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Restore-your-lost-resources"><span class="nav-number">1.3.5.2.</span> <span class="nav-text">Restore your lost resources:</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#FAQs"><span class="nav-number">1.4.</span> <span class="nav-text">FAQs</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#unable-to-locate-ObjectStore-plugin-named-velero-io-aws"><span class="nav-number">1.4.1.</span> <span class="nav-text">unable to locate ObjectStore plugin named velero.io&#x2F;aws</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pod-volume-backup-failed-error-getting-volume-path-on-host"><span class="nav-number">1.4.2.</span> <span class="nav-text">pod volume backup failed: error getting volume path on host</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#References"><span class="nav-number">1.5.</span> <span class="nav-text">References</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">CloudoLife</p>
  <div class="site-description" itemprop="description">A Husband and Father, Knowledge Worker, Full-skilled Cloud Engineer</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">584</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">331</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">1646</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/CloudoLife" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;CloudoLife" rel="noopener me external nofollow noreferrer" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/CloudoLife" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;CloudoLife" rel="noopener me external nofollow noreferrer" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
    <div class="sidebar-inner sidebar-blogroll">
      <div class="links-of-blogroll animated">
        <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
          Links
        </div>
        <ul class="links-of-blogroll-list">
            <li class="links-of-blogroll-item">
              <a href="https://cloudolife.cn/" title="https:&#x2F;&#x2F;cloudolife.cn" rel="noopener external nofollow noreferrer" target="_blank">CLoudoLife - Chinese (Simplified)</a>
            </li>
        </ul>
      </div>
    </div>
        <div class="pjax">
        </div>
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://cloudolife.com/2021/12/11/Kubernetes-K8S/Helm/Helm-install-Velero-to-backup-restore-and-migrate-within-Kubernetes-K8S/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CloudoLife">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cloud-oriented Life">
      <meta itemprop="description" content="A Husband and Father, Knowledge Worker, Full-skilled Cloud Engineer">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="[Kubernetes (K8S)] Helm install Velero to backup, restore and migrate within Kubernetes (K8S) | Cloud-oriented Life">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          [Kubernetes (K8S)] Helm install Velero to backup, restore and migrate within Kubernetes (K8S)
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-12-11 00:00:00" itemprop="dateCreated datePublished" datetime="2021-12-11T00:00:00+00:00">2021-12-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2025-06-10 09:49:34" itemprop="dateModified" datetime="2025-06-10T09:49:34+00:00">2025-06-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Cloud-Native/" itemprop="url" rel="index"><span itemprop="name">Cloud Native</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Cloud-Native/Kubernetes-K8S/" itemprop="url" rel="index"><span itemprop="name">Kubernetes (K8S)</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Cloud-Native/Kubernetes-K8S/Helm/" itemprop="url" rel="index"><span itemprop="name">Helm</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">Views: </span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>9.3k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>8 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1>Velero</h1>
<p>Velero is an open source tool to safely backup and restore, perform disaster recovery, and migrate Kubernetes cluster resources and persistent volumes.</p>
<p>This article is about how to use Helm to install Velero on Kubernetes (K8S).</p>
<span id="more"></span>
<p>Velero (formerly Heptio Ark) gives you tools to back up and restore your Kubernetes cluster resources and persistent volumes. You can run Velero with a public cloud platform or on-premises. Velero lets you:</p>
<ul>
<li>
<p>Take backups of your cluster and restore in case of loss.</p>
</li>
<li>
<p>Migrate cluster resources to other clusters.</p>
</li>
<li>
<p>Replicate your production cluster to development and testing clusters.</p>
</li>
</ul>
<p>Velero consists of:</p>
<ul>
<li>
<p>A server that runs on your cluster</p>
</li>
<li>
<p>A command-line client that runs locally</p>
</li>
</ul>
<h2 id="Prerequisites">Prerequisites</h2>
<ul>
<li>
<p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://kubernetes.io/">Kubernetes (K8S)</a></p>
<p>Kubernetes (K8s) is an open-source system for automating deployment, scaling, and management of containerized applications.</p>
<p>For more information about installing and using Kubernetes (K8s), see the <a target="_blank" rel="noopener external nofollow noreferrer" href="https://kubernetes.io/docs/home/">Kubernetes (K8s) Docs</a>.</p>
</li>
<li>
<p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://helm.sh/">Helm</a></p>
<p>Helm is the best way to find, share, and use software built for Kubernetes.</p>
  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Mac OS X</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">brew install helm</span></span><br></pre></td></tr></table></figure>
<p>For more information about installing and using Helm, see the <a target="_blank" rel="noopener external nofollow noreferrer" href="https://helm.sh/docs/">Helm Docs</a>.</p>
</li>
<li>
<p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://aws.amazon.com/s3/">Amazon S3 Bucket</a></p>
<p>Amazon Simple Storage Service (Amazon S3) is an object storage service offering industry-leading scalability, data availability, security, and performance.</p>
<p>See <a target="_blank" rel="noopener external nofollow noreferrer" href="https://aws.amazon.com/s3/"> - https://aws.amazon.com/s3/</a> to learn more.</p>
</li>
</ul>
<h2 id="Usages">Usages</h2>
<h3 id="values-yaml">values.yaml</h3>
<p>Edit <a href="./values.yaml">values.yaml</a> and replace content within <code>&#123;&#123; &#125;&#125;</code> or <code>&lt; &gt;</code>.</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># values.yaml</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># helm-charts/values.yaml at main · vmware-tanzu/helm-charts</span></span><br><span class="line"><span class="comment"># https://github.com/vmware-tanzu/helm-charts/blob/main/charts/velero/values.yaml</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Init containers to add to the Velero deployment&#x27;s pod spec. At least one plugin provider image is required.</span></span><br><span class="line"><span class="comment"># If the value is a string then it is evaluated as a template.</span></span><br><span class="line"><span class="attr">initContainers:</span></span><br><span class="line">  <span class="comment"># - name: velero-plugin-for-csi</span></span><br><span class="line">  <span class="comment">#   image: velero/velero-plugin-for-csi:v0.2.0</span></span><br><span class="line">  <span class="comment">#   imagePullPolicy: IfNotPresent</span></span><br><span class="line">  <span class="comment">#   volumeMounts:</span></span><br><span class="line">  <span class="comment">#     - mountPath: /target</span></span><br><span class="line">  <span class="comment">#       name: plugins</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">velero-plugin-for-aws</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">velero/velero-plugin-for-aws:v1.3.0</span></span><br><span class="line">    <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span></span><br><span class="line">    <span class="attr">volumeMounts:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">mountPath:</span> <span class="string">/target</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">plugins</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># This job is meant primarily for cleaning up CRDs on CI systems.</span></span><br><span class="line"><span class="comment"># Using this on production systems, especially those that have multiple releases of Velero, will be destructive.</span></span><br><span class="line"><span class="attr">cleanUpCRDs:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## Parameters for the `default` BackupStorageLocation and VolumeSnapshotLocation,</span></span><br><span class="line"><span class="comment">## and additional server settings.</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="attr">configuration:</span></span><br><span class="line">  <span class="comment"># Cloud provider being used (e.g. aws, azure, gcp).</span></span><br><span class="line">  <span class="attr">provider:</span> <span class="string">aws</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Parameters for the `default` BackupStorageLocation. See</span></span><br><span class="line">  <span class="comment"># https://velero.io/docs/v1.6/api-types/backupstoragelocation/</span></span><br><span class="line">  <span class="attr">backupStorageLocation:</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># bucket is the name of the bucket to store backups in. Required.</span></span><br><span class="line">    <span class="attr">bucket:</span> <span class="string">backups</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># prefix is the directory under which all Velero data should be stored within the bucket. Optional.</span></span><br><span class="line">    <span class="attr">prefix:</span> <span class="string">default</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Additional provider-specific configuration. See link above</span></span><br><span class="line">    <span class="comment"># for details of required/optional fields for your provider.</span></span><br><span class="line">    <span class="attr">config:</span></span><br><span class="line">      <span class="attr">region:</span> &#123;&#123; <span class="string">.Values.region</span> &#125;&#125;</span><br><span class="line">      <span class="attr">s3Url:</span> &#123;&#123; <span class="string">.Values.s3Url</span> &#125;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"># Parameters for the `default` VolumeSnapshotLocation. See</span></span><br><span class="line">  <span class="comment"># https://velero.io/docs/v1.6/api-types/volumesnapshotlocation/</span></span><br><span class="line">  <span class="attr">volumeSnapshotLocation:</span></span><br><span class="line">    <span class="comment"># name is the name of the volume snapshot location where snapshots are being taken. Required.</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">snapshots</span></span><br><span class="line">    <span class="comment"># provider is the name for the volume snapshot provider. If omitted</span></span><br><span class="line">    <span class="comment"># `configuration.provider` will be used instead.</span></span><br><span class="line">    <span class="attr">provider:</span> <span class="string">aws</span></span><br><span class="line">    <span class="comment"># Additional provider-specific configuration. See link above</span></span><br><span class="line">    <span class="comment"># for details of required/optional fields for your provider.</span></span><br><span class="line">    <span class="attr">config:</span></span><br><span class="line">      <span class="attr">region:</span> &#123;&#123; <span class="string">.Values.region</span> &#125;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"># Set true for backup all pod volumes without having to apply annotation on the pod when used restic Default: false. Other option: false.</span></span><br><span class="line">  <span class="attr">defaultVolumesToRestic:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Info about the secret to be used by the Velero deployment, which</span></span><br><span class="line"><span class="comment"># should contain credentials for the cloud provider IAM account you&#x27;ve</span></span><br><span class="line"><span class="comment"># set up for Velero.</span></span><br><span class="line"><span class="attr">credentials:</span></span><br><span class="line">  <span class="comment"># Whether a secret should be used as the source of IAM account</span></span><br><span class="line">  <span class="comment"># credentials. Set to false if, for example, using kube2iam or</span></span><br><span class="line">  <span class="comment"># kiam to provide IAM credentials for the Velero pod.</span></span><br><span class="line">  <span class="attr">useSecret:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Name of the secret to create if `useSecret` is true and `existingSecret` is empty</span></span><br><span class="line">  <span class="attr">name:</span></span><br><span class="line">  <span class="comment"># Name of a pre-existing secret (if any) in the Velero namespace</span></span><br><span class="line">  <span class="comment"># that should be used to get IAM account credentials. Optional.</span></span><br><span class="line">  <span class="attr">existingSecret:</span></span><br><span class="line">  <span class="comment"># Data to be stored in the Velero secret, if `useSecret` is true and `existingSecret` is empty.</span></span><br><span class="line">  <span class="comment"># As of the current Velero release, Velero only uses one secret key/value at a time.</span></span><br><span class="line">  <span class="comment"># The key must be named `cloud`, and the value corresponds to the entire content of your IAM credentials file.</span></span><br><span class="line">  <span class="comment"># Note that the format will be different for different providers, please check their documentation.</span></span><br><span class="line">  <span class="comment"># Here is a list of documentation for plugins maintained by the Velero team:</span></span><br><span class="line">  <span class="comment"># [AWS] https://github.com/vmware-tanzu/velero-plugin-for-aws/blob/main/README.md</span></span><br><span class="line">  <span class="comment"># [GCP] https://github.com/vmware-tanzu/velero-plugin-for-gcp/blob/main/README.md</span></span><br><span class="line">  <span class="comment"># [Azure] https://github.com/vmware-tanzu/velero-plugin-for-microsoft-azure/blob/main/README.md</span></span><br><span class="line">  <span class="attr">secretContents:</span></span><br><span class="line">  <span class="comment">#  cloud: |</span></span><br><span class="line">  <span class="comment">#    [default]</span></span><br><span class="line">  <span class="comment">#    aws_access_key_id=&lt;REDACTED&gt;</span></span><br><span class="line">  <span class="comment">#    aws_secret_access_key=&lt;REDACTED&gt;</span></span><br><span class="line">  <span class="comment"># additional key/value pairs to be used as environment variables such as &quot;DIGITALOCEAN_TOKEN: &lt;your-key&gt;&quot;. Values will be stored in the secret.</span></span><br><span class="line">    <span class="attr">cloud:</span> <span class="string">|</span></span><br><span class="line"><span class="string">      [default]</span></span><br><span class="line"><span class="string">      aws_access_key_id = &lt;Your Cloud Access Key&gt;</span></span><br><span class="line"><span class="string">      aws_secret_access_key = &lt;Your Cloud Access Secret&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="comment"># Whether to deploy the restic daemonset.</span></span><br><span class="line"><span class="attr">deployRestic:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">restic:</span></span><br><span class="line">  <span class="attr">privileged:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h3 id="Install-Release">Install Release</h3>
<p>Helm install Velero into Velero namespace.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">crate namespace:</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl create namespace velero</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Add the vmware-tanzu Helm repository:</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">helm repo add vmware-tanzu https://vmware-tanzu.github.io/helm-charts</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Update your <span class="built_in">local</span> Helm chart repository cache:</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">helm repo update</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">To install Helm chart:</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">helm install velero vmware-tanzu/velero -f values.yaml</span></span><br></pre></td></tr></table></figure>
<p>See pods about velero.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl get pods -n velero</span></span><br><span class="line">NAME                      READY   STATUS    RESTARTS      AGE</span><br><span class="line">restic-c2m2x              1/1     Running   0             8h</span><br><span class="line">restic-tmx6n              1/1     Running   0             8h</span><br><span class="line">restic-zs6lw              1/1     Running   1 (11m ago)   8h</span><br><span class="line">velero-645b5c7c75-4bwlh   1/1     Running   0             8h</span><br></pre></td></tr></table></figure>
<h2 id="Examples">Examples</h2>
<h3 id="Install-Velero-CLI">Install Velero CLI</h3>
<h4 id="Option-1-MacOS-Homebrew">Option 1: MacOS - Homebrew</h4>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">On macOS, you can use Homebrew to install the velero client:</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">brew install velero</span></span><br></pre></td></tr></table></figure>
<h4 id="Option-2-GitHub-release">Option 2: GitHub release</h4>
<ul>
<li>
<ol>
<li>Download the latest release’s tarball for your client platform.</li>
</ol>
</li>
<li>
<ol start="2">
<li>Extract the tarball:</li>
</ol>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">tar -xvf &lt;RELEASE-TARBALL-NAME&gt;.tar.gz</span></span><br></pre></td></tr></table></figure>
<ul>
<li>
<ol start="3">
<li>Move the extracted velero binary to somewhere in your <code>$PATH</code> (<code>/usr/local/bin</code> for most users).</li>
</ol>
</li>
</ul>
<p>See <a target="_blank" rel="noopener external nofollow noreferrer" href="https://velero.io/docs/v1.7/basic-install/#install-the-cli">Install the CLI Velero Docs - Basic Install - https://velero.io/docs/v1.7/basic-install/#install-the-cli</a> to learn more.</p>
<h3 id="Deploy-examples-nginx-app-with-pv">Deploy examples/nginx-app/with-pv</h3>
<p>First, deploy <code>nginx-app</code> into namespace <code>nginx-example</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl apply -f examples/nginx-app/with-pv.yaml</span></span><br></pre></td></tr></table></figure>
<h3 id="Run-backup">Run backup</h3>
<h4 id="Option-1-Create-backup-via-yaml">Option 1 Create backup via yaml</h4>
<p>Here is a sample Backup object with each of the fields documented <code>manifests/Backup-nginx-example.yaml</code>.</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># manifests/Backup-nginx-example.yaml</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Standard Kubernetes API Version declaration. Required.</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">velero.io/v1</span></span><br><span class="line"><span class="comment"># Standard Kubernetes Kind declaration. Required.</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Backup</span></span><br><span class="line"><span class="comment"># Standard Kubernetes metadata. Required.</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="comment"># Backup name. May be any valid Kubernetes object name. Required.</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">nginx-example</span></span><br><span class="line">  <span class="comment"># Backup namespace. Must be the namespace of the Velero server. Required.</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">velero</span></span><br><span class="line"><span class="comment"># Parameters about the backup. Required.</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="comment"># Array of namespaces to include in the backup. If unspecified, all namespaces are included.</span></span><br><span class="line">  <span class="comment"># Optional.</span></span><br><span class="line">  <span class="attr">includedNamespaces:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">nginx-example</span></span><br></pre></td></tr></table></figure>
<p>See <a target="_blank" rel="noopener external nofollow noreferrer" href="https://velero.io/docs/v1.7/api-types/backup/"> - https://velero.io/docs/v1.7/api-types/backup/</a> to learn more.</p>
<p>Apply <code>manifests/Backup-nginx-example.yaml</code> manifest file.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl apply -f manifests/Backup-nginx-example.yaml</span></span><br></pre></td></tr></table></figure>
<h4 id="Option-2-Create-backup-via-Velero-CLI">Option 2 Create backup via Velero CLI</h4>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">velero backup create nginx-backup --include-namespaces nginx-example</span></span><br></pre></td></tr></table></figure>
<h3 id="Check-Velero-backup-status">Check Velero backup status</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">velero backup get nginx-example</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">velero backup describe nginx-example --details</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">velero backup logs nginx-example</span></span><br></pre></td></tr></table></figure>
<h3 id="Restore">Restore</h3>
<h4 id="Simulate-a-disaster">Simulate a disaster:</h4>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl delete namespaces nginx-example</span></span><br></pre></td></tr></table></figure>
<hr>
<p>Before continuing to the next step, check your cloud provider to confirm that the disk no longer exists.</p>
<hr>
<h4 id="Restore-your-lost-resources">Restore your lost resources:</h4>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">velero restore create --from-backup nginx-backup</span><br></pre></td></tr></table></figure>
<p>All resources of nginx-backup will restore.</p>
<h2 id="FAQs">FAQs</h2>
<h3 id="unable-to-locate-ObjectStore-plugin-named-velero-io-aws">unable to locate ObjectStore plugin named <a target="_blank" rel="noopener external nofollow noreferrer" href="http://velero.io/aws">velero.io/aws</a></h3>
<p>Enable <code>velero-plugin-for-aws</code> for initContainers.</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># values.yaml</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Init containers to add to the Velero deployment&#x27;s pod spec. At least one plugin provider image is required.</span></span><br><span class="line"><span class="comment"># If the value is a string then it is evaluated as a template.</span></span><br><span class="line"><span class="attr">initContainers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">velero-plugin-for-aws</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">velero/velero-plugin-for-aws:v1.3.0</span></span><br><span class="line">    <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span></span><br><span class="line">    <span class="attr">volumeMounts:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">mountPath:</span> <span class="string">/target</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">plugins</span></span><br></pre></td></tr></table></figure>
<h3 id="pod-volume-backup-failed-error-getting-volume-path-on-host">pod volume backup failed: error getting volume path on host</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">time=&quot;2021-12-14T10:14:15Z&quot; level=error msg=&quot;Error backing up item&quot; backup=velero/argo-cd error=&quot;pod volume backup failed: error getting volume path on host: expected one matching path, got 0&quot; error.file=&quot;/go/src/github.com/vmware-tanzu/velero/pkg/restic/backupper.go:184&quot; error.function=&quot;github.com/vmware-tanzu/velero/pkg/restic.(*backupper).BackupPodVolumes&quot; logSource=&quot;pkg/backup/backup.go:435&quot; name=argo-cd-argocd-server-c8f945b59-j7b4c</span><br></pre></td></tr></table></figure>
<p>Velero’s restic daemonset uses a hostPath mount of /var/lib/kubelet/pods to get access to pods’ volume mounts. If a pod is using a hostPath mount, it won’t be mounted under that directory, so Velero isn’t able to access it.</p>
<p>See <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/vmware-tanzu/velero/discussions/3378">[FAQ] Why does Velero/restic not support hostPath volumes? · Discussion #3378 · vmware-tanzu/velero - https://github.com/vmware-tanzu/velero/discussions/3378</a> to learn more.</p>
<h2 id="References">References</h2>
<p>[1] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://vmware-tanzu.github.io/helm-charts/">VMware Tanzu Helm Repository | VMware Tanzu Helm Charts - https://vmware-tanzu.github.io/helm-charts/</a></p>
<p>[2] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://velero.io/">Velero - https://velero.io/</a></p>
<p>[3] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/vmware-tanzu/velero">vmware-tanzu/velero: Backup and migrate Kubernetes applications and their persistent volumes - https://github.com/vmware-tanzu/velero</a></p>
<p>[4] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.pulumi.com/docs/get-started/kubernetes/">Kubernetes Getting Started | Pulumi - https://www.pulumi.com/docs/get-started/kubernetes/</a></p>
<p>[5] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://kubernetes.io/">Kubernetes - https://kubernetes.io/</a></p>
<p>[6] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://helm.sh/">Helm - https://helm.sh/</a></p>
<p>[7] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://aws.amazon.com/s3/">Amazon S3 Bucket - https://aws.amazon.com/s3/</a></p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>Buy me a coffee</div>
  <button>
    Donate
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/bitcoin.png" alt="CloudoLife Bitcoin">
        <span>Bitcoin</span>
      </div>

  </div>
</div>

          <div class="followme">
  <span>Welcome to my other publishing channels</span>

  <div class="social-list">

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://twitter.com/CloudoLife" rel="external nofollow noreferrer">
            <span class="icon">
              <i class="fab fa-twitter"></i>
            </span>

            <span class="label">Twitter</span>
          </a>
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://t.me/CloudoLife" rel="external nofollow noreferrer">
            <span class="icon">
              <i class="fab fa-telegram"></i>
            </span>

            <span class="label">Telegram</span>
          </a>
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="/atom.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">RSS</span>
          </a>
      </div>
  </div>
</div>

          <div class="post-tags">
              <a href="/tags/Kubernetes-K8S/" rel="tag"># Kubernetes (K8S)</a>
              <a href="/tags/Security/" rel="tag"># Security</a>
              <a href="/tags/Cloud-Native/" rel="tag"># Cloud Native</a>
              <a href="/tags/Helm/" rel="tag"># Helm</a>
              <a href="/tags/SRE/" rel="tag"># SRE</a>
              <a href="/tags/Site-Reliability-Engineering/" rel="tag"># Site Reliability Engineering</a>
              <a href="/tags/Site-Reliability-Engineering-SRE/" rel="tag"># Site Reliability Engineering (SRE)</a>
              <a href="/tags/Velero/" rel="tag"># Velero</a>
              <a href="/tags/Backup/" rel="tag"># Backup</a>
              <a href="/tags/Restore/" rel="tag"># Restore</a>
              <a href="/tags/Migrate/" rel="tag"># Migrate</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2021/12/11/Infrastructure-as-Code-IaC/Pulumi/Helm/Use-Pulumi-kubernetes-K8S-Helm-Chart-to-deploy-Istio/" rel="prev" title="[Infrastructure as Code (IaC) Pulumi] Use Pulumi kubernetes (K8S) Helm Chart to deploy Istio">
                  <i class="fa fa-angle-left"></i> [Infrastructure as Code (IaC) Pulumi] Use Pulumi kubernetes (K8S) Helm Chart to deploy Istio
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2021/12/18/Cloud-Native/Cloud-Computing/Serverless/Knative/Docs/serving/Autoscaling/Supported-Autoscaler-types/" rel="next" title="[Serverless Knative] Knative Docs - Supported Autoscaler types">
                  [Serverless Knative] Knative Docs - Supported Autoscaler types <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments gitalk-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">CloudoLife</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="Word count total">2.6m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">39:58</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener external nofollow noreferrer" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener external nofollow noreferrer" target="_blank">NexT.Pisces</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"CloudoLife","repo":"col-hexo-CloudoLife.github.io","client_id":"4ca3ae8fb3a49237db9a","client_secret":"98d6652508799ef4350ab05aabe855e58f549112","admin_user":"benjamincloudolife","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":null,"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.min.js","integrity":"sha256-MVK9MGD/XJaGyIghSVrONSnoXoGh3IFxLw0zfvzpxR4="},"path_md5":"9a0c4966cf7a9b01526f7e6f337248c4"}</script>
<script src="/js/third-party/comments/gitalk.js" defer></script>

</body>
</html>
