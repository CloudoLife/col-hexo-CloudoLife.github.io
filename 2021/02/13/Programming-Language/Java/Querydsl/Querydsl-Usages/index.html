<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="sJgro_9-KyRL3EkTM5KW84pQPrg2Fv1KdkibDRBIulE">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"cloudolife.com","root":"/","images":"/images","scheme":"Pisces","darkmode":true,"version":"8.23.1","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"always","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"default","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":null,"activeClass":"gitalk"},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js" defer></script>

    <meta name="description" content="Querydsl JPA CRUD Usages Querydsl defines a general statically typed syntax for querying on top of persisted domain model data. JDO and JPA are the primary integration technologies for Querydsl. This">
<meta property="og:type" content="article">
<meta property="og:title" content="[Querydsl] Querydsl JPA CRUD Usages">
<meta property="og:url" content="https://cloudolife.com/2021/02/13/Programming-Language/Java/Querydsl/Querydsl-Usages/index.html">
<meta property="og:site_name" content="Cloud-oriented Life">
<meta property="og:description" content="Querydsl JPA CRUD Usages Querydsl defines a general statically typed syntax for querying on top of persisted domain model data. JDO and JPA are the primary integration technologies for Querydsl. This">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-02-13T00:00:00.000Z">
<meta property="article:modified_time" content="2025-06-10T09:49:34.930Z">
<meta property="article:author" content="CloudoLife">
<meta property="article:tag" content="Best Practices">
<meta property="article:tag" content="Programming Language">
<meta property="article:tag" content="Java Persistence API (JPA)">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="Spring Boot">
<meta property="article:tag" content="Querydsl">
<meta property="article:tag" content="Object-relational Mapping (ORM)">
<meta property="article:tag" content="Type-safe Database Query">
<meta property="article:tag" content="Structured Query Language (SQL)">
<meta property="article:tag" content="Spring JDBC">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://cloudolife.com/2021/02/13/Programming-Language/Java/Querydsl/Querydsl-Usages/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://cloudolife.com/2021/02/13/Programming-Language/Java/Querydsl/Querydsl-Usages/","path":"2021/02/13/Programming-Language/Java/Querydsl/Querydsl-Usages/","title":"[Querydsl] Querydsl JPA CRUD Usages"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>[Querydsl] Querydsl JPA CRUD Usages | Cloud-oriented Life</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-8Y9QPJWXQN"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-8Y9QPJWXQN","only_pageview":false,"measure_protocol_api_secret":null}</script>
  <script src="/js/third-party/analytics/google-analytics.js" defer></script>

  <script src="/js/third-party/analytics/baidu-analytics.js" defer></script>
  <script async src="https://hm.baidu.com/hm.js?995d7016a56cfd5c2ef6f2e6640a670e"></script>







  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script><script src="/js/bookmark.js" defer></script><script src="/js/pjax.js" defer></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous" defer></script>
<script src="/js/third-party/search/local-search.js" defer></script>

  <script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.3.1/pdfobject.min.js","integrity":"sha256-jI72I8ZLVflVOisZIOaLvRew3tyvzeu6aZXFm7P7dEo="},"url":"/lib/pdf/web/viewer.html"}</script>
  <script src="/js/third-party/tags/pdf.js" defer></script>






  
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>






<script data-ad-client="ca-pub-8693122033969144" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="Cloud-oriented Life" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Cloud-oriented Life</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Cloud Native Technology Improves Lives</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">1646</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">331</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">584</span></a></li><li class="menu-item menu-item-ansible"><a href="/tags/Ansible/" rel="section"><i class="fa fa-book fa-fw"></i>Ansible</a></li><li class="menu-item menu-item-awesome-software"><a href="/tags/Awesome-Software/" rel="section"><i class="fa fa-book fa-fw"></i>Awesome Software</a></li><li class="menu-item menu-item-golang-(go)"><a href="/tags/Golang-Go/" rel="section"><i class="fa fa-book fa-fw"></i>Golang (Go)</a></li><li class="menu-item menu-item-helm"><a href="/tags/Helm/" rel="section"><i class="fa fa-book fa-fw"></i>Helm</a></li><li class="menu-item menu-item-java"><a href="/tags/Java/" rel="section"><i class="fa fa-book fa-fw"></i>Java</a></li><li class="menu-item menu-item-javascript"><a href="/tags/JavaScript/" rel="section"><i class="fa fa-book fa-fw"></i>JavaScript</a></li><li class="menu-item menu-item-knative"><a href="/tags/Knative/" rel="section"><i class="fa fa-book fa-fw"></i>Knative</a></li><li class="menu-item menu-item-kubernetes-(k8s)"><a href="/tags/Kubernetes-K8S/" rel="section"><i class="fa fa-book fa-fw"></i>Kubernetes (K8S)</a></li><li class="menu-item menu-item-macos"><a href="/tags/macOS/" rel="section"><i class="fa fa-book fa-fw"></i>macOS</a></li><li class="menu-item menu-item-python"><a href="/tags/Python/" rel="section"><i class="fa fa-book fa-fw"></i>Python</a></li><li class="menu-item menu-item-pulumi"><a href="/tags/Pulumi/" rel="section"><i class="fa fa-book fa-fw"></i>Pulumi</a></li><li class="menu-item menu-item-react"><a href="/tags/React/" rel="section"><i class="fa fa-book fa-fw"></i>React</a></li><li class="menu-item menu-item-ruby"><a href="/tags/Ruby/" rel="section"><i class="fa fa-book fa-fw"></i>Ruby</a></li><li class="menu-item menu-item-ruby-on-rails"><a href="/tags/Ruby-on-Rails-RoR/" rel="section"><i class="fa fa-book fa-fw"></i>Ruby On Rails</a></li><li class="menu-item menu-item-rust"><a href="/tags/Rust/" rel="section"><i class="fa fa-book fa-fw"></i>Rust</a></li><li class="menu-item menu-item-serverless"><a href="/tags/Serverless/" rel="section"><i class="fa fa-book fa-fw"></i>Serverless</a></li><li class="menu-item menu-item-service-mesh"><a href="/tags/Service-Mesh/" rel="section"><i class="fa fa-book fa-fw"></i>Service Mesh</a></li><li class="menu-item menu-item-svelte"><a href="/tags/Svelte/" rel="section"><i class="fa fa-book fa-fw"></i>Svelte</a></li><li class="menu-item menu-item-taro"><a href="/tags/Taro/" rel="section"><i class="fa fa-book fa-fw"></i>Taro</a></li><li class="menu-item menu-item-terraform"><a href="/tags/Terraform/" rel="section"><i class="fa fa-book fa-fw"></i>Terraform</a></li><li class="menu-item menu-item-typescript"><a href="/tags/TypeScript/" rel="section"><i class="fa fa-book fa-fw"></i>TypeScript</a></li><li class="menu-item menu-item-about"><a href="/about-us/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a></li><li class="menu-item menu-item-rss"><a href="/atom.xml" rel="section"><i class="fa fa-rss fa-fw"></i>RSS</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="Searching..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number">1.</span> <span class="nav-text">Querydsl JPA CRUD Usages</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Model-and-Query-Type"><span class="nav-number">1.1.</span> <span class="nav-text">Model and Query Type</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Read-Querying"><span class="nav-number">1.2.</span> <span class="nav-text">Read, Querying</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Using-joins"><span class="nav-number">1.2.1.</span> <span class="nav-text">Using joins</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#General-usage"><span class="nav-number">1.2.2.</span> <span class="nav-text">General usage</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Ordering"><span class="nav-number">1.2.3.</span> <span class="nav-text">Ordering</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Grouping"><span class="nav-number">1.2.4.</span> <span class="nav-text">Grouping</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Update-and-Save"><span class="nav-number">1.2.5.</span> <span class="nav-text">Update and Save</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Update-clauses"><span class="nav-number">1.2.5.1.</span> <span class="nav-text">Update clauses</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Subqueries"><span class="nav-number">1.2.6.</span> <span class="nav-text">Subqueries</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Exposing-the-original-query"><span class="nav-number">1.2.7.</span> <span class="nav-text">Exposing the original query</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Using-Native-SQL-in-JPA-queries"><span class="nav-number">1.2.8.</span> <span class="nav-text">Using Native SQL in JPA queries</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#References"><span class="nav-number">1.3.</span> <span class="nav-text">References</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">CloudoLife</p>
  <div class="site-description" itemprop="description">A Husband and Father, Knowledge Worker, Full-skilled Cloud Engineer</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">584</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">331</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">1646</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/CloudoLife" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;CloudoLife" rel="noopener me external nofollow noreferrer" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/CloudoLife" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;CloudoLife" rel="noopener me external nofollow noreferrer" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
    <div class="sidebar-inner sidebar-blogroll">
      <div class="links-of-blogroll animated">
        <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
          Links
        </div>
        <ul class="links-of-blogroll-list">
            <li class="links-of-blogroll-item">
              <a href="https://cloudolife.cn/" title="https:&#x2F;&#x2F;cloudolife.cn" rel="noopener external nofollow noreferrer" target="_blank">CLoudoLife - Chinese (Simplified)</a>
            </li>
        </ul>
      </div>
    </div>
        <div class="pjax">
        </div>
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://cloudolife.com/2021/02/13/Programming-Language/Java/Querydsl/Querydsl-Usages/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CloudoLife">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cloud-oriented Life">
      <meta itemprop="description" content="A Husband and Father, Knowledge Worker, Full-skilled Cloud Engineer">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="[Querydsl] Querydsl JPA CRUD Usages | Cloud-oriented Life">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          [Querydsl] Querydsl JPA CRUD Usages
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-02-13 00:00:00" itemprop="dateCreated datePublished" datetime="2021-02-13T00:00:00+00:00">2021-02-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2025-06-10 09:49:34" itemprop="dateModified" datetime="2025-06-10T09:49:34+00:00">2025-06-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming-Language/" itemprop="url" rel="index"><span itemprop="name">Programming Language</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming-Language/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming-Language/Java/Querydsl/" itemprop="url" rel="index"><span itemprop="name">Querydsl</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">Views: </span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>11k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>10 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1>Querydsl JPA CRUD Usages</h1>
<p>Querydsl defines a general statically typed syntax for querying on top of persisted domain model data. JDO and JPA are the primary integration technologies for Querydsl. This guide describes how to use Querydsl in combination with JPA.</p>
<span id="more"></span>
<p>Querydsl for JPA is an alternative to both JPQL and Criteria queries. It combines the dynamic nature of Criteria queries with the expressiveness of JPQL and all that in a fully typesafe manner.</p>
<h2 id="Model-and-Query-Type">Model and Query Type</h2>
<p>Let’s assume that your project has the following domain type:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.persistence.Entity;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Customer</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String firstName;</span><br><span class="line">    <span class="keyword">private</span> String lastName;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getFirstName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> firstName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getLastName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> lastName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFirstName</span><span class="params">(String fn)</span> &#123;</span><br><span class="line">        firstName = fn;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setLastName</span><span class="params">(String ln)</span> &#123;</span><br><span class="line">        lastName = ln;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Querydsl will generate a query type with the simple name <code>QCustomer</code> into the same package as <code>Customer</code>. <code>QCustomer</code> can be used as a statically typed variable in Querydsl queries as a representative for the <code>Customer</code> type.</p>
<p><code>QCustomer</code> has a default instance variable which can be accessed as a static field:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> com.querydsl.core.types.PathMetadataFactory.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.querydsl.core.types.dsl.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.querydsl.core.types.PathMetadata;</span><br><span class="line"><span class="keyword">import</span> javax.annotation.Generated;</span><br><span class="line"><span class="keyword">import</span> com.querydsl.core.types.Path;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * QAgreement is a Querydsl query type for Agreement</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Generated(&quot;com.querydsl.codegen.EntitySerializer&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">QAgreement</span> <span class="keyword">extends</span> <span class="title class_">EntityPathBase</span>&lt;Agreement&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1026402638L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">QAgreement</span> <span class="variable">agreement</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">QAgreement</span>(<span class="string">&quot;agreement&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">QBase</span> <span class="variable">_super</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">QBase</span>(<span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">StringPath</span> <span class="variable">firstName</span> <span class="operator">=</span> createString(<span class="string">&quot;firstName&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//inherited</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> DateTimePath&lt;java.util.Date&gt; createdAt = _super.createdAt;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> ComparablePath&lt;java.util.UUID&gt; id = createComparable(<span class="string">&quot;id&quot;</span>, java.util.UUID.class);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">StringPath</span> <span class="variable">lastName</span> <span class="operator">=</span> createString(<span class="string">&quot;lastName&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//inherited</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> DateTimePath&lt;java.util.Date&gt; updatedAt = _super.updatedAt;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">QAgreement</span><span class="params">(String variable)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(Agreement.class, forVariable(variable));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">QAgreement</span><span class="params">(Path&lt;? extends Agreement&gt; path)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(path.getType(), path.getMetadata());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">QAgreement</span><span class="params">(PathMetadata metadata)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(Agreement.class, metadata);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Use query type:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">QCustomer</span> <span class="variable">customer</span> <span class="operator">=</span> QCustomer.customer;</span><br></pre></td></tr></table></figure>
<p>Alternatively you can define your own <code>Customer</code> variables like this:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">QCustomer</span> <span class="variable">customer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">QCustomer</span>(<span class="string">&quot;myCustomer&quot;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="Read-Querying">Read, Querying</h2>
<p>The Querydsl JPA module supports both the JPA and the Hibernate API.</p>
<p>To use the JPA API you use JPAQuery instances for your queries like this:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// where entityManager is a JPA EntityManager</span></span><br><span class="line">JPAQuery&lt;?&gt; query = <span class="keyword">new</span> <span class="title class_">JPAQuery</span>&lt;Void&gt;(entityManager);</span><br></pre></td></tr></table></figure>
<p>If you are using the Hibernate API instead, you can instantiate a HibernateQuery like this:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// where session is a Hibernate session</span></span><br><span class="line">HibernateQuery&lt;?&gt; query = <span class="keyword">new</span> <span class="title class_">HibernateQuery</span>&lt;Void&gt;(session);</span><br></pre></td></tr></table></figure>
<p>Both <code>JPAQuery</code> and <code>HibernateQuery</code> implement the <code>JPQLQuery</code> interface.</p>
<p>For the examples of this chapter the queries are created via a <code>JPAQueryFactory</code> instance. <code>JPAQueryFactory</code> should be the preferred option to obtain <code>JPAQuery</code> instances.</p>
<p>For the Hibernate API <code>HibernateQueryFactory</code> can be used</p>
<p>To retrieve the customer with the first name Bob you would construct a query like this:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">QCustomer</span> <span class="variable">customer</span> <span class="operator">=</span> QCustomer.customer;</span><br><span class="line"><span class="type">Customer</span> <span class="variable">bob</span> <span class="operator">=</span> queryFactory.selectFrom(customer)</span><br><span class="line">  .where(customer.firstName.eq(<span class="string">&quot;Bob&quot;</span>))</span><br><span class="line">  .fetchOne();</span><br></pre></td></tr></table></figure>
<p>The <code>selectFrom</code> call defines the query source and projection, the where part defines the <code>filter</code> and <code>fetchOne </code>tells Querydsl to return a single element. Easy, right?</p>
<p>To create a query with multiple sources you use the query like this:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">QCustomer</span> <span class="variable">customer</span> <span class="operator">=</span> QCustomer.customer;</span><br><span class="line"><span class="type">QCompany</span> <span class="variable">company</span> <span class="operator">=</span> QCompany.company;</span><br><span class="line">query.from(customer, company);</span><br></pre></td></tr></table></figure>
<p>And to use multiple filters use it like this</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">queryFactory.selectFrom(customer)</span><br><span class="line">    .where(customer.firstName.eq(<span class="string">&quot;Bob&quot;</span>), customer.lastName.eq(<span class="string">&quot;Wilson&quot;</span>));</span><br></pre></td></tr></table></figure>
<p>Or like this</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">queryFactory.selectFrom(customer)</span><br><span class="line">    .where(customer.firstName.eq(<span class="string">&quot;Bob&quot;</span>).and(customer.lastName.eq(<span class="string">&quot;Wilson&quot;</span>)));</span><br></pre></td></tr></table></figure>
<p>In native JPQL form the query would be written like this:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> customer <span class="keyword">from</span> Customer <span class="keyword">as</span> customer</span><br><span class="line"><span class="keyword">where</span> customer.firstName <span class="operator">=</span> &quot;Bob&quot; <span class="keyword">and</span> customer.lastName <span class="operator">=</span> &quot;Wilson&quot;</span><br></pre></td></tr></table></figure>
<p>If you want to combine the filters via “or” then use the following pattern</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">queryFactory.selectFrom(customer)</span><br><span class="line">    .where(customer.firstName.eq(<span class="string">&quot;Bob&quot;</span>).or(customer.lastName.eq(<span class="string">&quot;Wilson&quot;</span>)));</span><br></pre></td></tr></table></figure>
<h3 id="Using-joins">Using joins</h3>
<p>Querydsl supports the following join variants in JPQL: <code>inner join</code>, <code>join</code>, <code>left join</code> and <code>right join</code>. Join usage is typesafe, and follows the following pattern:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">QCat</span> <span class="variable">cat</span> <span class="operator">=</span> QCat.cat;</span><br><span class="line"><span class="type">QCat</span> <span class="variable">mate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">QCat</span>(<span class="string">&quot;mate&quot;</span>);</span><br><span class="line"><span class="type">QCat</span> <span class="variable">kitten</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">QCat</span>(<span class="string">&quot;kitten&quot;</span>);</span><br><span class="line">queryFactory.selectFrom(cat)</span><br><span class="line">    .innerJoin(cat.mate, mate)</span><br><span class="line">    .leftJoin(cat.kittens, kitten)</span><br><span class="line">    .fetch();</span><br></pre></td></tr></table></figure>
<p>The native JPQL version of the query would be</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> cat <span class="keyword">from</span> Cat <span class="keyword">as</span> cat</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> cat.mate <span class="keyword">as</span> mate</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> cat.kittens <span class="keyword">as</span> kitten</span><br></pre></td></tr></table></figure>
<p>Another example</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">queryFactory.selectFrom(cat)</span><br><span class="line">    .leftJoin(cat.kittens, kitten)</span><br><span class="line">    .on(kitten.bodyWeight.gt(<span class="number">10.0</span>))</span><br><span class="line">    .fetch();</span><br></pre></td></tr></table></figure>
<p>With the following JPQL version</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select cat from Cat as cat</span><br><span class="line">left join cat.kittens as kitten</span><br><span class="line">on kitten.bodyWeight &gt; <span class="number">10.0</span></span><br></pre></td></tr></table></figure>
<h3 id="General-usage">General usage</h3>
<p>Use the the cascading methods of the <code>JPQLQuery</code> interface like this</p>
<ul>
<li>
<p>select: Set the projection of the query. (Not necessary if created via query factory)</p>
</li>
<li>
<p>from: Add the query sources here.</p>
</li>
<li>
<p>innerJoin, join, leftJoin, rightJoin, on: Add join elements using these constructs. For the join methods the first argument is the join source and the second the target (alias).</p>
</li>
<li>
<p>where: Add query filters, either in varargs form separated via commas or cascaded via the and-operator.</p>
</li>
<li>
<p>groupBy: Add group by arguments in varargs form.</p>
</li>
<li>
<p>having: Add having filters of the “group by” grouping as an varags array of Predicate expressions.</p>
</li>
<li>
<p>orderBy: Add ordering of the result as an varargs array of order expressions. Use asc() and desc() on numeric, string and other comparable expression to access the OrderSpecifier instances.</p>
</li>
<li>
<p>limit, offset, restrict: Set the paging of the result. Limit for max results, offset for skipping rows and restrict for defining both in one call.</p>
</li>
</ul>
<h3 id="Ordering">Ordering</h3>
<p>The syntax for declaring ordering is</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">QCustomer</span> <span class="variable">customer</span> <span class="operator">=</span> QCustomer.customer;</span><br><span class="line">queryFactory.selectFrom(customer)</span><br><span class="line">    .orderBy(customer.lastName.asc(), customer.firstName.desc())</span><br><span class="line">    .fetch();</span><br></pre></td></tr></table></figure>
<p>which is equivalent to the following native JPQL</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> customer </span><br><span class="line"><span class="keyword">from</span> Customer <span class="keyword">as</span> customer</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> customer.lastName <span class="keyword">asc</span>, customer.firstName <span class="keyword">desc</span></span><br></pre></td></tr></table></figure>
<h3 id="Grouping">Grouping</h3>
<p>Grouping can be done in the following form</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">queryFactory.select(customer.lastName).from(customer)</span><br><span class="line">    .groupBy(customer.lastName)</span><br><span class="line">    .fetch();</span><br></pre></td></tr></table></figure>
<hr>
<p>Method <code>groupBy</code> must combine <code>select</code> methods.</p>
<hr>
<p>which is equivalent to the following native JPQL</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> customer.lastName</span><br><span class="line"><span class="keyword">from</span> Customer <span class="keyword">as</span> customer</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> customer.lastName</span><br></pre></td></tr></table></figure>
<h3 id="Update-and-Save">Update and Save</h3>
<h4 id="Update-clauses">Update clauses</h4>
<p>Update clauses in Querydsl JPA follow a simple update-set/where-execute form. Here are some examples:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">QCustomer</span> <span class="variable">customer</span> <span class="operator">=</span> QCustomer.customer;</span><br><span class="line"><span class="comment">// rename customers named Bob to Bobby</span></span><br><span class="line">queryFactory.update(customer).where(customer.name.eq(<span class="string">&quot;Bob&quot;</span>))</span><br><span class="line">    .set(customer.name, <span class="string">&quot;Bobby&quot;</span>)</span><br><span class="line">    .execute();</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> customer </span><br><span class="line"><span class="keyword">set</span> customer.name <span class="operator">=</span> <span class="string">&#x27;Bobby&#x27;</span></span><br><span class="line"><span class="keyword">where</span> customer.name <span class="operator">=</span> <span class="string">&#x27;Bob&#x27;</span></span><br></pre></td></tr></table></figure>
<p>The set invocations define the property updates in SQL-Update-style and the execute call performs the Update and returns the amount of updated entities.</p>
<p>DML clauses in JPA don’t take JPA level cascade rules into account and don’t provide fine-grained second level cache interaction.</p>
<h3 id="Subqueries">Subqueries</h3>
<p>To create a subquery you use the static factory methods of <code>JPAExpressions</code> and define the query parameters via <code>from</code>, where etc.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">QDepartment</span> <span class="variable">department</span> <span class="operator">=</span> QDepartment.department;</span><br><span class="line"><span class="type">QDepartment</span> <span class="variable">d</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">QDepartment</span>(<span class="string">&quot;d&quot;</span>);</span><br><span class="line">queryFactory.selectFrom(department)</span><br><span class="line">    .where(department.size.eq(</span><br><span class="line">        JPAExpressions.select(d.size.max()).from(d)))</span><br><span class="line">     .fetch();</span><br></pre></td></tr></table></figure>
<p>Another example</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">QEmployee</span> <span class="variable">employee</span> <span class="operator">=</span> QEmployee.employee;</span><br><span class="line"><span class="type">QEmployee</span> <span class="variable">e</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">QEmployee</span>(<span class="string">&quot;e&quot;</span>);</span><br><span class="line">queryFactory.selectFrom(employee)</span><br><span class="line">    .where(employee.weeklyhours.gt(</span><br><span class="line">        JPAExpressions.select(e.weeklyhours.avg())</span><br><span class="line">            .from(employee.department.employees, e)</span><br><span class="line">            .where(e.manager.eq(employee.manager))))</span><br><span class="line">    .fetch();</span><br></pre></td></tr></table></figure>
<h3 id="Exposing-the-original-query">Exposing the original query</h3>
<p>If you need to tune the original Query before the execution of the query you can expose it like this:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Query</span> <span class="variable">jpaQuery</span> <span class="operator">=</span> queryFactory.selectFrom(employee).createQuery();</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="type">List</span> <span class="variable">results</span> <span class="operator">=</span> jpaQuery.getResultList();</span><br></pre></td></tr></table></figure>
<h3 id="Using-Native-SQL-in-JPA-queries">Using Native SQL in JPA queries</h3>
<p>Querydsl supports Native SQL in JPA via the <code>JPASQLQuery</code> class.</p>
<p>To use it, you must generate Querydsl query types for your SQL schema. This can be done for example with the following Maven configuration:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">      ...</span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.querydsl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>querydsl-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;querydsl.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">goal</span>&gt;</span>export<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">jdbcDriver</span>&gt;</span>org.apache.derby.jdbc.EmbeddedDriver<span class="tag">&lt;/<span class="name">jdbcDriver</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">jdbcUrl</span>&gt;</span>jdbc:derby:target/demoDB;create=true<span class="tag">&lt;/<span class="name">jdbcUrl</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">packageName</span>&gt;</span>com.mycompany.mydomain<span class="tag">&lt;/<span class="name">packageName</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">targetFolder</span>&gt;</span>$&#123;project.basedir&#125;/target/generated-sources/java<span class="tag">&lt;/<span class="name">targetFolder</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.derby<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>derby<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;derby.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">      ...</span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>When the query types have successfully been generated into the location of your choice, you can use them in your queries.</p>
<p>Single column query:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// serialization templates</span></span><br><span class="line"><span class="type">SQLTemplates</span> <span class="variable">templates</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DerbyTemplates</span>();</span><br><span class="line"><span class="comment">// query types (S* for SQL, Q* for domain types)</span></span><br><span class="line"><span class="type">SAnimal</span> <span class="variable">cat</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SAnimal</span>(<span class="string">&quot;cat&quot;</span>);</span><br><span class="line"><span class="type">SAnimal</span> <span class="variable">mate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SAnimal</span>(<span class="string">&quot;mate&quot;</span>);</span><br><span class="line"><span class="type">QCat</span> <span class="variable">catEntity</span> <span class="operator">=</span> QCat.cat;</span><br><span class="line"></span><br><span class="line">JPASQLQuery&lt;?&gt; query = <span class="keyword">new</span> <span class="title class_">JPASQLQuery</span>&lt;Void&gt;(entityManager, templates);</span><br><span class="line">List&lt;String&gt; names = query.select(cat.name).from(cat).fetch();</span><br></pre></td></tr></table></figure>
<p>If you mix entity (e.g. QCat) and table (e.g. SAnimal) references in your query you need to make sure that they use the same variable names. SAnimal.animal has the variable name “animal”, so a new instance (new SAnimal(“cat”)) was used instead.</p>
<p>An alternative pattern could be</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">QCat</span> <span class="variable">catEntity</span> <span class="operator">=</span> QCat.cat;</span><br><span class="line"><span class="type">SAnimal</span> <span class="variable">cat</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SAnimal</span>(catEntity.getMetadata().getName());</span><br></pre></td></tr></table></figure>
<p>Query multiple columns:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">query = <span class="keyword">new</span> <span class="title class_">JPASQLQuery</span>&lt;Void&gt;(entityManager, templates);</span><br><span class="line">List&lt;Tuple&gt; rows = query.select(cat.id, cat.name).from(cat).fetch();</span><br><span class="line">Query all columns:</span><br><span class="line"></span><br><span class="line">List&lt;Tuple&gt; rows = query.select(cat.all()).from(cat).fetch();</span><br></pre></td></tr></table></figure>
<p>Query in SQL, but project as entity:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">query = <span class="keyword">new</span> <span class="title class_">JPASQLQuery</span>&lt;Void&gt;(entityManager, templates);</span><br><span class="line">List&lt;Cat&gt; cats = query.select(catEntity).from(cat).orderBy(cat.name.asc()).fetch();</span><br></pre></td></tr></table></figure>
<p>Query with joins:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">query = <span class="keyword">new</span> <span class="title class_">JPASQLQuery</span>&lt;Void&gt;(entityManager, templates);</span><br><span class="line">cats = query.select(catEntity).from(cat)</span><br><span class="line">    .innerJoin(mate).on(cat.mateId.eq(mate.id))</span><br><span class="line">    .where(cat.dtype.eq(<span class="string">&quot;Cat&quot;</span>), mate.dtype.eq(<span class="string">&quot;Cat&quot;</span>))</span><br><span class="line">    .fetch();</span><br></pre></td></tr></table></figure>
<p>Query and project into DTO:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">query = <span class="keyword">new</span> <span class="title class_">JPASQLQuery</span>&lt;Void&gt;(entityManager, templates);</span><br><span class="line">List&lt;CatDTO&gt; catDTOs = query.select(Projections.constructor(CatDTO.class, cat.id, cat.name))</span><br><span class="line">    .from(cat)</span><br><span class="line">    .orderBy(cat.name.asc())</span><br><span class="line">    .fetch();</span><br></pre></td></tr></table></figure>
<p>If you are using the Hibernate API instead of the JPA API, then use <code>HibernateSQLQuery</code> instead.</p>
<h2 id="References">References</h2>
<p>[1] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://querydsl.com/static/querydsl/latest/reference/html/ch02.html"> - https://querydsl.com/static/querydsl/latest/reference/html/ch02.html</a></p>
<p>[7] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/querydsl/querydsl">querydsl/querydsl: Unified Queries for Java - https://github.com/querydsl/querydsl</a></p>
<p>[8] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://querydsl.com/">Querydsl - Unified Queries for Java - https://querydsl.com/</a></p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>Buy me a coffee</div>
  <button>
    Donate
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/bitcoin.png" alt="CloudoLife Bitcoin">
        <span>Bitcoin</span>
      </div>

  </div>
</div>

          <div class="followme">
  <span>Welcome to my other publishing channels</span>

  <div class="social-list">

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://twitter.com/CloudoLife" rel="external nofollow noreferrer">
            <span class="icon">
              <i class="fab fa-twitter"></i>
            </span>

            <span class="label">Twitter</span>
          </a>
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://t.me/CloudoLife" rel="external nofollow noreferrer">
            <span class="icon">
              <i class="fab fa-telegram"></i>
            </span>

            <span class="label">Telegram</span>
          </a>
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="/atom.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">RSS</span>
          </a>
      </div>
  </div>
</div>

          <div class="post-tags">
              <a href="/tags/Best-Practices/" rel="tag"># Best Practices</a>
              <a href="/tags/Programming-Language/" rel="tag"># Programming Language</a>
              <a href="/tags/Java-Persistence-API-JPA/" rel="tag"># Java Persistence API (JPA)</a>
              <a href="/tags/Java/" rel="tag"># Java</a>
              <a href="/tags/Spring-Boot/" rel="tag"># Spring Boot</a>
              <a href="/tags/Querydsl/" rel="tag"># Querydsl</a>
              <a href="/tags/Object-relational-Mapping-ORM/" rel="tag"># Object-relational Mapping (ORM)</a>
              <a href="/tags/Type-safe-Database-Query/" rel="tag"># Type-safe Database Query</a>
              <a href="/tags/Structured-Query-Language-SQL/" rel="tag"># Structured Query Language (SQL)</a>
              <a href="/tags/Spring-JDBC/" rel="tag"># Spring JDBC</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2021/02/13/Programming-Language/Java/Querydsl/Using-Querydsl-for-Type-safe-Database-Query-in-Java-Spring-Boot/" rel="prev" title="[Querydsl Spring Boot] Using Querydsl for Type-safe Database Query in Java Spring Boot">
                  <i class="fa fa-angle-left"></i> [Querydsl Spring Boot] Using Querydsl for Type-safe Database Query in Java Spring Boot
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2021/02/13/GitHub/Use-GitHub-action-to-publish-Docker-image-to-Docker-Hub-repository/" rel="next" title="Use GitHub action to publishing Docker image to Docker Hub repository">
                  Use GitHub action to publishing Docker image to Docker Hub repository <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments gitalk-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">CloudoLife</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="Word count total">2.6m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">39:58</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener external nofollow noreferrer" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener external nofollow noreferrer" target="_blank">NexT.Pisces</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"CloudoLife","repo":"col-hexo-CloudoLife.github.io","client_id":"4ca3ae8fb3a49237db9a","client_secret":"98d6652508799ef4350ab05aabe855e58f549112","admin_user":"benjamincloudolife","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":null,"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.min.js","integrity":"sha256-MVK9MGD/XJaGyIghSVrONSnoXoGh3IFxLw0zfvzpxR4="},"path_md5":"00ff32b523cd5b2173e4f2279a6bfac0"}</script>
<script src="/js/third-party/comments/gitalk.js" defer></script>

</body>
</html>
