<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="sJgro_9-KyRL3EkTM5KW84pQPrg2Fv1KdkibDRBIulE">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"cloudolife.com","root":"/","images":"/images","scheme":"Pisces","darkmode":true,"version":"8.23.1","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"always","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"default","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":null,"activeClass":"gitalk"},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js" defer></script>

    <meta name="description" content="benchmark-ips An iterations per second enhancement to Benchmark. FEATURES&#x2F;PROBLEMS: benchmark&#x2F;ips - benchmarks a blocks iterations&#x2F;second. For short snippits of code, ips automatically figures out how">
<meta property="og:type" content="article">
<meta property="og:title" content="[Awesome Ruby Gem] Use benchmark-ips gem to benchmark how iterations per second enhancement">
<meta property="og:url" content="https://cloudolife.com/2021/05/29/Programming-Language/Ruby/Awesome-Ruby-Gem/Use-benchmark-ips-gem-to-benchmark-how-iterations-per-second/index.html">
<meta property="og:site_name" content="Cloud-oriented Life">
<meta property="og:description" content="benchmark-ips An iterations per second enhancement to Benchmark. FEATURES&#x2F;PROBLEMS: benchmark&#x2F;ips - benchmarks a blocks iterations&#x2F;second. For short snippits of code, ips automatically figures out how">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-05-29T00:00:00.000Z">
<meta property="article:modified_time" content="2025-06-10T09:49:34.934Z">
<meta property="article:author" content="CloudoLife">
<meta property="article:tag" content="Best Practices">
<meta property="article:tag" content="Ruby">
<meta property="article:tag" content="Programming Language">
<meta property="article:tag" content="Performance Optimization">
<meta property="article:tag" content="Awesome Ruby Gem">
<meta property="article:tag" content="benchmark">
<meta property="article:tag" content="benchmark-ips">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://cloudolife.com/2021/05/29/Programming-Language/Ruby/Awesome-Ruby-Gem/Use-benchmark-ips-gem-to-benchmark-how-iterations-per-second/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://cloudolife.com/2021/05/29/Programming-Language/Ruby/Awesome-Ruby-Gem/Use-benchmark-ips-gem-to-benchmark-how-iterations-per-second/","path":"2021/05/29/Programming-Language/Ruby/Awesome-Ruby-Gem/Use-benchmark-ips-gem-to-benchmark-how-iterations-per-second/","title":"[Awesome Ruby Gem] Use benchmark-ips gem to benchmark how iterations per second enhancement"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>[Awesome Ruby Gem] Use benchmark-ips gem to benchmark how iterations per second enhancement | Cloud-oriented Life</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-8Y9QPJWXQN"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-8Y9QPJWXQN","only_pageview":false,"measure_protocol_api_secret":null}</script>
  <script src="/js/third-party/analytics/google-analytics.js" defer></script>

  <script src="/js/third-party/analytics/baidu-analytics.js" defer></script>
  <script async src="https://hm.baidu.com/hm.js?995d7016a56cfd5c2ef6f2e6640a670e"></script>







  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script><script src="/js/bookmark.js" defer></script><script src="/js/pjax.js" defer></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous" defer></script>
<script src="/js/third-party/search/local-search.js" defer></script>

  <script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.3.1/pdfobject.min.js","integrity":"sha256-jI72I8ZLVflVOisZIOaLvRew3tyvzeu6aZXFm7P7dEo="},"url":"/lib/pdf/web/viewer.html"}</script>
  <script src="/js/third-party/tags/pdf.js" defer></script>






  
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>






<script data-ad-client="ca-pub-8693122033969144" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="Cloud-oriented Life" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Cloud-oriented Life</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Cloud Native Technology Improves Lives</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">1646</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">331</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">584</span></a></li><li class="menu-item menu-item-ansible"><a href="/tags/Ansible/" rel="section"><i class="fa fa-book fa-fw"></i>Ansible</a></li><li class="menu-item menu-item-awesome-software"><a href="/tags/Awesome-Software/" rel="section"><i class="fa fa-book fa-fw"></i>Awesome Software</a></li><li class="menu-item menu-item-golang-(go)"><a href="/tags/Golang-Go/" rel="section"><i class="fa fa-book fa-fw"></i>Golang (Go)</a></li><li class="menu-item menu-item-helm"><a href="/tags/Helm/" rel="section"><i class="fa fa-book fa-fw"></i>Helm</a></li><li class="menu-item menu-item-java"><a href="/tags/Java/" rel="section"><i class="fa fa-book fa-fw"></i>Java</a></li><li class="menu-item menu-item-javascript"><a href="/tags/JavaScript/" rel="section"><i class="fa fa-book fa-fw"></i>JavaScript</a></li><li class="menu-item menu-item-knative"><a href="/tags/Knative/" rel="section"><i class="fa fa-book fa-fw"></i>Knative</a></li><li class="menu-item menu-item-kubernetes-(k8s)"><a href="/tags/Kubernetes-K8S/" rel="section"><i class="fa fa-book fa-fw"></i>Kubernetes (K8S)</a></li><li class="menu-item menu-item-macos"><a href="/tags/macOS/" rel="section"><i class="fa fa-book fa-fw"></i>macOS</a></li><li class="menu-item menu-item-python"><a href="/tags/Python/" rel="section"><i class="fa fa-book fa-fw"></i>Python</a></li><li class="menu-item menu-item-pulumi"><a href="/tags/Pulumi/" rel="section"><i class="fa fa-book fa-fw"></i>Pulumi</a></li><li class="menu-item menu-item-react"><a href="/tags/React/" rel="section"><i class="fa fa-book fa-fw"></i>React</a></li><li class="menu-item menu-item-ruby"><a href="/tags/Ruby/" rel="section"><i class="fa fa-book fa-fw"></i>Ruby</a></li><li class="menu-item menu-item-ruby-on-rails"><a href="/tags/Ruby-on-Rails-RoR/" rel="section"><i class="fa fa-book fa-fw"></i>Ruby On Rails</a></li><li class="menu-item menu-item-rust"><a href="/tags/Rust/" rel="section"><i class="fa fa-book fa-fw"></i>Rust</a></li><li class="menu-item menu-item-serverless"><a href="/tags/Serverless/" rel="section"><i class="fa fa-book fa-fw"></i>Serverless</a></li><li class="menu-item menu-item-service-mesh"><a href="/tags/Service-Mesh/" rel="section"><i class="fa fa-book fa-fw"></i>Service Mesh</a></li><li class="menu-item menu-item-svelte"><a href="/tags/Svelte/" rel="section"><i class="fa fa-book fa-fw"></i>Svelte</a></li><li class="menu-item menu-item-taro"><a href="/tags/Taro/" rel="section"><i class="fa fa-book fa-fw"></i>Taro</a></li><li class="menu-item menu-item-terraform"><a href="/tags/Terraform/" rel="section"><i class="fa fa-book fa-fw"></i>Terraform</a></li><li class="menu-item menu-item-typescript"><a href="/tags/TypeScript/" rel="section"><i class="fa fa-book fa-fw"></i>TypeScript</a></li><li class="menu-item menu-item-about"><a href="/about-us/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a></li><li class="menu-item menu-item-rss"><a href="/atom.xml" rel="section"><i class="fa fa-rss fa-fw"></i>RSS</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="Searching..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number">1.</span> <span class="nav-text">benchmark-ips</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#FEATURES-PROBLEMS"><span class="nav-number">1.1.</span> <span class="nav-text">FEATURES&#x2F;PROBLEMS:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Installation"><span class="nav-number">1.2.</span> <span class="nav-text">Installation</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Usages"><span class="nav-number">1.3.</span> <span class="nav-text">Usages</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#SYNOPSIS"><span class="nav-number">1.3.1.</span> <span class="nav-text">SYNOPSIS:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Custom-Suite"><span class="nav-number">1.3.2.</span> <span class="nav-text">Custom Suite</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Independent-benchmarking"><span class="nav-number">1.3.3.</span> <span class="nav-text">Independent benchmarking</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Multiple-iterations"><span class="nav-number">1.3.4.</span> <span class="nav-text">Multiple iterations</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Online-sharing"><span class="nav-number">1.3.5.</span> <span class="nav-text">Online sharing</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Advanced-Statistics"><span class="nav-number">1.3.6.</span> <span class="nav-text">Advanced Statistics</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#References"><span class="nav-number">1.4.</span> <span class="nav-text">References</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">CloudoLife</p>
  <div class="site-description" itemprop="description">A Husband and Father, Knowledge Worker, Full-skilled Cloud Engineer</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">584</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">331</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">1646</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/CloudoLife" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;CloudoLife" rel="noopener me external nofollow noreferrer" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/CloudoLife" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;CloudoLife" rel="noopener me external nofollow noreferrer" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
    <div class="sidebar-inner sidebar-blogroll">
      <div class="links-of-blogroll animated">
        <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
          Links
        </div>
        <ul class="links-of-blogroll-list">
            <li class="links-of-blogroll-item">
              <a href="https://cloudolife.cn/" title="https:&#x2F;&#x2F;cloudolife.cn" rel="noopener external nofollow noreferrer" target="_blank">CLoudoLife - Chinese (Simplified)</a>
            </li>
        </ul>
      </div>
    </div>
        <div class="pjax">
        </div>
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://cloudolife.com/2021/05/29/Programming-Language/Ruby/Awesome-Ruby-Gem/Use-benchmark-ips-gem-to-benchmark-how-iterations-per-second/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CloudoLife">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cloud-oriented Life">
      <meta itemprop="description" content="A Husband and Father, Knowledge Worker, Full-skilled Cloud Engineer">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="[Awesome Ruby Gem] Use benchmark-ips gem to benchmark how iterations per second enhancement | Cloud-oriented Life">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          [Awesome Ruby Gem] Use benchmark-ips gem to benchmark how iterations per second enhancement
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-05-29 00:00:00" itemprop="dateCreated datePublished" datetime="2021-05-29T00:00:00+00:00">2021-05-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2025-06-10 09:49:34" itemprop="dateModified" datetime="2025-06-10T09:49:34+00:00">2025-06-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming-Language/" itemprop="url" rel="index"><span itemprop="name">Programming Language</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming-Language/Ruby/" itemprop="url" rel="index"><span itemprop="name">Ruby</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming-Language/Ruby/Awesome-Ruby-Gem/" itemprop="url" rel="index"><span itemprop="name">Awesome Ruby Gem</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">Views: </span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>6.3k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>6 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1>benchmark-ips</h1>
<p>An iterations per second enhancement to Benchmark.</p>
<h2 id="FEATURES-PROBLEMS">FEATURES/PROBLEMS:</h2>
<p>benchmark/ips - benchmarks a blocks iterations/second. For short snippits of code, ips automatically figures out how many times to run the code to get interesting data. No more guessing at random iteration counts!</p>
<span id="more"></span>
<h2 id="Installation">Installation</h2>
<p>You can install it as a gem:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">gem install benchmark-ips</span></span><br></pre></td></tr></table></figure>
<p>or add it into a Gemfile (Bundler):</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Gemfile</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Put gems used only for development or testing in the appropriate group in the Gemfile</span></span><br><span class="line">group <span class="symbol">:development</span> <span class="keyword">do</span></span><br><span class="line">  <span class="comment"># evanphx/benchmark-ips: Provides iteration per second benchmarking for Ruby</span></span><br><span class="line">  <span class="comment"># https://github.com/evanphx/benchmark-ips</span></span><br><span class="line">  gem <span class="string">&#x27;benchmark-ips&#x27;</span>, <span class="string">&#x27;2.9.1&#x27;</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>Then, run <code>bundle install</code>.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">bundle install</span></span><br></pre></td></tr></table></figure>
<h2 id="Usages">Usages</h2>
<h3 id="SYNOPSIS">SYNOPSIS:</h3>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">require</span> <span class="string">&#x27;benchmark/ips&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Benchmark</span>.ips <span class="keyword">do</span> |<span class="params">x</span>|</span><br><span class="line">  <span class="comment"># Configure the number of seconds used during</span></span><br><span class="line">  <span class="comment"># the warmup phase (default 2) and calculation phase (default 5)</span></span><br><span class="line">  x.config(<span class="symbol">:time</span> =&gt; <span class="number">5</span>, <span class="symbol">:warmup</span> =&gt; <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment"># These parameters can also be configured this way</span></span><br><span class="line">  x.time = <span class="number">5</span></span><br><span class="line">  x.warmup = <span class="number">2</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Typical mode, runs the block as many times as it can</span></span><br><span class="line">  x.report(<span class="string">&quot;addition&quot;</span>) &#123; <span class="number">1</span> + <span class="number">2</span> &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"># To reduce overhead, the number of iterations is passed in</span></span><br><span class="line">  <span class="comment"># and the block must run the code the specific number of times.</span></span><br><span class="line">  <span class="comment"># Used for when the workload is very small and any overhead</span></span><br><span class="line">  <span class="comment"># introduces incorrectable errors.</span></span><br><span class="line">  x.report(<span class="string">&quot;addition2&quot;</span>) <span class="keyword">do</span> |<span class="params">times</span>|</span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> i &lt; times</span><br><span class="line">      <span class="number">1</span> + <span class="number">2</span></span><br><span class="line">      i += <span class="number">1</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># To reduce overhead even more, grafts the code given into</span></span><br><span class="line">  <span class="comment"># the loop that performs the iterations internally to reduce</span></span><br><span class="line">  <span class="comment"># overhead. Typically not needed, use the |times| form instead.</span></span><br><span class="line">  x.report(<span class="string">&quot;addition3&quot;</span>, <span class="string">&quot;1 + 2&quot;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment"># Really long labels should be formatted correctly</span></span><br><span class="line">  x.report(<span class="string">&quot;addition-test-long-label&quot;</span>) &#123; <span class="number">1</span> + <span class="number">2</span> &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"># Compare the iterations per second of the various reports!</span></span><br><span class="line">  x.compare!</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>This will generate the following report:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Calculating</span> -------------------------------------</span><br><span class="line">            addition    <span class="number">71</span>.254k i/100ms</span><br><span class="line">           addition2    <span class="number">68</span>.658k i/100ms</span><br><span class="line">           addition3    <span class="number">83</span>.079k i/100ms</span><br><span class="line">addition-test-long-label</span><br><span class="line">                        <span class="number">70</span>.129k i/100ms</span><br><span class="line">-------------------------------------------------</span><br><span class="line">            addition     <span class="number">4</span>.955M (± <span class="number">8.7</span>%) i/s -     <span class="number">24</span>.155M</span><br><span class="line">           addition2    <span class="number">24</span>.011M (± <span class="number">9.5</span>%) i/s -    <span class="number">114</span>.246M</span><br><span class="line">           addition3    <span class="number">23</span>.958M (±<span class="number">10.1</span>%) i/s -    <span class="number">115</span>.064M</span><br><span class="line">addition-test-long-label</span><br><span class="line">                         <span class="number">5</span>.014M (± <span class="number">9.1</span>%) i/s -     <span class="number">24</span>.545M</span><br><span class="line"></span><br><span class="line"><span class="title class_">Comparison</span>:</span><br><span class="line">           <span class="symbol">addition2:</span> <span class="number">24011974.8</span> i/s</span><br><span class="line">           <span class="symbol">addition3:</span> <span class="number">23958619.8</span> i/s - <span class="number">1</span>.00x slower</span><br><span class="line">addition-test-long-<span class="symbol">label:</span>  <span class="number">5014756.0</span> i/s - <span class="number">4</span>.79x slower</span><br><span class="line">            <span class="symbol">addition:</span>  <span class="number">4955278.9</span> i/s - <span class="number">4</span>.85x slower</span><br></pre></td></tr></table></figure>
<p>Benchmark/ips will report the number of iterations per second for a given block of code. When analyzing the results, notice the percent of standard deviation which tells us how spread out our measurements are from the average. A high standard deviation could indicate the results having too much variability.</p>
<p>One benefit to using this method is benchmark-ips automatically determines the data points for testing our code, so we can focus on the results instead of guessing iteration counts as we do with the traditional Benchmark library.</p>
<h3 id="Custom-Suite">Custom Suite</h3>
<p>Pass a custom suite to disable garbage collection during benchmark:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">require</span> <span class="string">&#x27;benchmark/ips&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable and start GC before each job run. Disable GC afterwards.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Inspired by https://www.omniref.com/ruby/2.2.1/symbols/Benchmark/bm?#annotation=4095926&amp;line=182</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GCSuite</span></span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">warming</span>(<span class="params">*</span>)</span><br><span class="line">    run_gc</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">running</span>(<span class="params">*</span>)</span><br><span class="line">    run_gc</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">warmup_stats</span>(<span class="params">*</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">add_report</span>(<span class="params">*</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">run_gc</span></span><br><span class="line">    <span class="variable constant_">GC</span>.enable</span><br><span class="line">    <span class="variable constant_">GC</span>.start</span><br><span class="line">    <span class="variable constant_">GC</span>.disable</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">suite = <span class="title class_">GCSuite</span>.new</span><br><span class="line"></span><br><span class="line"><span class="title class_">Benchmark</span>.ips <span class="keyword">do</span> |<span class="params">x</span>|</span><br><span class="line">  x.config(<span class="symbol">:suite</span> =&gt; suite)</span><br><span class="line">  x.report(<span class="string">&quot;job1&quot;</span>) &#123; ... &#125;</span><br><span class="line">  x.report(<span class="string">&quot;job2&quot;</span>) &#123; ... &#125;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h3 id="Independent-benchmarking">Independent benchmarking</h3>
<p>If you are comparing multiple implementations of a piece of code you may want to benchmark them in separate invocations of Ruby so that the measurements are independent of each other. You can do this with the <code>hold!</code> command.</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Benchmark</span>.ips <span class="keyword">do</span> |<span class="params">x</span>|</span><br><span class="line"></span><br><span class="line">  <span class="comment"># Hold results between multiple invocations of Ruby</span></span><br><span class="line">  x.hold! <span class="string">&#x27;filename&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>This will run only one benchmarks each time you run the command, storing results in the specified file. The file is deleted when all results have been gathered and the report is shown.</p>
<p>Alternatively, if you prefer a different approach, the save! command is available. Examples for hold! and save! are available in the examples/ directory.</p>
<h3 id="Multiple-iterations">Multiple iterations</h3>
<p>In some cases you may want to run multiple iterations of the warmup and calculation stages and take only the last result for comparison. This is useful if you are benchmarking with an implementation of Ruby that optimizes using tracing or on-stack-replacement, because to those implementations the calculation phase may appear as new, unoptimized code.</p>
<p>You can do this with the iterations option, which by default is 1. The total time spent will then be iterations * warmup + iterations * time seconds.</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Benchmark</span>.ips <span class="keyword">do</span> |<span class="params">x</span>|</span><br><span class="line"></span><br><span class="line">  x.config(<span class="symbol">:iterations</span> =&gt; <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># or</span></span><br><span class="line"></span><br><span class="line">  x.iterations = <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h3 id="Online-sharing">Online sharing</h3>
<p>If you want to quickly share your benchmark result with others, run you benchmark with SHARE=1 argument. For example: <code>SHARE=1 ruby my_benchmark.rb</code>.</p>
<p>Result will be sent to benchmark.fyi and benchmark-ips will display the link to share the benchmark’s result.</p>
<p>If you want to run your own instance of benchmark.fyi and share it to that instance, you can do this: <code>SHARE_URL=https://ips.example.com ruby my_benchmark.rb</code></p>
<h3 id="Advanced-Statistics">Advanced Statistics</h3>
<p>By default, the margin of error shown is plus-minus one standard deviation. If a more advanced statistical test is wanted, a bootstrap confidence interval can be calculated instead. A bootstrap confidence interval has the advantages of arguably being more mathematically sound for this application than a standard deviation, it additionally produces an error for relative slowdowns, which the standard deviation does not, and it is arguably more intuitive and actionable.</p>
<p>When a bootstrap confidence interval is used, a median of the interval is used rather than the mean of the samples, which is what you get with the default standard deviation.</p>
<p>The bootstrap confidence interval used is the one described by Tomas Kalibera. Note that for this technique to be valid your benchmark should have reached a non-periodic steady state with statistically independent samples (it should have warmed up) by the time measurements start.</p>
<p>Using a bootstrap confidence internal requires that the ‘kalibera’ gem is installed separately. This gem is not a formal dependency, as by default it is not needed.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">gem install kalibera</span></span><br></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Benchmark</span>.ips <span class="keyword">do</span> |<span class="params">x</span>|</span><br><span class="line"></span><br><span class="line">  <span class="comment"># The default is :stats =&gt; :sd, which doesn&#x27;t have a configurable confidence</span></span><br><span class="line">  x.config(<span class="symbol">:stats</span> =&gt; <span class="symbol">:bootstrap</span>, <span class="symbol">:confidence</span> =&gt; <span class="number">95</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># or</span></span><br><span class="line"></span><br><span class="line">  x.stats = <span class="symbol">:bootstrap</span></span><br><span class="line">  x.confidence = <span class="number">95</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># confidence is 95% by default, so it can be omitted</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h2 id="References">References</h2>
<p>[1] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/evanphx/benchmark-ips">evanphx/benchmark-ips: Provides iteration per second benchmarking for Ruby - https://github.com/evanphx/benchmark-ips</a></p>
<p>[2] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://rubygems.org/gems/benchmark-ips">benchmark-ips | RubyGems.org | your community gem host - https://rubygems.org/gems/benchmark-ips</a></p>
<p>[3] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://soft-dev.org/src/libkalibera/">Software Development Team: libkalibera - https://soft-dev.org/src/libkalibera/</a></p>
<p>[4] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://rubygems.org/gems/kalibera">kalibera | RubyGems.org | your community gem host - https://rubygems.org/gems/kalibera</a></p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>Buy me a coffee</div>
  <button>
    Donate
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/bitcoin.png" alt="CloudoLife Bitcoin">
        <span>Bitcoin</span>
      </div>

  </div>
</div>

          <div class="followme">
  <span>Welcome to my other publishing channels</span>

  <div class="social-list">

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://twitter.com/CloudoLife" rel="external nofollow noreferrer">
            <span class="icon">
              <i class="fab fa-twitter"></i>
            </span>

            <span class="label">Twitter</span>
          </a>
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://t.me/CloudoLife" rel="external nofollow noreferrer">
            <span class="icon">
              <i class="fab fa-telegram"></i>
            </span>

            <span class="label">Telegram</span>
          </a>
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="/atom.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">RSS</span>
          </a>
      </div>
  </div>
</div>

          <div class="post-tags">
              <a href="/tags/Best-Practices/" rel="tag"># Best Practices</a>
              <a href="/tags/Ruby/" rel="tag"># Ruby</a>
              <a href="/tags/Programming-Language/" rel="tag"># Programming Language</a>
              <a href="/tags/Performance-Optimization/" rel="tag"># Performance Optimization</a>
              <a href="/tags/Awesome-Ruby-Gem/" rel="tag"># Awesome Ruby Gem</a>
              <a href="/tags/benchmark/" rel="tag"># benchmark</a>
              <a href="/tags/benchmark-ips/" rel="tag"># benchmark-ips</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2021/05/29/Programming-Language/Ruby/Awesome-Ruby-Gem/Use-httplog-gem-to-log-outgoing-HTTP-requests-in-ruby/" rel="prev" title="[Awesome Ruby Gem] Use httplog gem to log outgoing HTTP requests in ruby">
                  <i class="fa fa-angle-left"></i> [Awesome Ruby Gem] Use httplog gem to log outgoing HTTP requests in ruby
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2021/05/29/Programming-Language/Node-js/Node-Package-Manager-npm/npm-Frequently-Asked-Questions-FAQs/" rel="next" title="[Node Package Manager (npm) FAQs] npm Frequently Asked Questions (FAQs)">
                  [Node Package Manager (npm) FAQs] npm Frequently Asked Questions (FAQs) <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments gitalk-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">CloudoLife</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="Word count total">2.6m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">39:58</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener external nofollow noreferrer" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener external nofollow noreferrer" target="_blank">NexT.Pisces</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"CloudoLife","repo":"col-hexo-CloudoLife.github.io","client_id":"4ca3ae8fb3a49237db9a","client_secret":"98d6652508799ef4350ab05aabe855e58f549112","admin_user":"benjamincloudolife","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":null,"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.min.js","integrity":"sha256-MVK9MGD/XJaGyIghSVrONSnoXoGh3IFxLw0zfvzpxR4="},"path_md5":"306b3484d66adfefa433a44b0a1af954"}</script>
<script src="/js/third-party/comments/gitalk.js" defer></script>

</body>
</html>
