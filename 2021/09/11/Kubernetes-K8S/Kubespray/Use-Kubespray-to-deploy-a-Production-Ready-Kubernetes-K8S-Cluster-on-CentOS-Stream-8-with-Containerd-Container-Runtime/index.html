<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="sJgro_9-KyRL3EkTM5KW84pQPrg2Fv1KdkibDRBIulE">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"cloudolife.com","root":"/","images":"/images","scheme":"Pisces","darkmode":true,"version":"8.23.1","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"always","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"default","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":null,"activeClass":"gitalk"},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js" defer></script>

    <meta name="description" content="Kubernetes (K8S) Cluster on AlmaLinux 8 with Containerd Container Runtime This article show how to install Kubernetes (K8S) cluster on AlmaLinux 8 with Containerd Container Runtime.">
<meta property="og:type" content="article">
<meta property="og:title" content="[Kubernetes (K8S) Kubespray] Use Kubespray to deploy a Production Ready Kubernetes (K8S) Cluster on CentOS Stream 8 with Containerd Container Runtime">
<meta property="og:url" content="https://cloudolife.com/2021/09/11/Kubernetes-K8S/Kubespray/Use-Kubespray-to-deploy-a-Production-Ready-Kubernetes-K8S-Cluster-on-CentOS-Stream-8-with-Containerd-Container-Runtime/index.html">
<meta property="og:site_name" content="Cloud-oriented Life">
<meta property="og:description" content="Kubernetes (K8S) Cluster on AlmaLinux 8 with Containerd Container Runtime This article show how to install Kubernetes (K8S) cluster on AlmaLinux 8 with Containerd Container Runtime.">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-09-11T00:00:00.000Z">
<meta property="article:modified_time" content="2025-06-10T09:49:34.921Z">
<meta property="article:author" content="CloudoLife">
<meta property="article:tag" content="Kubernetes (K8S)">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="Cloud Native">
<meta property="article:tag" content="Network">
<meta property="article:tag" content="Container">
<meta property="article:tag" content="Ansible">
<meta property="article:tag" content="Vagrant">
<meta property="article:tag" content="Oracle">
<meta property="article:tag" content="kubeadm">
<meta property="article:tag" content="Kubernetes (K8S) Installation">
<meta property="article:tag" content="Kubespray">
<meta property="article:tag" content="Calico">
<meta property="article:tag" content="CNI">
<meta property="article:tag" content="Container Network Interface">
<meta property="article:tag" content="Container Network Interface (CNI)">
<meta property="article:tag" content="CentOS">
<meta property="article:tag" content="CentOS 8">
<meta property="article:tag" content="Containerd">
<meta property="article:tag" content="Container Runtime">
<meta property="article:tag" content="AlmaLinux">
<meta property="article:tag" content="AlmaLinux 8">
<meta property="article:tag" content="Oracle Linux">
<meta property="article:tag" content="Oracle Linux 8">
<meta property="article:tag" content="CentOS Stream">
<meta property="article:tag" content="CentOS Stream 8">
<meta property="article:tag" content="RHEL">
<meta property="article:tag" content="Red Hat">
<meta property="article:tag" content="Red Hat Enterprise Linux">
<meta property="article:tag" content="Red Hat Enterprise Linux (RHEL)">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://cloudolife.com/2021/09/11/Kubernetes-K8S/Kubespray/Use-Kubespray-to-deploy-a-Production-Ready-Kubernetes-K8S-Cluster-on-CentOS-Stream-8-with-Containerd-Container-Runtime/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://cloudolife.com/2021/09/11/Kubernetes-K8S/Kubespray/Use-Kubespray-to-deploy-a-Production-Ready-Kubernetes-K8S-Cluster-on-CentOS-Stream-8-with-Containerd-Container-Runtime/","path":"2021/09/11/Kubernetes-K8S/Kubespray/Use-Kubespray-to-deploy-a-Production-Ready-Kubernetes-K8S-Cluster-on-CentOS-Stream-8-with-Containerd-Container-Runtime/","title":"[Kubernetes (K8S) Kubespray] Use Kubespray to deploy a Production Ready Kubernetes (K8S) Cluster on CentOS Stream 8 with Containerd Container Runtime"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>[Kubernetes (K8S) Kubespray] Use Kubespray to deploy a Production Ready Kubernetes (K8S) Cluster on CentOS Stream 8 with Containerd Container Runtime | Cloud-oriented Life</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-8Y9QPJWXQN"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-8Y9QPJWXQN","only_pageview":false,"measure_protocol_api_secret":null}</script>
  <script src="/js/third-party/analytics/google-analytics.js" defer></script>

  <script src="/js/third-party/analytics/baidu-analytics.js" defer></script>
  <script async src="https://hm.baidu.com/hm.js?995d7016a56cfd5c2ef6f2e6640a670e"></script>







  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script><script src="/js/bookmark.js" defer></script><script src="/js/pjax.js" defer></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous" defer></script>
<script src="/js/third-party/search/local-search.js" defer></script>

  <script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.3.1/pdfobject.min.js","integrity":"sha256-jI72I8ZLVflVOisZIOaLvRew3tyvzeu6aZXFm7P7dEo="},"url":"/lib/pdf/web/viewer.html"}</script>
  <script src="/js/third-party/tags/pdf.js" defer></script>






  
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>






<script data-ad-client="ca-pub-8693122033969144" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="Cloud-oriented Life" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Cloud-oriented Life</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Cloud Native Technology Improves Lives</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">1646</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">331</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">584</span></a></li><li class="menu-item menu-item-ansible"><a href="/tags/Ansible/" rel="section"><i class="fa fa-book fa-fw"></i>Ansible</a></li><li class="menu-item menu-item-awesome-software"><a href="/tags/Awesome-Software/" rel="section"><i class="fa fa-book fa-fw"></i>Awesome Software</a></li><li class="menu-item menu-item-golang-(go)"><a href="/tags/Golang-Go/" rel="section"><i class="fa fa-book fa-fw"></i>Golang (Go)</a></li><li class="menu-item menu-item-helm"><a href="/tags/Helm/" rel="section"><i class="fa fa-book fa-fw"></i>Helm</a></li><li class="menu-item menu-item-java"><a href="/tags/Java/" rel="section"><i class="fa fa-book fa-fw"></i>Java</a></li><li class="menu-item menu-item-javascript"><a href="/tags/JavaScript/" rel="section"><i class="fa fa-book fa-fw"></i>JavaScript</a></li><li class="menu-item menu-item-knative"><a href="/tags/Knative/" rel="section"><i class="fa fa-book fa-fw"></i>Knative</a></li><li class="menu-item menu-item-kubernetes-(k8s)"><a href="/tags/Kubernetes-K8S/" rel="section"><i class="fa fa-book fa-fw"></i>Kubernetes (K8S)</a></li><li class="menu-item menu-item-macos"><a href="/tags/macOS/" rel="section"><i class="fa fa-book fa-fw"></i>macOS</a></li><li class="menu-item menu-item-python"><a href="/tags/Python/" rel="section"><i class="fa fa-book fa-fw"></i>Python</a></li><li class="menu-item menu-item-pulumi"><a href="/tags/Pulumi/" rel="section"><i class="fa fa-book fa-fw"></i>Pulumi</a></li><li class="menu-item menu-item-react"><a href="/tags/React/" rel="section"><i class="fa fa-book fa-fw"></i>React</a></li><li class="menu-item menu-item-ruby"><a href="/tags/Ruby/" rel="section"><i class="fa fa-book fa-fw"></i>Ruby</a></li><li class="menu-item menu-item-ruby-on-rails"><a href="/tags/Ruby-on-Rails-RoR/" rel="section"><i class="fa fa-book fa-fw"></i>Ruby On Rails</a></li><li class="menu-item menu-item-rust"><a href="/tags/Rust/" rel="section"><i class="fa fa-book fa-fw"></i>Rust</a></li><li class="menu-item menu-item-serverless"><a href="/tags/Serverless/" rel="section"><i class="fa fa-book fa-fw"></i>Serverless</a></li><li class="menu-item menu-item-service-mesh"><a href="/tags/Service-Mesh/" rel="section"><i class="fa fa-book fa-fw"></i>Service Mesh</a></li><li class="menu-item menu-item-svelte"><a href="/tags/Svelte/" rel="section"><i class="fa fa-book fa-fw"></i>Svelte</a></li><li class="menu-item menu-item-taro"><a href="/tags/Taro/" rel="section"><i class="fa fa-book fa-fw"></i>Taro</a></li><li class="menu-item menu-item-terraform"><a href="/tags/Terraform/" rel="section"><i class="fa fa-book fa-fw"></i>Terraform</a></li><li class="menu-item menu-item-typescript"><a href="/tags/TypeScript/" rel="section"><i class="fa fa-book fa-fw"></i>TypeScript</a></li><li class="menu-item menu-item-about"><a href="/about-us/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a></li><li class="menu-item menu-item-rss"><a href="/atom.xml" rel="section"><i class="fa fa-rss fa-fw"></i>RSS</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="Searching..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number">1.</span> <span class="nav-text">Kubernetes (K8S) Cluster on AlmaLinux 8 with Containerd Container Runtime</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Prerequisites"><span class="nav-number">1.1.</span> <span class="nav-text">Prerequisites</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#CentOS-Stream"><span class="nav-number">1.1.1.</span> <span class="nav-text">CentOS Stream</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Containerd-An-industry-standard-container-runtime-with-an-emphasis-on-simplicity-robustness-and-portability"><span class="nav-number">1.1.2.</span> <span class="nav-text">Containerd - An industry-standard container runtime with an emphasis on simplicity, robustness, and portability.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Kubespray"><span class="nav-number">1.1.3.</span> <span class="nav-text">Kubespray</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Ansible"><span class="nav-number">1.1.4.</span> <span class="nav-text">Ansible</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Configuration"><span class="nav-number">1.2.</span> <span class="nav-text">Configuration</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#CentOS-8-Oracle-Linux-8-AlmaLinux-8-and-derivatives"><span class="nav-number">1.2.1.</span> <span class="nav-text">CentOS 8 &#x2F; Oracle Linux 8 &#x2F; AlmaLinux 8 and derivatives</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Usages"><span class="nav-number">1.3.</span> <span class="nav-text">Usages</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Shell-Mode"><span class="nav-number">1.3.1.</span> <span class="nav-text">Shell Mode</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#References"><span class="nav-number">1.4.</span> <span class="nav-text">References</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">CloudoLife</p>
  <div class="site-description" itemprop="description">A Husband and Father, Knowledge Worker, Full-skilled Cloud Engineer</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">584</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">331</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">1646</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/CloudoLife" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;CloudoLife" rel="noopener me external nofollow noreferrer" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/CloudoLife" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;CloudoLife" rel="noopener me external nofollow noreferrer" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
    <div class="sidebar-inner sidebar-blogroll">
      <div class="links-of-blogroll animated">
        <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
          Links
        </div>
        <ul class="links-of-blogroll-list">
            <li class="links-of-blogroll-item">
              <a href="https://cloudolife.cn/" title="https:&#x2F;&#x2F;cloudolife.cn" rel="noopener external nofollow noreferrer" target="_blank">CLoudoLife - Chinese (Simplified)</a>
            </li>
        </ul>
      </div>
    </div>
        <div class="pjax">
        </div>
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://cloudolife.com/2021/09/11/Kubernetes-K8S/Kubespray/Use-Kubespray-to-deploy-a-Production-Ready-Kubernetes-K8S-Cluster-on-CentOS-Stream-8-with-Containerd-Container-Runtime/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CloudoLife">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cloud-oriented Life">
      <meta itemprop="description" content="A Husband and Father, Knowledge Worker, Full-skilled Cloud Engineer">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="[Kubernetes (K8S) Kubespray] Use Kubespray to deploy a Production Ready Kubernetes (K8S) Cluster on CentOS Stream 8 with Containerd Container Runtime | Cloud-oriented Life">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          [Kubernetes (K8S) Kubespray] Use Kubespray to deploy a Production Ready Kubernetes (K8S) Cluster on CentOS Stream 8 with Containerd Container Runtime
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-11 00:00:00" itemprop="dateCreated datePublished" datetime="2021-09-11T00:00:00+00:00">2021-09-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2025-06-10 09:49:34" itemprop="dateModified" datetime="2025-06-10T09:49:34+00:00">2025-06-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Cloud-Native/" itemprop="url" rel="index"><span itemprop="name">Cloud Native</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Cloud-Native/Kubernetes-K8S/" itemprop="url" rel="index"><span itemprop="name">Kubernetes (K8S)</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Cloud-Native/Kubernetes-K8S/Kubespray/" itemprop="url" rel="index"><span itemprop="name">Kubespray</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">Views: </span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>4k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>4 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1>Kubernetes (K8S) Cluster on AlmaLinux 8 with Containerd Container Runtime</h1>
<p>This article show how to install Kubernetes (K8S) cluster on AlmaLinux 8 with Containerd Container Runtime.</p>
<span id="more"></span>
<h2 id="Prerequisites">Prerequisites</h2>
<h3 id="CentOS-Stream">CentOS Stream</h3>
<p>CentOS Stream is an upstream development platform designed for CentOS community members, Red Hat partners, ecosystem developers, and many other groups to more quickly and easily see what’s coming in the next version of Red Hat Enterprise Linux (RHEL) and to help shape these capabilities. Since its introduction in 2019, we’ve seen great enthusiasm from partners and contributors around CentOS Stream and the continuous stream of innovation that the project provides.</p>
<p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.centos.org/centos-stream/">CentOS Stream - https://www.centos.org/centos-stream/</a></p>
<h3 id="Containerd-An-industry-standard-container-runtime-with-an-emphasis-on-simplicity-robustness-and-portability">Containerd - An industry-standard container runtime with an emphasis on simplicity, robustness, and portability.</h3>
<p>containerd is available as a daemon for Linux and Windows. It manages the complete container lifecycle of its host system, from image transfer and storage to container execution and supervision to low-level storage to network attachments and beyond.</p>
<p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://containerd.io/">containerd – An industry-standard container runtime with an emphasis on simplicity, robustness and portability - https://containerd.io/</a></p>
<h3 id="Kubespray">Kubespray</h3>
<p>Kubespray allows you to deploy a production-ready Kubernetes cluster (using Ansible or Vagrant) and since v2.3 can work together with Kubernetes kubeadm.</p>
<p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://kubespray.io/">Deploy a Production Ready Kubernetes Cluster | Readme - https://kubespray.io/</a></p>
<h3 id="Ansible">Ansible</h3>
<p>Ansible is the simplest way to automate apps and IT infrastructure. Application Deployment + Configuration Management + Continuous Delivery.</p>
<h2 id="Configuration">Configuration</h2>
<h3 id="CentOS-8-Oracle-Linux-8-AlmaLinux-8-and-derivatives">CentOS 8 / Oracle Linux 8 / AlmaLinux 8 and derivatives</h3>
<p>CentOS 8 / Oracle Linux 8 / AlmaLinux 8 ship only with iptables-nft (ie without iptables-legacy similar to RHEL8) The only tested configuration for now is using Calico CNI You need to add <code>calico_iptables_backend: &quot;NFT&quot;</code> or <code>calico_iptables_backend: &quot;Auto&quot;</code> to your configuration.</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># inventory/cloudolife-example/group_vars/k8s_cluster/k8s-net-calico.yml</span><br><span class="line"></span><br><span class="line"># Choose Calico iptables backend: &quot;Legacy&quot;, &quot;Auto&quot; or &quot;NFT&quot;</span><br><span class="line"><span class="deletion">- # calico_iptables_backend: &quot;Legacy&quot;</span></span><br><span class="line"><span class="addition">+ calico_iptables_backend: &quot;NFT&quot;</span></span><br></pre></td></tr></table></figure>
<p>If you have containers that are using iptables in the host network namespace (<code>hostNetwork=true</code>), you need to ensure they are using <code>iptables-nft</code>. An example how k8s do the autodetection can be found in this PR <a target="_blank" rel="noopener external nofollow noreferrer" href="https://kubespray.io/#:~:text=can%20be%20found-,in%20this%20PR">update images to Debian buster, detect iptables mode by danwinship · Pull Request #82966 · kubernetes/kubernetes - https://kubespray.io/#:~:text=can%20be%20found-,in%20this%20PR</a></p>
<p>See <a target="_blank" rel="noopener external nofollow noreferrer" href="https://kubespray.io/#/docs/centos8">CentOS/OracleLinux/AlmaLinux - https://kubespray.io/#/docs/centos8</a> to learn more.</p>
<h2 id="Usages">Usages</h2>
<p>You have two ways to run Kubespray.</p>
<h3 id="Shell-Mode">Shell Mode</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Download kubespray</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">clone</span> git@github.com:kubernetes-sigs/kubespray.git</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> kubespray</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Install dependencies from ``requirements.txt``</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> pip3 install -r requirements.txt</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Copy ``inventory/sample`` as ``inventory/mycluster``</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cp</span> -rfp inventory/sample inventory/mycluster</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Update Ansible inventory file with inventory builder</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">declare</span> -a IPS=(10.10.1.3 10.10.1.4 10.10.1.5)</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">CONFIG_FILE=inventory/mycluster/hosts.yaml python3 contrib/inventory_builder/inventory.py <span class="variable">$&#123;IPS[@]&#125;</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Review and change parameters under ``inventory/mycluster/group_vars``</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> inventory/mycluster/group_vars/all/all.yml</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> inventory/mycluster/group_vars/k8s_cluster/k8s-cluster.yml</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Deploy Kubespray with Ansible Playbook - run the playbook as root</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">The option `--become` is required, as <span class="keyword">for</span> example writing SSL keys <span class="keyword">in</span> /etc/,</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">installing packages and interacting with various systemd daemons.</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Without --become the playbook will fail to run!</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ansible-playbook -i inventory/mycluster/hosts.yaml --become --become-user=root cluster.yml</span></span><br></pre></td></tr></table></figure>
<h2 id="References">References</h2>
<p>[1] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/kubernetes-sigs/kubespray">kubernetes-sigs/kubespray: Deploy a Production Ready Kubernetes Cluster - https://github.com/kubernetes-sigs/kubespray</a></p>
<p>[2] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://kubespray.io/">Deploy a Production Ready Kubernetes Cluster | Readme - https://kubespray.io/</a></p>
<p>[3] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.centos.org/centos-stream/">CentOS Stream - https://www.centos.org/centos-stream/</a></p>
<p>[4] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://containerd.io/">containerd – An industry-standard container runtime with an emphasis on simplicity, robustness and portability - https://containerd.io/</a></p>
<p>[5] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://kubespray.io/#/docs/centos8">CentOS/OracleLinux/AlmaLinux - https://kubespray.io/#/docs/centos8</a></p>
<p>[6] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://docs.projectcalico.org/reference/node/configuration">Configuring calico/node - https://docs.projectcalico.org/reference/node/configuration</a></p>
<p>[7] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://kubespray.io/#/docs/containerd">Containerd - https://kubespray.io/#/docs/containerd</a></p>
<p>[8] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.ansible.com/">Ansible is Simple IT Automation - https://www.ansible.com/</a></p>
<p>[9] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://kubernetes.io/">Kubernetes - https://kubernetes.io/</a></p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>Buy me a coffee</div>
  <button>
    Donate
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/bitcoin.png" alt="CloudoLife Bitcoin">
        <span>Bitcoin</span>
      </div>

  </div>
</div>

          <div class="followme">
  <span>Welcome to my other publishing channels</span>

  <div class="social-list">

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://twitter.com/CloudoLife" rel="external nofollow noreferrer">
            <span class="icon">
              <i class="fab fa-twitter"></i>
            </span>

            <span class="label">Twitter</span>
          </a>
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://t.me/CloudoLife" rel="external nofollow noreferrer">
            <span class="icon">
              <i class="fab fa-telegram"></i>
            </span>

            <span class="label">Telegram</span>
          </a>
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="/atom.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">RSS</span>
          </a>
      </div>
  </div>
</div>

          <div class="post-tags">
              <a href="/tags/Kubernetes-K8S/" rel="tag"># Kubernetes (K8S)</a>
              <a href="/tags/Linux/" rel="tag"># Linux</a>
              <a href="/tags/Cloud-Native/" rel="tag"># Cloud Native</a>
              <a href="/tags/Network/" rel="tag"># Network</a>
              <a href="/tags/Container/" rel="tag"># Container</a>
              <a href="/tags/Ansible/" rel="tag"># Ansible</a>
              <a href="/tags/Vagrant/" rel="tag"># Vagrant</a>
              <a href="/tags/Oracle/" rel="tag"># Oracle</a>
              <a href="/tags/kubeadm/" rel="tag"># kubeadm</a>
              <a href="/tags/Kubernetes-K8S-Installation/" rel="tag"># Kubernetes (K8S) Installation</a>
              <a href="/tags/Kubespray/" rel="tag"># Kubespray</a>
              <a href="/tags/Calico/" rel="tag"># Calico</a>
              <a href="/tags/CNI/" rel="tag"># CNI</a>
              <a href="/tags/Container-Network-Interface/" rel="tag"># Container Network Interface</a>
              <a href="/tags/Container-Network-Interface-CNI/" rel="tag"># Container Network Interface (CNI)</a>
              <a href="/tags/CentOS/" rel="tag"># CentOS</a>
              <a href="/tags/CentOS-8/" rel="tag"># CentOS 8</a>
              <a href="/tags/Containerd/" rel="tag"># Containerd</a>
              <a href="/tags/Container-Runtime/" rel="tag"># Container Runtime</a>
              <a href="/tags/AlmaLinux/" rel="tag"># AlmaLinux</a>
              <a href="/tags/AlmaLinux-8/" rel="tag"># AlmaLinux 8</a>
              <a href="/tags/Oracle-Linux/" rel="tag"># Oracle Linux</a>
              <a href="/tags/Oracle-Linux-8/" rel="tag"># Oracle Linux 8</a>
              <a href="/tags/CentOS-Stream/" rel="tag"># CentOS Stream</a>
              <a href="/tags/CentOS-Stream-8/" rel="tag"># CentOS Stream 8</a>
              <a href="/tags/RHEL/" rel="tag"># RHEL</a>
              <a href="/tags/Red-Hat/" rel="tag"># Red Hat</a>
              <a href="/tags/Red-Hat-Enterprise-Linux/" rel="tag"># Red Hat Enterprise Linux</a>
              <a href="/tags/Red-Hat-Enterprise-Linux-RHEL/" rel="tag"># Red Hat Enterprise Linux (RHEL)</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2021/09/11/Infrastructure-as-Code-IaC/Pulumi/Helm/Use-Pulumi-kubernetes-K8S-Helm-Chart-to-deploy-Elastic-APM-Server/" rel="prev" title="[Infrastructure as Code (IaC) Pulumi] Use Pulumi kubernetes (K8S) Helm Chart to deploy Elastic APM Server">
                  <i class="fa fa-angle-left"></i> [Infrastructure as Code (IaC) Pulumi] Use Pulumi kubernetes (K8S) Helm Chart to deploy Elastic APM Server
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2021/09/11/Raspberry-Pi/Installing-K3S-on-Ubuntu-within-Raspberry-Pi-4-Model-or-B/" rel="next" title="[Raspberry Pi] Installing K3S on Ubuntu within Raspberry Pi 4 Model (or B)">
                  [Raspberry Pi] Installing K3S on Ubuntu within Raspberry Pi 4 Model (or B) <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments gitalk-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">CloudoLife</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="Word count total">2.6m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">39:58</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener external nofollow noreferrer" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener external nofollow noreferrer" target="_blank">NexT.Pisces</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"CloudoLife","repo":"col-hexo-CloudoLife.github.io","client_id":"4ca3ae8fb3a49237db9a","client_secret":"98d6652508799ef4350ab05aabe855e58f549112","admin_user":"benjamincloudolife","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":null,"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.min.js","integrity":"sha256-MVK9MGD/XJaGyIghSVrONSnoXoGh3IFxLw0zfvzpxR4="},"path_md5":"55ed68f54475d218b7d6e99e9ccd1b6e"}</script>
<script src="/js/third-party/comments/gitalk.js" defer></script>

</body>
</html>
