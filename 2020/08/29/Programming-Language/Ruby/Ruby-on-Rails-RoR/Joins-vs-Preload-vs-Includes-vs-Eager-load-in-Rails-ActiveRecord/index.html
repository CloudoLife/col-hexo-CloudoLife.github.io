<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="sJgro_9-KyRL3EkTM5KW84pQPrg2Fv1KdkibDRBIulE">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"cloudolife.com","root":"/","images":"/images","scheme":"Pisces","darkmode":true,"version":"8.23.1","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"always","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"default","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":null,"activeClass":"gitalk"},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js" defer></script>

    <meta name="description" content="Joins vs Preload vs Includes vs Eager load Rails ActiveRecord provide few ways to load associated data and before moving forward. let’s consider one scenario as below, there is a User table that has a">
<meta property="og:type" content="article">
<meta property="og:title" content="[Ruby on Rails (RoR)] Joins vs Preload vs Includes vs Eager load in Rails ActiveRecord">
<meta property="og:url" content="https://cloudolife.com/2020/08/29/Programming-Language/Ruby/Ruby-on-Rails-RoR/Joins-vs-Preload-vs-Includes-vs-Eager-load-in-Rails-ActiveRecord/index.html">
<meta property="og:site_name" content="Cloud-oriented Life">
<meta property="og:description" content="Joins vs Preload vs Includes vs Eager load Rails ActiveRecord provide few ways to load associated data and before moving forward. let’s consider one scenario as below, there is a User table that has a">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-08-29T00:00:00.000Z">
<meta property="article:modified_time" content="2025-06-10T09:49:34.940Z">
<meta property="article:author" content="CloudoLife">
<meta property="article:tag" content="Rails &#x2F; Ruby on Rails (RoR)">
<meta property="article:tag" content="Best Practices">
<meta property="article:tag" content="Ruby">
<meta property="article:tag" content="Programming Language">
<meta property="article:tag" content="Rails ActiveRecord">
<meta property="article:tag" content="joins">
<meta property="article:tag" content="preload">
<meta property="article:tag" content="includes">
<meta property="article:tag" content="eager_load">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://cloudolife.com/2020/08/29/Programming-Language/Ruby/Ruby-on-Rails-RoR/Joins-vs-Preload-vs-Includes-vs-Eager-load-in-Rails-ActiveRecord/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://cloudolife.com/2020/08/29/Programming-Language/Ruby/Ruby-on-Rails-RoR/Joins-vs-Preload-vs-Includes-vs-Eager-load-in-Rails-ActiveRecord/","path":"2020/08/29/Programming-Language/Ruby/Ruby-on-Rails-RoR/Joins-vs-Preload-vs-Includes-vs-Eager-load-in-Rails-ActiveRecord/","title":"[Ruby on Rails (RoR)] Joins vs Preload vs Includes vs Eager load in Rails ActiveRecord"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>[Ruby on Rails (RoR)] Joins vs Preload vs Includes vs Eager load in Rails ActiveRecord | Cloud-oriented Life</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-8Y9QPJWXQN"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-8Y9QPJWXQN","only_pageview":false,"measure_protocol_api_secret":null}</script>
  <script src="/js/third-party/analytics/google-analytics.js" defer></script>

  <script src="/js/third-party/analytics/baidu-analytics.js" defer></script>
  <script async src="https://hm.baidu.com/hm.js?995d7016a56cfd5c2ef6f2e6640a670e"></script>







  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script><script src="/js/bookmark.js" defer></script><script src="/js/pjax.js" defer></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous" defer></script>
<script src="/js/third-party/search/local-search.js" defer></script>

  <script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.3.1/pdfobject.min.js","integrity":"sha256-jI72I8ZLVflVOisZIOaLvRew3tyvzeu6aZXFm7P7dEo="},"url":"/lib/pdf/web/viewer.html"}</script>
  <script src="/js/third-party/tags/pdf.js" defer></script>






  
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>






<script data-ad-client="ca-pub-8693122033969144" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="Cloud-oriented Life" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Cloud-oriented Life</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Cloud Native Technology Improves Lives</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">1646</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">331</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">584</span></a></li><li class="menu-item menu-item-ansible"><a href="/tags/Ansible/" rel="section"><i class="fa fa-book fa-fw"></i>Ansible</a></li><li class="menu-item menu-item-awesome-software"><a href="/tags/Awesome-Software/" rel="section"><i class="fa fa-book fa-fw"></i>Awesome Software</a></li><li class="menu-item menu-item-golang-(go)"><a href="/tags/Golang-Go/" rel="section"><i class="fa fa-book fa-fw"></i>Golang (Go)</a></li><li class="menu-item menu-item-helm"><a href="/tags/Helm/" rel="section"><i class="fa fa-book fa-fw"></i>Helm</a></li><li class="menu-item menu-item-java"><a href="/tags/Java/" rel="section"><i class="fa fa-book fa-fw"></i>Java</a></li><li class="menu-item menu-item-javascript"><a href="/tags/JavaScript/" rel="section"><i class="fa fa-book fa-fw"></i>JavaScript</a></li><li class="menu-item menu-item-knative"><a href="/tags/Knative/" rel="section"><i class="fa fa-book fa-fw"></i>Knative</a></li><li class="menu-item menu-item-kubernetes-(k8s)"><a href="/tags/Kubernetes-K8S/" rel="section"><i class="fa fa-book fa-fw"></i>Kubernetes (K8S)</a></li><li class="menu-item menu-item-macos"><a href="/tags/macOS/" rel="section"><i class="fa fa-book fa-fw"></i>macOS</a></li><li class="menu-item menu-item-python"><a href="/tags/Python/" rel="section"><i class="fa fa-book fa-fw"></i>Python</a></li><li class="menu-item menu-item-pulumi"><a href="/tags/Pulumi/" rel="section"><i class="fa fa-book fa-fw"></i>Pulumi</a></li><li class="menu-item menu-item-react"><a href="/tags/React/" rel="section"><i class="fa fa-book fa-fw"></i>React</a></li><li class="menu-item menu-item-ruby"><a href="/tags/Ruby/" rel="section"><i class="fa fa-book fa-fw"></i>Ruby</a></li><li class="menu-item menu-item-ruby-on-rails"><a href="/tags/Ruby-on-Rails-RoR/" rel="section"><i class="fa fa-book fa-fw"></i>Ruby On Rails</a></li><li class="menu-item menu-item-rust"><a href="/tags/Rust/" rel="section"><i class="fa fa-book fa-fw"></i>Rust</a></li><li class="menu-item menu-item-serverless"><a href="/tags/Serverless/" rel="section"><i class="fa fa-book fa-fw"></i>Serverless</a></li><li class="menu-item menu-item-service-mesh"><a href="/tags/Service-Mesh/" rel="section"><i class="fa fa-book fa-fw"></i>Service Mesh</a></li><li class="menu-item menu-item-svelte"><a href="/tags/Svelte/" rel="section"><i class="fa fa-book fa-fw"></i>Svelte</a></li><li class="menu-item menu-item-taro"><a href="/tags/Taro/" rel="section"><i class="fa fa-book fa-fw"></i>Taro</a></li><li class="menu-item menu-item-terraform"><a href="/tags/Terraform/" rel="section"><i class="fa fa-book fa-fw"></i>Terraform</a></li><li class="menu-item menu-item-typescript"><a href="/tags/TypeScript/" rel="section"><i class="fa fa-book fa-fw"></i>TypeScript</a></li><li class="menu-item menu-item-about"><a href="/about-us/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a></li><li class="menu-item menu-item-rss"><a href="/atom.xml" rel="section"><i class="fa fa-rss fa-fw"></i>RSS</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="Searching..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number">1.</span> <span class="nav-text">Joins vs Preload vs Includes vs Eager load</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Joins"><span class="nav-number">1.1.</span> <span class="nav-text">Joins</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Pros"><span class="nav-number">1.1.1.</span> <span class="nav-text">Pros</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Cons"><span class="nav-number">1.1.2.</span> <span class="nav-text">Cons</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Preload"><span class="nav-number">1.2.</span> <span class="nav-text">Preload</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Pros-2"><span class="nav-number">1.2.1.</span> <span class="nav-text">Pros</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Cons-2"><span class="nav-number">1.2.2.</span> <span class="nav-text">Cons</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Includes"><span class="nav-number">1.3.</span> <span class="nav-text">Includes</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Pros-3"><span class="nav-number">1.3.1.</span> <span class="nav-text">Pros</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Cons-3"><span class="nav-number">1.3.2.</span> <span class="nav-text">Cons</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Eager-load"><span class="nav-number">1.4.</span> <span class="nav-text">Eager load</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Pros-4"><span class="nav-number">1.4.1.</span> <span class="nav-text">Pros</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Cons-4"><span class="nav-number">1.4.2.</span> <span class="nav-text">Cons</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Summary"><span class="nav-number">1.5.</span> <span class="nav-text">Summary</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#References"><span class="nav-number">1.6.</span> <span class="nav-text">References</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">CloudoLife</p>
  <div class="site-description" itemprop="description">A Husband and Father, Knowledge Worker, Full-skilled Cloud Engineer</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">584</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">331</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">1646</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/CloudoLife" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;CloudoLife" rel="noopener me external nofollow noreferrer" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/CloudoLife" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;CloudoLife" rel="noopener me external nofollow noreferrer" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
    <div class="sidebar-inner sidebar-blogroll">
      <div class="links-of-blogroll animated">
        <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
          Links
        </div>
        <ul class="links-of-blogroll-list">
            <li class="links-of-blogroll-item">
              <a href="https://cloudolife.cn/" title="https:&#x2F;&#x2F;cloudolife.cn" rel="noopener external nofollow noreferrer" target="_blank">CLoudoLife - Chinese (Simplified)</a>
            </li>
        </ul>
      </div>
    </div>
        <div class="pjax">
        </div>
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://cloudolife.com/2020/08/29/Programming-Language/Ruby/Ruby-on-Rails-RoR/Joins-vs-Preload-vs-Includes-vs-Eager-load-in-Rails-ActiveRecord/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CloudoLife">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cloud-oriented Life">
      <meta itemprop="description" content="A Husband and Father, Knowledge Worker, Full-skilled Cloud Engineer">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="[Ruby on Rails (RoR)] Joins vs Preload vs Includes vs Eager load in Rails ActiveRecord | Cloud-oriented Life">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          [Ruby on Rails (RoR)] Joins vs Preload vs Includes vs Eager load in Rails ActiveRecord
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-08-29 00:00:00" itemprop="dateCreated datePublished" datetime="2020-08-29T00:00:00+00:00">2020-08-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2025-06-10 09:49:34" itemprop="dateModified" datetime="2025-06-10T09:49:34+00:00">2025-06-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming-Language/" itemprop="url" rel="index"><span itemprop="name">Programming Language</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming-Language/Ruby/" itemprop="url" rel="index"><span itemprop="name">Ruby</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming-Language/Ruby/Rails-Ruby-on-Rails-RoR/" itemprop="url" rel="index"><span itemprop="name">Rails / Ruby on Rails (RoR)</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming-Language/Ruby/Rails-Ruby-on-Rails-RoR/Best-Practices/" itemprop="url" rel="index"><span itemprop="name">Best Practices</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">Views: </span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>9.1k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>8 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1>Joins vs Preload vs Includes vs Eager load</h1>
<p>Rails ActiveRecord provide few ways to load associated data and before moving forward.</p>
<p>let’s consider one scenario as below, there is a User table that has a one-to-many association with the Post table.</p>
<span id="more"></span>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># app/models/user.rb</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span> &lt; <span class="title class_ inherited__">ApplicationRecord</span></span><br><span class="line">  has_many <span class="symbol">:posts</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># app/models/user.rb</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Post</span> &lt; <span class="title class_ inherited__">ApplicationRecord</span></span><br><span class="line">  belongs_to <span class="symbol">:user</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>With the scenario been set, let’s begin with our discussion.</p>
<h2 id="Joins">Joins</h2>
<p>The Joins works perfectly fine for comparing and filtering data using associated data.</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">users = <span class="title class_">User</span>.joins(<span class="symbol">:posts</span>).where(<span class="string">&quot;posts.published = ?&quot;</span>, <span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># =&gt;</span></span><br><span class="line"><span class="variable constant_">SELECT</span> <span class="string">&quot;users&quot;</span>.* <span class="variable constant_">FROM</span> <span class="string">&quot;users&quot;</span> <span class="variable constant_">INNER</span> <span class="variable constant_">JOIN</span> <span class="string">&quot;posts&quot;</span> <span class="variable constant_">ON</span> <span class="string">&quot;posts&quot;</span>.<span class="string">&quot;user_id&quot;</span> = <span class="string">&quot;users&quot;</span>.<span class="string">&quot;id&quot;</span> <span class="variable constant_">WHERE</span> <span class="string">&quot;posts&quot;</span>.<span class="string">&quot;published&quot;</span> = <span class="string">&quot;ture&quot;</span></span><br></pre></td></tr></table></figure>
<p>The query will load all users with posts having published attribute value as true and we can do so only because of the magic of joins.</p>
<h3 id="Pros">Pros</h3>
<ul>
<li>It uses <code>INNER JOIN</code> query to load associated data, as a result, associated data does not get impacted.</li>
</ul>
<p>ex. If the first user has a total of 12 posts(include 4 posts which published is true).</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">=&gt; users = <span class="title class_">User</span>.joins(<span class="symbol">:posts</span>).where(“posts.published = <span class="string">?”</span>, true)</span><br><span class="line"></span><br><span class="line"><span class="comment"># =&gt;</span></span><br><span class="line"><span class="variable constant_">SELECT</span> <span class="string">&quot;users&quot;</span>.* <span class="variable constant_">FROM</span> <span class="string">&quot;users&quot;</span> <span class="variable constant_">INNER</span> <span class="variable constant_">JOIN</span> <span class="string">&quot;posts&quot;</span> <span class="variable constant_">ON</span> <span class="string">&quot;posts&quot;</span>.<span class="string">&quot;user_id&quot;</span> = <span class="string">&quot;users&quot;</span>.<span class="string">&quot;id&quot;</span> <span class="variable constant_">AND</span> <span class="string">&quot;posts&quot;</span>.<span class="string">&quot;published&quot;</span> = <span class="string">&quot;true&quot;</span></span><br><span class="line"></span><br><span class="line">=&gt; users.first.posts.length <span class="comment"># it will ouptput 12, but not 4. Because it will load posts with another query statement.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># =&gt;</span></span><br><span class="line"><span class="variable constant_">SELECT</span> <span class="string">&quot;posts&quot;</span>.* <span class="variable constant_">FROM</span> <span class="string">&quot;posts&quot;</span> <span class="variable constant_">WHERE</span> <span class="string">&quot;posts&quot;</span>.<span class="string">&quot;published&quot;</span> = <span class="string">&quot;true&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="Cons">Cons</h3>
<ul>
<li>It does not solve the (n+1) issue all alone, since it does not store associated data for future use. (Note: It can be solved by using joins+preload ex.</li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">users = <span class="title class_">User</span>.joins(<span class="symbol">:posts</span>).where(“posts.published = <span class="string">?”</span>, <span class="literal">true</span>).preload(posts))</span><br><span class="line"></span><br><span class="line"><span class="comment"># =&gt;</span></span><br><span class="line"><span class="variable constant_">SELECT</span> <span class="string">&quot;users&quot;</span>.* <span class="variable constant_">FROM</span> <span class="string">&quot;users&quot;</span> <span class="variable constant_">INNER</span> <span class="variable constant_">JOIN</span> <span class="string">&quot;posts&quot;</span> <span class="variable constant_">ON</span> <span class="string">&quot;posts&quot;</span>.<span class="string">&quot;user_id&quot;</span> = <span class="string">&quot;users&quot;</span>.<span class="string">&quot;id&quot;</span> <span class="variable constant_">AND</span> <span class="string">&quot;posts&quot;</span>.<span class="string">&quot;published&quot;</span> = <span class="string">&quot;ture&quot;</span></span><br><span class="line"><span class="variable constant_">SELECT</span> <span class="string">&quot;posts&quot;</span>.* <span class="variable constant_">FROM</span> <span class="string">&quot;posts&quot;</span> <span class="variable constant_">WHERE</span> <span class="string">&quot;posts&quot;</span>.<span class="string">&quot;published&quot;</span> = <span class="string">&quot;true&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>By default, it loads data with two separate queries for loading user data and its associated post data.</p>
</li>
<li>
<p>It may give a duplicate record in a few cases. Solution over it is using select with it.<br>
ex. Let’s consider that the total users are 4,</p>
</li>
</ul>
<p>To see it let’s create some sample data.</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">self</span>.setup</span><br><span class="line">  <span class="title class_">User</span>.delete_all</span><br><span class="line">  <span class="title class_">Post</span>.delete_all</span><br><span class="line"></span><br><span class="line">  u = <span class="title class_">User</span>.create <span class="symbol">name:</span> <span class="string">&#x27;Neeraj&#x27;</span></span><br><span class="line">  u.posts.create! <span class="symbol">title:</span> <span class="string">&#x27;ruby&#x27;</span>, <span class="symbol">desc:</span> <span class="string">&#x27;ruby is awesome&#x27;</span></span><br><span class="line">  u.posts.create! <span class="symbol">title:</span> <span class="string">&#x27;rails&#x27;</span>, <span class="symbol">desc:</span> <span class="string">&#x27;rails is awesome&#x27;</span></span><br><span class="line">  u.posts.create! <span class="symbol">title:</span> <span class="string">&#x27;JavaScript&#x27;</span>, <span class="symbol">desc:</span> <span class="string">&#x27;JavaScript is awesome&#x27;</span></span><br><span class="line"></span><br><span class="line">  u = <span class="title class_">User</span>.create <span class="symbol">name:</span> <span class="string">&#x27;Neil&#x27;</span></span><br><span class="line">  u.posts.create! <span class="symbol">title:</span> <span class="string">&#x27;JavaScript&#x27;</span>, <span class="symbol">desc:</span> <span class="string">&#x27;Javascript is awesome&#x27;</span></span><br><span class="line"></span><br><span class="line">  u = <span class="title class_">User</span>.create <span class="symbol">name:</span> <span class="string">&#x27;Trisha&#x27;</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>With the above sample data if we execute <code>User.joins(:posts)</code> then this is the result we get:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#&lt;User id: 9, name: &quot;Neeraj&quot;&gt;</span><br><span class="line">#&lt;User id: 9, name: &quot;Neeraj&quot;&gt;</span><br><span class="line">#&lt;User id: 9, name: &quot;Neeraj&quot;&gt;</span><br><span class="line">#&lt;User id: 10, name: &quot;Neil&quot;&gt;</span><br></pre></td></tr></table></figure>
<p>We can avoid the duplication by using distinct .</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">User</span>.joins(<span class="symbol">:posts</span>).distinct</span><br><span class="line"><span class="comment"># Or User.joins(:posts).select(&#x27;distinct users.*&#x27;).to_a</span></span><br></pre></td></tr></table></figure>
<p>then that is the result we get:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#&lt;User id: 9, name: &quot;Neeraj&quot;&gt;</span><br><span class="line">#&lt;User id: 10, name: &quot;Neil&quot;&gt;</span><br></pre></td></tr></table></figure>
<hr>
<p>Extra : Joins with select example as below,</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user = <span class="title class_">User</span>.joins(<span class="symbol">:posts</span>).select(“users.id, posts.name as post_name, posts.published as published”).where(<span class="symbol">id:</span> <span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<p>It will give output of ActiveRecord array with post name, user id and post published for user with id as 1, so we can have all associated post name as user.map(&amp;:post_name)</p>
<hr>
<h2 id="Preload">Preload</h2>
<p>The Preload works perfectly fine for loading associated data.</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">users = <span class="title class_">User</span>.preload(<span class="symbol">:posts</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># =&gt;</span></span><br><span class="line"><span class="variable constant_">SELECT</span> <span class="string">&quot;users&quot;</span>.* <span class="variable constant_">FROM</span> <span class="string">&quot;users&quot;</span></span><br><span class="line"><span class="variable constant_">SELECT</span> <span class="string">&quot;posts&quot;</span>.* <span class="variable constant_">FROM</span> <span class="string">&quot;posts&quot;</span>  <span class="variable constant_">WHERE</span> <span class="string">&quot;posts&quot;</span>.<span class="string">&quot;user_id&quot;</span> <span class="variable constant_">IN</span> (<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<p>The query will load and store all users with associated posts data.</p>
<h3 id="Pros-2">Pros</h3>
<p>It stores the associated data, as a result, it solves the (n+1) issue</p>
<h3 id="Cons-2">Cons</h3>
<ul>
<li>It by default loads data with two separate query for loading data and its associated posts data.</li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">User</span>.preload(<span class="symbol">:posts</span>).where(<span class="string">&quot;users.name=&#x27;Neeraj&#x27;&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># =&gt;</span></span><br><span class="line"><span class="variable constant_">SELECT</span> <span class="string">&quot;users&quot;</span>.* <span class="variable constant_">FROM</span> <span class="string">&quot;users&quot;</span>  <span class="variable constant_">WHERE</span> (users.name=<span class="string">&#x27;Neeraj&#x27;</span>)</span><br><span class="line"><span class="variable constant_">SELECT</span> <span class="string">&quot;posts&quot;</span>.* <span class="variable constant_">FROM</span> <span class="string">&quot;posts&quot;</span>  <span class="variable constant_">WHERE</span> <span class="string">&quot;posts&quot;</span>.<span class="string">&quot;user_id&quot;</span> <span class="variable constant_">IN</span> (<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>It can not be used for comparing and filtering for associated data, such as where can not be used for associated data filtering in preload.</li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">User</span>.preload(<span class="symbol">:posts</span>).where(<span class="string">&quot;posts.desc=&#x27;ruby is awesome&#x27;&quot;</span>) <span class="comment"># It will throw an error.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># =&gt;</span></span><br><span class="line"><span class="title class_">SQLite3</span><span class="symbol">:</span><span class="symbol">:SQLException</span>: no such <span class="symbol">column:</span> posts.<span class="symbol">desc:</span></span><br><span class="line"><span class="variable constant_">SELECT</span> <span class="string">&quot;users&quot;</span>.* <span class="variable constant_">FROM</span> <span class="string">&quot;users&quot;</span>  <span class="variable constant_">WHERE</span> (posts.desc=<span class="string">&#x27;ruby is awesome&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="Includes">Includes</h2>
<p>The Includes works perfectly fine for loading, comparing and filtering data with associated data.</p>
<p>By default Includes loads the association data in a separate query just like preload.</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">users = <span class="title class_">User</span>.includes(<span class="symbol">:posts</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># =&gt;</span></span><br><span class="line"><span class="variable constant_">SELECT</span>  <span class="string">&quot;users&quot;</span>.* <span class="variable constant_">FROM</span> <span class="string">&quot;users&quot;</span></span><br><span class="line"><span class="variable constant_">SELECT</span> <span class="string">&quot;posts&quot;</span>.* <span class="variable constant_">FROM</span> <span class="string">&quot;posts&quot;</span> <span class="variable constant_">WHERE</span> <span class="string">&quot;posts&quot;</span>.<span class="string">&quot;user_id&quot;</span> <span class="variable constant_">IN</span> (<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br></pre></td></tr></table></figure>
<p>However it is smarter than preload. Whenever a WHERE clause is added with association, it switches from using two separate queries to single <code>LEFT OUTER JOIN</code> query to fetch the data and applies the supplied condition.</p>
<p>So includes changes from two queries to a single query in some cases.</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">users = <span class="title class_">User</span>.includes(<span class="symbol">:posts</span>).where(<span class="string">&quot;posts.published = ?&quot;</span>, <span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># =&gt;</span></span><br><span class="line"><span class="variable constant_">SELECT</span> <span class="string">&quot;users&quot;</span>.<span class="string">&quot;id&quot;</span> <span class="variable constant_">AS</span> t0_r0, <span class="string">&quot;users&quot;</span>.<span class="string">&quot;name&quot;</span> <span class="variable constant_">AS</span> t0_r1, <span class="string">&quot;posts&quot;</span>.<span class="string">&quot;id&quot;</span> <span class="variable constant_">AS</span> t1_r0,</span><br><span class="line">       <span class="string">&quot;posts&quot;</span>.<span class="string">&quot;title&quot;</span> <span class="variable constant_">AS</span> t1_r1,</span><br><span class="line">       <span class="string">&quot;posts&quot;</span>.<span class="string">&quot;user_id&quot;</span> <span class="variable constant_">AS</span> t1_r2, <span class="string">&quot;posts&quot;</span>.<span class="string">&quot;desc&quot;</span> <span class="variable constant_">AS</span> t1_r3</span><br><span class="line"><span class="variable constant_">FROM</span> <span class="string">&quot;users&quot;</span> <span class="variable constant_">LEFT</span> <span class="variable constant_">OUTER</span> <span class="variable constant_">JOIN</span> <span class="string">&quot;posts&quot;</span> <span class="variable constant_">ON</span> <span class="string">&quot;posts&quot;</span>.<span class="string">&quot;user_id&quot;</span> = <span class="string">&quot;users&quot;</span>.<span class="string">&quot;id&quot;</span> </span><br><span class="line"><span class="variable constant_">WHERE</span> <span class="string">&quot;posts&quot;</span>.<span class="string">&quot;published&quot;</span> = <span class="string">&quot;true&quot;</span></span><br></pre></td></tr></table></figure>
<p>The query will load all users with posts having published attribute value as true.</p>
<h3 id="Pros-3">Pros</h3>
<ul>
<li>
<p>It uses <code>OUTER LEFT JOIN</code> query to load associated data.</p>
</li>
<li>
<p>It solves the (n+1) issue all alone, since it stores associated data for future use.</p>
</li>
<li>
<p>It is smart enough to load associated data with either single query for simple cases or with two separate query for other cases. In case, for some reason if query for includes needs to force into single query, then it can be performed with includes+references.<br>
ex.</p>
</li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">User</span>.includes(<span class="symbol">:posts</span>).references(<span class="symbol">:posts</span>)</span><br></pre></td></tr></table></figure>
<h3 id="Cons-3">Cons</h3>
<ul>
<li>It uses <code>OUTER LEFT JOIN</code> query to load associated data, as a result, associated data gets impacted.<br>
ex. Let’s consider if the first user has a total of 12 posts,</li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">=&gt; users = <span class="title class_">User</span>.includes(<span class="symbol">:posts</span>).where(“posts.published = <span class="string">?”</span>, true)</span><br><span class="line"></span><br><span class="line">=&gt; users.first.posts.length <span class="comment"># it may ouptput less than 12 as ex.4</span></span><br></pre></td></tr></table></figure>
<h2 id="Eager-load">Eager load</h2>
<p>The Eager load works perfectly fine for loading, comparing and filtering data using associated data.</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">users = <span class="title class_">User</span>.eager_load(<span class="symbol">:posts</span>).where(<span class="string">&quot;posts.published = ?&quot;</span>, <span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># =&gt;</span></span><br><span class="line"><span class="variable constant_">SELECT</span> <span class="string">&quot;users&quot;</span>.<span class="string">&quot;id&quot;</span> <span class="variable constant_">AS</span> t0_r0, <span class="string">&quot;users&quot;</span>.<span class="string">&quot;name&quot;</span> <span class="variable constant_">AS</span> t0_r1, <span class="string">&quot;posts&quot;</span>.<span class="string">&quot;id&quot;</span> <span class="variable constant_">AS</span> t1_r0,</span><br><span class="line">       <span class="string">&quot;posts&quot;</span>.<span class="string">&quot;title&quot;</span> <span class="variable constant_">AS</span> t1_r1, <span class="string">&quot;posts&quot;</span>.<span class="string">&quot;user_id&quot;</span> <span class="variable constant_">AS</span> t1_r2, <span class="string">&quot;posts&quot;</span>.<span class="string">&quot;desc&quot;</span> <span class="variable constant_">AS</span> t1_r3</span><br><span class="line"><span class="variable constant_">FROM</span> <span class="string">&quot;users&quot;</span> <span class="variable constant_">LEFT</span> <span class="variable constant_">OUTER</span> <span class="variable constant_">JOIN</span> <span class="string">&quot;posts&quot;</span> <span class="variable constant_">ON</span> <span class="string">&quot;posts&quot;</span>.<span class="string">&quot;user_id&quot;</span> = <span class="string">&quot;users&quot;</span>.<span class="string">&quot;id&quot;</span> <span class="variable constant_">WHERE</span> </span><br><span class="line">       <span class="string">&quot;posts&quot;</span>.<span class="string">&quot;published&quot;</span> = <span class="string">&quot;true&quot;</span></span><br></pre></td></tr></table></figure>
<p>The query will load all users with posts having published attribute value as true.</p>
<h3 id="Pros-4">Pros</h3>
<ul>
<li>
<p>It uses <code>OUTER LEFT JOIN</code> query to load associated data.</p>
</li>
<li>
<p>It solves the (n+1) issue all alone, since it stores associated data for future use.</p>
</li>
<li>
<p>By default, it loads data with a single query for users and its associated post data.</p>
</li>
</ul>
<h3 id="Cons-4">Cons</h3>
<ul>
<li>It uses <code>OUTER LEFT JOIN</code> query to load associated data, as a result, associated data gets impacted.<br>
ex. If the first user has a total of 12 posts(include 4 posts which published is true).</li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">=&gt; users = <span class="title class_">User</span>.eager_load(<span class="symbol">:posts</span>).where(“posts.published = <span class="string">?”</span>, true)</span><br><span class="line"></span><br><span class="line">=&gt; users.first.posts.length <span class="comment"># it may ouptput less than 12 as ex.4</span></span><br></pre></td></tr></table></figure>
<hr>
<p>Extra: Since eager_load force data to load with a single query to load user and its associated post data, it takes comparatively more time to load a query than to load two separate query in most of the cases. So it depends more on the use-case to use joins/preload/includes/eager_load while loading/comparing/filtering associated data.</p>
<hr>
<h2 id="Summary">Summary</h2>
<p>I’d roughly summarize my approach to these methods like this:</p>
<ul>
<li>
<p>If just filtering, not accessing relationships, use joins.</p>
</li>
<li>
<p>If accessing relationships, start with eager_load.</p>
</li>
<li>
<p>If eager_load is slow using single query, will use includes to try two separate queries and compare performance.</p>
</li>
</ul>
<p>Hopefully this is enough to prevent some of the more basic performance deadends when using joins, includes, preload, and eager_load.</p>
<h2 id="References">References</h2>
<p>[1] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://scoutapm.com/blog/activerecord-includes-vs-joins-vs-preload-vs-eager_load-when-and-where">Making sense of ActiveRecord joins, includes, preload, and eager_load | Scout APM Blog - https://scoutapm.com/blog/activerecord-includes-vs-joins-vs-preload-vs-eager_load-when-and-where</a></p>
<p>[2] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://medium.com/@tadhao/joins-vs-preload-vs-includes-vs-eager-load-in-rails-5f721c44b3a9">Joins vs Preload vs Includes vs Eager load in Rails | by Tushar Adhao | Medium - https://medium.com/@tadhao/joins-vs-preload-vs-includes-vs-eager-load-in-rails-5f721c44b3a9</a></p>
<p>[3] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://bigbinary.com/blog/preload-vs-eager-load-vs-joins-vs-includes">Preload, Eagerload, Includes and Joins | BigBinary Blog - https://bigbinary.com/blog/preload-vs-eager-load-vs-joins-vs-includes</a></p>
<p>[4] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://blazarblogs.wordpress.com/2019/08/09/joins-vs-includes-vs-preload-vs-eagerload/">Joins vs Includes vs Preload vs Eagerload - https://blazarblogs.wordpress.com/2019/08/09/joins-vs-includes-vs-preload-vs-eagerload/</a></p>
<p>[5] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://guides.rubyonrails.org/active_record_querying.html">Active Record Query Interface — Ruby on Rails Guides - https://guides.rubyonrails.org/active_record_querying.html</a></p>
<p>[6] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://bhserna.com/guide-for-preloading-associations-in-rails.html">A guide for preloading associations in rails - https://bhserna.com/guide-for-preloading-associations-in-rails.html</a></p>
<p>[7] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://bhserna.com/includes-preload-eager-load-joins-in-rails.html">What is the difference between includes, preload, eager_load and joins in ActiveRecord? - https://bhserna.com/includes-preload-eager-load-joins-in-rails.html</a></p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>Buy me a coffee</div>
  <button>
    Donate
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/bitcoin.png" alt="CloudoLife Bitcoin">
        <span>Bitcoin</span>
      </div>

  </div>
</div>

          <div class="followme">
  <span>Welcome to my other publishing channels</span>

  <div class="social-list">

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://twitter.com/CloudoLife" rel="external nofollow noreferrer">
            <span class="icon">
              <i class="fab fa-twitter"></i>
            </span>

            <span class="label">Twitter</span>
          </a>
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://t.me/CloudoLife" rel="external nofollow noreferrer">
            <span class="icon">
              <i class="fab fa-telegram"></i>
            </span>

            <span class="label">Telegram</span>
          </a>
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="/atom.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">RSS</span>
          </a>
      </div>
  </div>
</div>

          <div class="post-tags">
              <a href="/tags/Rails-Ruby-on-Rails-RoR/" rel="tag"># Rails / Ruby on Rails (RoR)</a>
              <a href="/tags/Best-Practices/" rel="tag"># Best Practices</a>
              <a href="/tags/Ruby/" rel="tag"># Ruby</a>
              <a href="/tags/Programming-Language/" rel="tag"># Programming Language</a>
              <a href="/tags/Rails-ActiveRecord/" rel="tag"># Rails ActiveRecord</a>
              <a href="/tags/joins/" rel="tag"># joins</a>
              <a href="/tags/preload/" rel="tag"># preload</a>
              <a href="/tags/includes/" rel="tag"># includes</a>
              <a href="/tags/eager-load/" rel="tag"># eager_load</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2020/08/29/Programming-Language/Ruby/Ruby-on-Rails-RoR/Speed-Up-Your-Rails-App-RESTful-API-by-cache/" rel="prev" title="[Ruby on Rails (RoR)] Speed Up Your Rails App RESTful API by cache">
                  <i class="fa fa-angle-left"></i> [Ruby on Rails (RoR)] Speed Up Your Rails App RESTful API by cache
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2020/08/29/Programming-Language/Ruby/Ruby-on-Rails-RoR/Differences-Between-nil-empty-blank-and-present-in-Ruby-on-Rails/" rel="next" title="[Ruby on Rails (RoR)] Differences Between nil?, empty?, blank?, and present? in Ruby on Rails">
                  [Ruby on Rails (RoR)] Differences Between nil?, empty?, blank?, and present? in Ruby on Rails <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments gitalk-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">CloudoLife</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="Word count total">2.6m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">39:58</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener external nofollow noreferrer" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener external nofollow noreferrer" target="_blank">NexT.Pisces</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"CloudoLife","repo":"col-hexo-CloudoLife.github.io","client_id":"4ca3ae8fb3a49237db9a","client_secret":"98d6652508799ef4350ab05aabe855e58f549112","admin_user":"benjamincloudolife","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":null,"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.min.js","integrity":"sha256-MVK9MGD/XJaGyIghSVrONSnoXoGh3IFxLw0zfvzpxR4="},"path_md5":"d9464d7a829345d01e14229f5566cfe1"}</script>
<script src="/js/third-party/comments/gitalk.js" defer></script>

</body>
</html>
