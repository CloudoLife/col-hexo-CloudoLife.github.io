<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="sJgro_9-KyRL3EkTM5KW84pQPrg2Fv1KdkibDRBIulE">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"cloudolife.com","root":"/","images":"/images","scheme":"Pisces","darkmode":true,"version":"8.23.1","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"always","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"default","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":null,"activeClass":"gitalk"},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js" defer></script>

    <meta name="description" content="testing Package testing provides support for automated testing of Go packages.">
<meta property="og:type" content="article">
<meta property="og:title" content="[Awesome Go] Use package testing to test, benchmark, example and coverage code in Golang (Go)">
<meta property="og:url" content="https://cloudolife.com/2020/03/14/Programming-Language/Golang-Go/Testing/Use-package-testing-to-test-benchmark-example-and-coverage-code-in-Golang-Go/index.html">
<meta property="og:site_name" content="Cloud-oriented Life">
<meta property="og:description" content="testing Package testing provides support for automated testing of Go packages.">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-03-14T00:00:00.000Z">
<meta property="article:modified_time" content="2025-06-10T09:49:34.929Z">
<meta property="article:author" content="CloudoLife">
<meta property="article:tag" content="Golang (Go)">
<meta property="article:tag" content="Testing">
<meta property="article:tag" content="Test-Driven Development (TDD)">
<meta property="article:tag" content="Example">
<meta property="article:tag" content="Benchmark">
<meta property="article:tag" content="Test Coverage">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://cloudolife.com/2020/03/14/Programming-Language/Golang-Go/Testing/Use-package-testing-to-test-benchmark-example-and-coverage-code-in-Golang-Go/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://cloudolife.com/2020/03/14/Programming-Language/Golang-Go/Testing/Use-package-testing-to-test-benchmark-example-and-coverage-code-in-Golang-Go/","path":"2020/03/14/Programming-Language/Golang-Go/Testing/Use-package-testing-to-test-benchmark-example-and-coverage-code-in-Golang-Go/","title":"[Awesome Go] Use package testing to test, benchmark, example and coverage code in Golang (Go)"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>[Awesome Go] Use package testing to test, benchmark, example and coverage code in Golang (Go) | Cloud-oriented Life</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-8Y9QPJWXQN"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-8Y9QPJWXQN","only_pageview":false,"measure_protocol_api_secret":null}</script>
  <script src="/js/third-party/analytics/google-analytics.js" defer></script>

  <script src="/js/third-party/analytics/baidu-analytics.js" defer></script>
  <script async src="https://hm.baidu.com/hm.js?995d7016a56cfd5c2ef6f2e6640a670e"></script>







  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script><script src="/js/bookmark.js" defer></script><script src="/js/pjax.js" defer></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous" defer></script>
<script src="/js/third-party/search/local-search.js" defer></script>

  <script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.3.1/pdfobject.min.js","integrity":"sha256-jI72I8ZLVflVOisZIOaLvRew3tyvzeu6aZXFm7P7dEo="},"url":"/lib/pdf/web/viewer.html"}</script>
  <script src="/js/third-party/tags/pdf.js" defer></script>






  
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>






<script data-ad-client="ca-pub-8693122033969144" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="Cloud-oriented Life" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Cloud-oriented Life</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Cloud Native Technology Improves Lives</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">1646</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">331</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">584</span></a></li><li class="menu-item menu-item-ansible"><a href="/tags/Ansible/" rel="section"><i class="fa fa-book fa-fw"></i>Ansible</a></li><li class="menu-item menu-item-awesome-software"><a href="/tags/Awesome-Software/" rel="section"><i class="fa fa-book fa-fw"></i>Awesome Software</a></li><li class="menu-item menu-item-golang-(go)"><a href="/tags/Golang-Go/" rel="section"><i class="fa fa-book fa-fw"></i>Golang (Go)</a></li><li class="menu-item menu-item-helm"><a href="/tags/Helm/" rel="section"><i class="fa fa-book fa-fw"></i>Helm</a></li><li class="menu-item menu-item-java"><a href="/tags/Java/" rel="section"><i class="fa fa-book fa-fw"></i>Java</a></li><li class="menu-item menu-item-javascript"><a href="/tags/JavaScript/" rel="section"><i class="fa fa-book fa-fw"></i>JavaScript</a></li><li class="menu-item menu-item-knative"><a href="/tags/Knative/" rel="section"><i class="fa fa-book fa-fw"></i>Knative</a></li><li class="menu-item menu-item-kubernetes-(k8s)"><a href="/tags/Kubernetes-K8S/" rel="section"><i class="fa fa-book fa-fw"></i>Kubernetes (K8S)</a></li><li class="menu-item menu-item-macos"><a href="/tags/macOS/" rel="section"><i class="fa fa-book fa-fw"></i>macOS</a></li><li class="menu-item menu-item-python"><a href="/tags/Python/" rel="section"><i class="fa fa-book fa-fw"></i>Python</a></li><li class="menu-item menu-item-pulumi"><a href="/tags/Pulumi/" rel="section"><i class="fa fa-book fa-fw"></i>Pulumi</a></li><li class="menu-item menu-item-react"><a href="/tags/React/" rel="section"><i class="fa fa-book fa-fw"></i>React</a></li><li class="menu-item menu-item-ruby"><a href="/tags/Ruby/" rel="section"><i class="fa fa-book fa-fw"></i>Ruby</a></li><li class="menu-item menu-item-ruby-on-rails"><a href="/tags/Ruby-on-Rails-RoR/" rel="section"><i class="fa fa-book fa-fw"></i>Ruby On Rails</a></li><li class="menu-item menu-item-rust"><a href="/tags/Rust/" rel="section"><i class="fa fa-book fa-fw"></i>Rust</a></li><li class="menu-item menu-item-serverless"><a href="/tags/Serverless/" rel="section"><i class="fa fa-book fa-fw"></i>Serverless</a></li><li class="menu-item menu-item-service-mesh"><a href="/tags/Service-Mesh/" rel="section"><i class="fa fa-book fa-fw"></i>Service Mesh</a></li><li class="menu-item menu-item-svelte"><a href="/tags/Svelte/" rel="section"><i class="fa fa-book fa-fw"></i>Svelte</a></li><li class="menu-item menu-item-taro"><a href="/tags/Taro/" rel="section"><i class="fa fa-book fa-fw"></i>Taro</a></li><li class="menu-item menu-item-terraform"><a href="/tags/Terraform/" rel="section"><i class="fa fa-book fa-fw"></i>Terraform</a></li><li class="menu-item menu-item-typescript"><a href="/tags/TypeScript/" rel="section"><i class="fa fa-book fa-fw"></i>TypeScript</a></li><li class="menu-item menu-item-about"><a href="/about-us/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a></li><li class="menu-item menu-item-rss"><a href="/atom.xml" rel="section"><i class="fa fa-rss fa-fw"></i>RSS</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="Searching..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number">1.</span> <span class="nav-text">testing</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#TestXxx"><span class="nav-number">1.1.</span> <span class="nav-text">TestXxx</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Benchmarks"><span class="nav-number">1.2.</span> <span class="nav-text">Benchmarks</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Examples"><span class="nav-number">1.3.</span> <span class="nav-text">Examples</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Skipping"><span class="nav-number">1.4.</span> <span class="nav-text">Skipping</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Subtests-and-Sub-benchmarks"><span class="nav-number">1.5.</span> <span class="nav-text">Subtests and Sub-benchmarks</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#TestMain-Test-Suite"><span class="nav-number">1.6.</span> <span class="nav-text">TestMain &#x2F; Test Suite</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Testing-flags"><span class="nav-number">1.7.</span> <span class="nav-text">Testing flags</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Run-Test"><span class="nav-number">1.7.1.</span> <span class="nav-text">Run Test</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#References"><span class="nav-number">1.8.</span> <span class="nav-text">References</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">CloudoLife</p>
  <div class="site-description" itemprop="description">A Husband and Father, Knowledge Worker, Full-skilled Cloud Engineer</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">584</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">331</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">1646</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/CloudoLife" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;CloudoLife" rel="noopener me external nofollow noreferrer" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/CloudoLife" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;CloudoLife" rel="noopener me external nofollow noreferrer" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
    <div class="sidebar-inner sidebar-blogroll">
      <div class="links-of-blogroll animated">
        <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
          Links
        </div>
        <ul class="links-of-blogroll-list">
            <li class="links-of-blogroll-item">
              <a href="https://cloudolife.cn/" title="https:&#x2F;&#x2F;cloudolife.cn" rel="noopener external nofollow noreferrer" target="_blank">CLoudoLife - Chinese (Simplified)</a>
            </li>
        </ul>
      </div>
    </div>
        <div class="pjax">
        </div>
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://cloudolife.com/2020/03/14/Programming-Language/Golang-Go/Testing/Use-package-testing-to-test-benchmark-example-and-coverage-code-in-Golang-Go/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CloudoLife">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cloud-oriented Life">
      <meta itemprop="description" content="A Husband and Father, Knowledge Worker, Full-skilled Cloud Engineer">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="[Awesome Go] Use package testing to test, benchmark, example and coverage code in Golang (Go) | Cloud-oriented Life">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          [Awesome Go] Use package testing to test, benchmark, example and coverage code in Golang (Go)
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-03-14 00:00:00" itemprop="dateCreated datePublished" datetime="2020-03-14T00:00:00+00:00">2020-03-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2025-06-10 09:49:34" itemprop="dateModified" datetime="2025-06-10T09:49:34+00:00">2025-06-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming-Language/" itemprop="url" rel="index"><span itemprop="name">Programming Language</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming-Language/Golang-Go/" itemprop="url" rel="index"><span itemprop="name">Golang (Go)</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming-Language/Golang-Go/Testing/" itemprop="url" rel="index"><span itemprop="name">Testing</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">Views: </span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>16k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>14 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1>testing</h1>
<p>Package testing provides support for automated testing of Go packages.</p>
<span id="more"></span>
<h2 id="TestXxx">TestXxx</h2>
<p>It is intended to be used in concert with the <code>go test</code> command, which automates execution of any function of the form</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestXxx</span><span class="params">(*testing.T)</span></span></span><br></pre></td></tr></table></figure>
<p>where Xxx does not start with a lowercase letter. The function name serves to identify the test routine.</p>
<p>Within these functions, use the <code>Error</code>, <code>Fail</code> or related methods to signal failure.</p>
<p>To write a new test suite, create a file whose name ends <code>_test.go</code> that contains the <code>TestXxx</code> functions as described here. Put the file in the same package as the one being tested. The file will be excluded from regular package builds but will be included when the <code>go test</code> command is run. For more detail, run <code>go help test</code> and <code>go help testflag</code>.</p>
<p>A simple test function looks like this:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestAbs</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">    got := Abs(<span class="number">-1</span>)</span><br><span class="line">    <span class="keyword">if</span> got != <span class="number">1</span> &#123;</span><br><span class="line">        t.Errorf(<span class="string">&quot;Abs(-1) = %d; want 1&quot;</span>, got)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Benchmarks">Benchmarks</h2>
<p>Functions of the form</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkXxx</span><span class="params">(*testing.B)</span></span></span><br></pre></td></tr></table></figure>
<p>are considered benchmarks, and are executed by the <code>go test</code> command when its <code>-bench</code> flag is provided. Benchmarks are run sequentially.</p>
<p>For a description of the testing flags, see <a target="_blank" rel="noopener external nofollow noreferrer" href="https://golang.org/cmd/go/#hdr-Testing_flags">https://golang.org/cmd/go/#hdr-Testing_flags</a></p>
<p>A sample benchmark function looks like this:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkRandInt</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; b.N; i++ &#123;</span><br><span class="line">        rand.Int()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The benchmark function must run the target code <code>b.N</code> times. During benchmark execution, <code>b.N</code> is adjusted until the benchmark function lasts long enough to be timed reliably. The output</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BenchmarkRandInt-8   	68453040	        17.8 ns/op</span><br></pre></td></tr></table></figure>
<p>means that the loop ran 68453040 times at a speed of 17.8 ns per loop.</p>
<p>If a benchmark needs some expensive setup before running, the timer may be reset:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkBigLen</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">    big := NewBig()</span><br><span class="line">    b.ResetTimer()</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; b.N; i++ &#123;</span><br><span class="line">        big.Len()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>If a benchmark needs to test performance in a parallel setting, it may use the <code>RunParallel</code> helper function; such benchmarks are intended to be used with the go test <code>-cpu</code> flag:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkTemplateParallel</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">    templ := template.Must(template.New(<span class="string">&quot;test&quot;</span>).Parse(<span class="string">&quot;Hello, &#123;&#123;.&#125;&#125;!&quot;</span>))</span><br><span class="line">    b.RunParallel(<span class="function"><span class="keyword">func</span><span class="params">(pb *testing.PB)</span></span> &#123;</span><br><span class="line">        <span class="keyword">var</span> buf bytes.Buffer</span><br><span class="line">        <span class="keyword">for</span> pb.Next() &#123;</span><br><span class="line">            buf.Reset()</span><br><span class="line">            templ.Execute(&amp;buf, <span class="string">&quot;World&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Examples">Examples</h2>
<p>The package also runs and verifies example code. Example functions may include a concluding line comment that begins with “Output:” and is compared with the standard output of the function when the tests are run. (The comparison ignores leading and trailing space.) These are examples of an example:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ExampleHello</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line">    <span class="comment">// Output: hello</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ExampleSalutations</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;hello, and&quot;</span>)</span><br><span class="line">    fmt.Println(<span class="string">&quot;goodbye&quot;</span>)</span><br><span class="line">    <span class="comment">// Output:</span></span><br><span class="line">    <span class="comment">// hello, and</span></span><br><span class="line">    <span class="comment">// goodbye</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The comment prefix “Unordered output:” is like “Output:”, but matches any line order:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ExamplePerm</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> _, value := <span class="keyword">range</span> Perm(<span class="number">5</span>) &#123;</span><br><span class="line">        fmt.Println(value)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Unordered output: 4</span></span><br><span class="line">    <span class="comment">// 2</span></span><br><span class="line">    <span class="comment">// 1</span></span><br><span class="line">    <span class="comment">// 3</span></span><br><span class="line">    <span class="comment">// 0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Example functions without output comments are compiled but not executed.</p>
<p>The naming convention to declare examples for the package, a function F, a type T and method M on type T are:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Example</span><span class="params">()</span></span> &#123; ... &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ExampleF</span><span class="params">()</span></span> &#123; ... &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ExampleT</span><span class="params">()</span></span> &#123; ... &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ExampleT_M</span><span class="params">()</span></span> &#123; ... &#125;</span><br></pre></td></tr></table></figure>
<p>Multiple example functions for a package/type/function/method may be provided by appending a distinct suffix to the name. The suffix must start with a lower-case letter.</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Example_suffix</span><span class="params">()</span></span> &#123; ... &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ExampleF_suffix</span><span class="params">()</span></span> &#123; ... &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ExampleT_suffix</span><span class="params">()</span></span> &#123; ... &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ExampleT_M_suffix</span><span class="params">()</span></span> &#123; ... &#125;</span><br></pre></td></tr></table></figure>
<p>The entire test file is presented as the example when it contains a single example function, at least one other function, type, variable, or constant declaration, and no test or benchmark functions.</p>
<h2 id="Skipping">Skipping</h2>
<p>Tests or benchmarks may be skipped at run time with a call to the Skip method of *T or *B:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestTimeConsuming</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> testing.Short() &#123;</span><br><span class="line">        t.Skip(<span class="string">&quot;skipping test in short mode.&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Subtests-and-Sub-benchmarks">Subtests and Sub-benchmarks</h2>
<p>The Run methods of T and B allow defining subtests and sub-benchmarks, without having to define separate functions for each. This enables uses like table-driven benchmarks and creating hierarchical tests. It also provides a way to share common setup and tear-down code:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestFoo</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">    <span class="comment">// &lt;setup code&gt;</span></span><br><span class="line">    t.Run(<span class="string">&quot;A=1&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(t *testing.T)</span></span> &#123; ... &#125;)</span><br><span class="line">    t.Run(<span class="string">&quot;A=2&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(t *testing.T)</span></span> &#123; ... &#125;)</span><br><span class="line">    t.Run(<span class="string">&quot;B=1&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(t *testing.T)</span></span> &#123; ... &#125;)</span><br><span class="line">    <span class="comment">// &lt;tear-down code&gt;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Each subtest and sub-benchmark has a unique name: the combination of the name of the top-level test and the sequence of names passed to Run, separated by slashes, with an optional trailing sequence number for disambiguation.</p>
<p>The argument to the -run and -bench command-line flags is an unanchored regular expression that matches the test’s name. For tests with multiple slash-separated elements, such as subtests, the argument is itself slash-separated, with expressions matching each name element in turn. Because it is unanchored, an empty expression matches any string. For example, using “matching” to mean “whose name contains”:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">go test -run &#x27;&#x27;      # Run all tests.</span><br><span class="line">go test -run Foo     # Run top-level tests matching &quot;Foo&quot;, such as &quot;TestFooBar&quot;.</span><br><span class="line">go test -run Foo/A=  # For top-level tests matching &quot;Foo&quot;, run subtests matching &quot;A=&quot;.</span><br><span class="line">go test -run /A=1    # For all top-level tests, run subtests matching &quot;A=1&quot;.</span><br></pre></td></tr></table></figure>
<p>Subtests can also be used to control parallelism. A parent test will only complete once all of its subtests complete. In this example, all tests are run in parallel with each other, and only with each other, regardless of other top-level tests that may be defined:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestGroupedParallel</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> _, tc := <span class="keyword">range</span> tests &#123;</span><br><span class="line">        tc := tc <span class="comment">// capture range variable</span></span><br><span class="line">        t.Run(tc.Name, <span class="function"><span class="keyword">func</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">            t.Parallel()</span><br><span class="line">            ...</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The race detector kills the program if it exceeds 8192 concurrent goroutines, so use care when running parallel tests with the -race flag set.</p>
<p>Run does not return until parallel subtests have completed, providing a way to clean up after a group of parallel tests:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestTeardownParallel</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">    <span class="comment">// This Run will not return until the parallel tests finish.</span></span><br><span class="line">    t.Run(<span class="string">&quot;group&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">        t.Run(<span class="string">&quot;Test1&quot;</span>, parallelTest1)</span><br><span class="line">        t.Run(<span class="string">&quot;Test2&quot;</span>, parallelTest2)</span><br><span class="line">        t.Run(<span class="string">&quot;Test3&quot;</span>, parallelTest3)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// &lt;tear-down code&gt;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="TestMain-Test-Suite">TestMain / Test Suite</h2>
<p>It is sometimes necessary for a test program to do extra setup or teardown before or after testing. It is also sometimes necessary for a test to control which code runs on the main thread. To support these and other cases, if a test file contains a function:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestMain</span><span class="params">(m *testing.M)</span></span></span><br></pre></td></tr></table></figure>
<p>then <code>go test</code> will call <code>TestMain(m)</code> instead of running the tests directly. <code>TestMain</code> runs in the main goroutine and can do whatever setup and teardown is necessary around a call to <code>m.Run</code>. <code>m.Run</code> will return an exit code that may be passed to <code>os.Exit</code>. If <code>TestMain</code> returns, the test wrapper will pass the result of <code>m.Run</code> to <code>os.Exit</code> itself.</p>
<p>When <code>TestMain</code> is called, <code>flag.Parse</code> has not been run. If <code>TestMain</code> depends on command-line flags, including those of the testing package, it should call <code>flag.Parse</code> explicitly. Command line flags are always parsed by the time test or benchmark functions run.</p>
<p>A simple implementation of <code>TestMain</code> is:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">	<span class="string">&quot;testing&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">setup</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Before all tests&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">teardown</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;After all tests&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// go test -v cloudolife.com/common/scm/models</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestMain</span><span class="params">(m *testing.M)</span></span> &#123;</span><br><span class="line">	<span class="comment">// call flag.Parse() here if TestMain uses flags</span></span><br><span class="line">	setup()</span><br><span class="line">	code := m.Run()</span><br><span class="line">	teardown()</span><br><span class="line">	os.Exit(code)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Testing-flags">Testing flags</h2>
<p>The <code>go test</code> command takes both flags that apply to <code>go test</code> itself and flags that apply to the resulting test binary.</p>
<p>Several of the flags control profiling and write an execution profile suitable for <code>go tool pprof</code>; run <code>go tool pprof -h</code> for more information. The <code>--alloc_space</code>, <code>--alloc_objects</code>, and <code>--show_bytes</code> options of pprof control how the information is presented.</p>
<p>The following flags are recognized by the <code>go test</code> command and control the execution of any test:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br></pre></td><td class="code"><pre><span class="line">-bench regexp</span><br><span class="line">    Run only those benchmarks matching a regular expression.</span><br><span class="line">    By default, no benchmarks are run.</span><br><span class="line">    To run all benchmarks, use &#x27;-bench .&#x27; or &#x27;-bench=.&#x27;.</span><br><span class="line">    The regular expression is split by unbracketed slash (/)</span><br><span class="line">    characters into a sequence of regular expressions, and each</span><br><span class="line">    part of a benchmark&#x27;s identifier must match the corresponding</span><br><span class="line">    element in the sequence, if any. Possible parents of matches</span><br><span class="line">    are run with b.N=1 to identify sub-benchmarks. For example,</span><br><span class="line">    given -bench=X/Y, top-level benchmarks matching X are run</span><br><span class="line">    with b.N=1 to find any sub-benchmarks matching Y, which are</span><br><span class="line">    then run in full.</span><br><span class="line"></span><br><span class="line">-benchtime t</span><br><span class="line">    Run enough iterations of each benchmark to take t, specified</span><br><span class="line">    as a time.Duration (for example, -benchtime 1h30s).</span><br><span class="line">    The default is 1 second (1s).</span><br><span class="line">    The special syntax Nx means to run the benchmark N times</span><br><span class="line">    (for example, -benchtime 100x).</span><br><span class="line"></span><br><span class="line">-count n</span><br><span class="line">    Run each test and benchmark n times (default 1).</span><br><span class="line">    If -cpu is set, run n times for each GOMAXPROCS value.</span><br><span class="line">    Examples are always run once.</span><br><span class="line"></span><br><span class="line">-cover</span><br><span class="line">    Enable coverage analysis.</span><br><span class="line">    Note that because coverage works by annotating the source</span><br><span class="line">    code before compilation, compilation and test failures with</span><br><span class="line">    coverage enabled may report line numbers that don&#x27;t correspond</span><br><span class="line">    to the original sources.</span><br><span class="line"></span><br><span class="line">-covermode set,count,atomic</span><br><span class="line">    Set the mode for coverage analysis for the package[s]</span><br><span class="line">    being tested. The default is &quot;set&quot; unless -race is enabled,</span><br><span class="line">    in which case it is &quot;atomic&quot;.</span><br><span class="line">    The values:</span><br><span class="line">	set: bool: does this statement run?</span><br><span class="line">	count: int: how many times does this statement run?</span><br><span class="line">	atomic: int: count, but correct in multithreaded tests;</span><br><span class="line">		significantly more expensive.</span><br><span class="line">    Sets -cover.</span><br><span class="line"></span><br><span class="line">-coverpkg pattern1,pattern2,pattern3</span><br><span class="line">    Apply coverage analysis in each test to packages matching the patterns.</span><br><span class="line">    The default is for each test to analyze only the package being tested.</span><br><span class="line">    See &#x27;go help packages&#x27; for a description of package patterns.</span><br><span class="line">    Sets -cover.</span><br><span class="line"></span><br><span class="line">-cpu 1,2,4</span><br><span class="line">    Specify a list of GOMAXPROCS values for which the tests or</span><br><span class="line">    benchmarks should be executed. The default is the current value</span><br><span class="line">    of GOMAXPROCS.</span><br><span class="line"></span><br><span class="line">-failfast</span><br><span class="line">    Do not start new tests after the first test failure.</span><br><span class="line"></span><br><span class="line">-list regexp</span><br><span class="line">    List tests, benchmarks, or examples matching the regular expression.</span><br><span class="line">    No tests, benchmarks or examples will be run. This will only</span><br><span class="line">    list top-level tests. No subtest or subbenchmarks will be shown.</span><br><span class="line"></span><br><span class="line">-parallel n</span><br><span class="line">    Allow parallel execution of test functions that call t.Parallel.</span><br><span class="line">    The value of this flag is the maximum number of tests to run</span><br><span class="line">    simultaneously; by default, it is set to the value of GOMAXPROCS.</span><br><span class="line">    Note that -parallel only applies within a single test binary.</span><br><span class="line">    The `go test` command may run tests for different packages</span><br><span class="line">    in parallel as well, according to the setting of the -p flag</span><br><span class="line">    (see &#x27;go help build&#x27;).</span><br><span class="line"></span><br><span class="line">-run regexp</span><br><span class="line">    Run only those tests and examples matching the regular expression.</span><br><span class="line">    For tests, the regular expression is split by unbracketed slash (/)</span><br><span class="line">    characters into a sequence of regular expressions, and each part</span><br><span class="line">    of a test&#x27;s identifier must match the corresponding element in</span><br><span class="line">    the sequence, if any. Note that possible parents of matches are</span><br><span class="line">    run too, so that -run=X/Y matches and runs and reports the result</span><br><span class="line">    of all tests matching X, even those without sub-tests matching Y,</span><br><span class="line">    because it must run them to look for those sub-tests.</span><br><span class="line"></span><br><span class="line">-short</span><br><span class="line">    Tell long-running tests to shorten their run time.</span><br><span class="line">    It is off by default but set during all.bash so that installing</span><br><span class="line">    the Go tree can run a sanity check but not spend time running</span><br><span class="line">    exhaustive tests.</span><br><span class="line"></span><br><span class="line">-timeout d</span><br><span class="line">    If a test binary runs longer than duration d, panic.</span><br><span class="line">    If d is 0, the timeout is disabled.</span><br><span class="line">    The default is 10 minutes (10m).</span><br><span class="line"></span><br><span class="line">-v</span><br><span class="line">    Verbose output: log all tests as they are run. Also print all</span><br><span class="line">    text from Log and Logf calls even if the test succeeds.</span><br><span class="line"></span><br><span class="line">-vet list</span><br><span class="line">    Configure the invocation of &quot;go vet&quot; during `go test`</span><br><span class="line">    to use the comma-separated list of vet checks.</span><br><span class="line">    If list is empty, `go test` runs &quot;go vet&quot; with a curated list of</span><br><span class="line">    checks believed to be always worth addressing.</span><br><span class="line">    If list is &quot;off&quot;, `go test` does not run &quot;go vet&quot; at all.</span><br><span class="line">The following flags are also recognized by `go test` and can be used to profile the tests during execution:</span><br><span class="line"></span><br><span class="line">-benchmem</span><br><span class="line">    Print memory allocation statistics for benchmarks.</span><br><span class="line"></span><br><span class="line">-blockprofile block.out</span><br><span class="line">    Write a goroutine blocking profile to the specified file</span><br><span class="line">    when all tests are complete.</span><br><span class="line">    Writes test binary as -c would.</span><br><span class="line"></span><br><span class="line">-blockprofilerate n</span><br><span class="line">    Control the detail provided in goroutine blocking profiles by</span><br><span class="line">    calling runtime.SetBlockProfileRate with n.</span><br><span class="line">    See &#x27;go doc runtime.SetBlockProfileRate&#x27;.</span><br><span class="line">    The profiler aims to sample, on average, one blocking event every</span><br><span class="line">    n nanoseconds the program spends blocked. By default,</span><br><span class="line">    if -test.blockprofile is set without this flag, all blocking events</span><br><span class="line">    are recorded, equivalent to -test.blockprofilerate=1.</span><br><span class="line"></span><br><span class="line">-coverprofile cover.out</span><br><span class="line">    Write a coverage profile to the file after all tests have passed.</span><br><span class="line">    Sets -cover.</span><br><span class="line"></span><br><span class="line">-cpuprofile cpu.out</span><br><span class="line">    Write a CPU profile to the specified file before exiting.</span><br><span class="line">    Writes test binary as -c would.</span><br><span class="line"></span><br><span class="line">-memprofile mem.out</span><br><span class="line">    Write an allocation profile to the file after all tests have passed.</span><br><span class="line">    Writes test binary as -c would.</span><br><span class="line"></span><br><span class="line">-memprofilerate n</span><br><span class="line">    Enable more precise (and expensive) memory allocation profiles by</span><br><span class="line">    setting runtime.MemProfileRate. See &#x27;go doc runtime.MemProfileRate&#x27;.</span><br><span class="line">    To profile all memory allocations, use -test.memprofilerate=1.</span><br><span class="line"></span><br><span class="line">-mutexprofile mutex.out</span><br><span class="line">    Write a mutex contention profile to the specified file</span><br><span class="line">    when all tests are complete.</span><br><span class="line">    Writes test binary as -c would.</span><br><span class="line"></span><br><span class="line">-mutexprofilefraction n</span><br><span class="line">    Sample 1 in n stack traces of goroutines holding a</span><br><span class="line">    contended mutex.</span><br><span class="line"></span><br><span class="line">-outputdir directory</span><br><span class="line">    Place output files from profiling in the specified directory,</span><br><span class="line">    by default the directory in which `go test` is running.</span><br><span class="line"></span><br><span class="line">-trace trace.out</span><br><span class="line">    Write an execution trace to the specified file before exiting.</span><br></pre></td></tr></table></figure>
<p>Each of these flags is also recognized with an optional <code>test.</code> prefix, as in <code>-test.v</code>. When invoking the generated test binary (the result of <code>go test -c</code>) directly, however, the prefix is mandatory.</p>
<p>The <code>go test</code> command rewrites or removes recognized flags, as appropriate, both before and after the optional package list, before invoking the test binary.</p>
<p>For instance, the command</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">go <span class="built_in">test</span> -v -myflag testdata -cpuprofile=prof.out -x</span></span><br></pre></td></tr></table></figure>
<p>will compile the test binary and then run it as</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">pkg.test -test.v -myflag testdata -test.cpuprofile=prof.out</span></span><br></pre></td></tr></table></figure>
<p>(The <code>-x</code> flag is removed because it applies only to the go command’s execution, not to the test itself.)</p>
<p>The test flags that generate profiles (other than for coverage) also leave the test binary in pkg.test for use when analyzing the profiles.</p>
<p>When <code>go test</code> runs a test binary, it does so from within the corresponding package’s source code directory. Depending on the test, it may be necessary to do the same when invoking a generated test binary directly.</p>
<p>The command-line package list, if present, must appear before any flag not known to the go test command. Continuing the example above, the package list would have to appear before -myflag, but could appear on either side of -v.</p>
<p>When <code>go test</code> runs in package list mode, <code>go test</code> caches successful package test results to avoid unnecessary repeated running of tests. To disable test caching, use any test flag or argument other than the cacheable flags. The idiomatic way to disable test caching explicitly is to use -count=1.</p>
<p>To keep an argument for a test binary from being interpreted as a known flag or a package name, use -args (see <code>go help test</code>) which passes the remainder of the command line through to the test binary uninterpreted and unaltered.</p>
<p>For instance, the command</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">go <span class="built_in">test</span> -v -args -x -v</span></span><br></pre></td></tr></table></figure>
<p>will compile the test binary and then run it as</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">pkg.test -test.v -x -v</span></span><br></pre></td></tr></table></figure>
<p>Similarly,</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">go <span class="built_in">test</span> -args math</span></span><br></pre></td></tr></table></figure>
<p>will compile the test binary and then run it as</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">pkg.test math</span></span><br></pre></td></tr></table></figure>
<p>In the first example, the <code>-x</code> and the second <code>-v</code> are passed through to the test binary unchanged and with no effect on the go command itself. In the second example, the argument math is passed through to the test binary, instead of being interpreted as the package list.</p>
<h3 id="Run-Test">Run Test</h3>
<p>There are two ways to run tests, first is local directory mode where we run test using go test which is what we used when our greeting package was inside $GOPATH. The second way is to run tests in the package list mode. This mode is activated when we list what packages to test, for example,</p>
<ul>
<li>
<p>go test . to test package in the current directory.</p>
</li>
<li>
<p>go test package when package belongs to $GOPATH as long as you are not executing this command from inside a Go Module.</p>
</li>
<li>
<p>go test ./tranform to test package in ./tranform directory.</p>
</li>
<li>
<p>go test ./… to test all the package in the current directory.</p>
</li>
</ul>
<p>In package list mode, Go caches the only successful test results to avoid repeated running of the same tests. Whenever Go run tests on a package, Go creates a test binary and runs it. You can output this binary using -c flag with go test command. This will output .test file but won’t run it. Additionally, rename this file using -o flag.</p>
<h2 id="References">References</h2>
<p>[1] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://golang.org/pkg/testing/">testing - The Go Programming Language - https://golang.org/pkg/testing/</a></p>
<p>[2] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://golang.org/cmd/go/#hdr-Testing_flags">Testing flags - https://golang.org/cmd/go/#hdr-Testing_flags</a></p>
<p>[3] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://medium.com/rungo/unit-testing-made-easy-in-go-25077669318">Unit Testing made easy in Go. In this article, we will learn about… | by Uday Hiwarale | RunGo | Medium - https://medium.com/rungo/unit-testing-made-easy-in-go-25077669318</a></p>
<p>[4] <a target="_blank" rel="noopener external nofollow noreferrer" href="https://tutorialedge.net/golang/intro-testing-in-go/">An Introduction to Testing in Go | TutorialEdge.net - https://tutorialedge.net/golang/intro-testing-in-go/</a></p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>Buy me a coffee</div>
  <button>
    Donate
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/bitcoin.png" alt="CloudoLife Bitcoin">
        <span>Bitcoin</span>
      </div>

  </div>
</div>

          <div class="followme">
  <span>Welcome to my other publishing channels</span>

  <div class="social-list">

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://twitter.com/CloudoLife" rel="external nofollow noreferrer">
            <span class="icon">
              <i class="fab fa-twitter"></i>
            </span>

            <span class="label">Twitter</span>
          </a>
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://t.me/CloudoLife" rel="external nofollow noreferrer">
            <span class="icon">
              <i class="fab fa-telegram"></i>
            </span>

            <span class="label">Telegram</span>
          </a>
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="/atom.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">RSS</span>
          </a>
      </div>
  </div>
</div>

          <div class="post-tags">
              <a href="/tags/Golang-Go/" rel="tag"># Golang (Go)</a>
              <a href="/tags/Testing/" rel="tag"># Testing</a>
              <a href="/tags/Test-Driven-Development-TDD/" rel="tag"># Test-Driven Development (TDD)</a>
              <a href="/tags/Example/" rel="tag"># Example</a>
              <a href="/tags/Benchmark/" rel="tag"># Benchmark</a>
              <a href="/tags/Test-Coverage/" rel="tag"># Test Coverage</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2020/03/14/Programming-Language/Front-end-Development/React/MAIN-CONCEPTS/10-Lifting-State-Up/" rel="prev" title="[React MAIN CONCEPTS] 10. Lifting State Up">
                  <i class="fa fa-angle-left"></i> [React MAIN CONCEPTS] 10. Lifting State Up
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2020/03/14/Programming-Language/Golang-Go/Awesome-Go/Use-viper-to-load-local-or-remote-config-from-file-environment-variables-and-write-config-to-file-in-Golang-Go/" rel="next" title="[Awesome Go] Use viper to load local or remote config from file &amp; environment variables and write config to file in Golang (Go)">
                  [Awesome Go] Use viper to load local or remote config from file & environment variables and write config to file in Golang (Go) <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments gitalk-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">CloudoLife</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="Word count total">2.6m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">39:58</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener external nofollow noreferrer" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener external nofollow noreferrer" target="_blank">NexT.Pisces</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"CloudoLife","repo":"col-hexo-CloudoLife.github.io","client_id":"4ca3ae8fb3a49237db9a","client_secret":"98d6652508799ef4350ab05aabe855e58f549112","admin_user":"benjamincloudolife","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":null,"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.min.js","integrity":"sha256-MVK9MGD/XJaGyIghSVrONSnoXoGh3IFxLw0zfvzpxR4="},"path_md5":"fd3810ecee2c706b39de05fa2f154e17"}</script>
<script src="/js/third-party/comments/gitalk.js" defer></script>

</body>
</html>
